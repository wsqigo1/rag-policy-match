2025-07-01 01:56:04,368 - __main__ - INFO - 启动政策匹配RAG检索系统
2025-07-01 01:56:04,368 - __main__ - INFO - 正在初始化政策匹配系统...
2025-07-01 01:56:04,988 - policy_matcher - ERROR - 获取系统状态失败: No module named 'elasticsearch'
2025-07-01 01:56:04,988 - __main__ - INFO - 系统状态: {'status': '异常', 'error': "No module named 'elasticsearch'"}
2025-07-01 01:56:04,988 - __main__ - INFO - 发现政策文档: 北京市产业政策导引.pdf，开始加载...
2025-07-01 01:56:04,988 - policy_matcher - INFO - 开始添加政策文档: 北京市产业政策导引.pdf
2025-07-01 01:56:05,146 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-07-01 01:56:05,147 - jieba - DEBUG - Loading model from cache /var/folders/w7/v83dx60s0wnf6qh99wjhckhc0000gn/T/jieba.cache
2025-07-01 01:56:05,500 - jieba - DEBUG - Loading model cost 0.354 seconds.
2025-07-01 01:56:05,500 - jieba - DEBUG - Prefix dict has been built successfully.
2025-07-01 01:56:05,501 - document_processor - INFO - 开始处理文档: 北京市产业政策导引.pdf
2025-07-01 01:56:16,087 - document_processor - INFO - 文档处理完成: 北京市产业政策导引.pdf, 生成 910 个分块
2025-07-01 01:56:18,930 - embeddings - INFO - 正在加载嵌入模型: moka-ai/m3e-base
2025-07-01 01:56:18,930 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: moka-ai/m3e-base
2025-07-01 01:56:23,698 - embeddings - INFO - 模型加载完成，使用设备: cpu
2025-07-01 01:56:23,699 - embeddings - INFO - 开始编码 910 个文本
2025-07-01 01:57:48,474 - embeddings - INFO - 编码完成，输出形状: (910, 768)
2025-07-01 01:58:01,327 - vector_store - ERROR - 连接Milvus失败: <MilvusException: (code=2, message=Fail connecting to server on localhost:19530, illegal connection params or server unavailable)>
2025-07-01 01:58:01,327 - vector_store - ERROR - 连接Elasticsearch失败: Elasticsearch.__init__() got an unexpected keyword argument 'timeout'
2025-07-01 01:58:01,328 - policy_matcher - ERROR - 政策文档存储失败: 北京市产业政策导引.pdf
2025-07-01 01:58:01,337 - __main__ - WARNING - 政策文档加载失败
2025-07-01 01:58:01,337 - __main__ - INFO - 系统初始化完成
2025-07-01 01:58:01,338 - __main__ - INFO - 开始测试查询...
2025-07-01 01:58:01,338 - __main__ - INFO - 
=== 测试查询 1: 生物医药行业政策查询 ===
2025-07-01 01:58:01,338 - __main__ - INFO - 查询: 我想查找和生物医药相关的政策
2025-07-01 01:58:01,338 - policy_matcher - INFO - 开始政策匹配: 我想查找和生物医药相关的政策
2025-07-01 01:58:01,346 - retriever - INFO - 开始混合检索: 我想查找和生物医药相关的政策
2025-07-01 01:58:01,346 - retriever - INFO - 查询扩展: 我想查找和生物医药相关的政策 -> ['医药', '我想查找和生物医药相关的政策', '制药', '医疗', '医药健康', '医疗器械', '生命科学']
2025-07-01 01:58:01,346 - retriever - INFO - 构建过滤条件: {}
2025-07-01 01:58:01,407 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 01:58:01,407 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 01:58:01,407 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 01:58:01,407 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 01:58:01,408 - policy_matcher - INFO - 政策匹配完成，耗时: 0.07秒，返回: 0个结果
2025-07-01 01:58:01,408 - __main__ - INFO - 查询结果: 找到 0 个匹配政策
2025-07-01 01:58:01,408 - __main__ - INFO - 处理时间: 0.07秒
2025-07-01 01:58:01,408 - __main__ - INFO - 建议:
2025-07-01 01:58:01,408 - __main__ - INFO -   - 未找到匹配的政策，建议：
2025-07-01 01:58:01,408 - __main__ - INFO -   - 1. 调整查询关键词，使用更通用的表述
2025-07-01 01:58:01,408 - __main__ - INFO -   - 2. 尝试按行业或政策类型分类查询
2025-07-01 01:58:01,408 - __main__ - INFO - 
=== 测试查询 2: 初创企业政策查询 ===
2025-07-01 01:58:01,408 - __main__ - INFO - 查询: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 01:58:01,408 - policy_matcher - INFO - 开始政策匹配: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 01:58:01,408 - retriever - INFO - 开始混合检索: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 01:58:01,408 - retriever - INFO - 查询扩展: 我是一家小型初创企业，现阶段有什么政策比较适用 -> ['创业', '新成立', '小企业', '我是一家小型初创企业 现阶段有什么政策比较适用', '小微', '起步']
2025-07-01 01:58:01,408 - retriever - INFO - 构建过滤条件: {}
2025-07-01 01:58:01,451 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 01:58:01,451 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 01:58:01,451 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 01:58:01,451 - retriever - INFO - 企业规模过滤: 0 -> 0
2025-07-01 01:58:01,451 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 01:58:01,451 - policy_matcher - INFO - 政策匹配完成，耗时: 0.04秒，返回: 0个结果
2025-07-01 01:58:01,451 - __main__ - INFO - 查询结果: 找到 0 个匹配政策
2025-07-01 01:58:01,451 - __main__ - INFO - 处理时间: 0.04秒
2025-07-01 01:58:01,451 - __main__ - INFO - 建议:
2025-07-01 01:58:01,451 - __main__ - INFO -   - 未找到匹配的政策，建议：
2025-07-01 01:58:01,451 - __main__ - INFO -   - 1. 调整查询关键词，使用更通用的表述
2025-07-01 01:58:01,451 - __main__ - INFO -   - 2. 尝试按行业或政策类型分类查询
2025-07-01 01:58:01,451 - __main__ - INFO - 
=== 测试查询 3: 创新资金政策查询 ===
2025-07-01 01:58:01,451 - __main__ - INFO - 查询: 有哪些研发创新方面的资金支持政策
2025-07-01 01:58:01,451 - policy_matcher - INFO - 开始政策匹配: 有哪些研发创新方面的资金支持政策
2025-07-01 01:58:01,451 - retriever - INFO - 开始混合检索: 有哪些研发创新方面的资金支持政策
2025-07-01 01:58:01,451 - retriever - INFO - 查询扩展: 有哪些研发创新方面的资金支持政策 -> ['奖励', '资助', '专项资金', '研发', '有哪些研发创新方面的资金支持政策', '专利', '技术', '科技', '补贴']
2025-07-01 01:58:01,452 - retriever - INFO - 构建过滤条件: {}
2025-07-01 01:58:01,493 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 01:58:01,493 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 01:58:01,493 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 01:58:01,493 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 01:58:01,493 - policy_matcher - INFO - 政策匹配完成，耗时: 0.04秒，返回: 0个结果
2025-07-01 01:58:01,493 - __main__ - INFO - 查询结果: 找到 0 个匹配政策
2025-07-01 01:58:01,493 - __main__ - INFO - 处理时间: 0.04秒
2025-07-01 01:58:01,493 - __main__ - INFO - 建议:
2025-07-01 01:58:01,493 - __main__ - INFO -   - 未找到匹配的政策，建议：
2025-07-01 01:58:01,494 - __main__ - INFO -   - 1. 调整查询关键词，使用更通用的表述
2025-07-01 01:58:01,494 - __main__ - INFO -   - 2. 尝试按行业或政策类型分类查询
2025-07-01 01:58:01,494 - __main__ - INFO - 启动API服务...
2025-07-01 01:58:51,575 - api - INFO - 收到查询请求: 生物医药相关政策
2025-07-01 01:58:51,576 - policy_matcher - INFO - 开始政策匹配: 生物医药相关政策
2025-07-01 01:58:51,576 - retriever - INFO - 开始混合检索: 生物医药相关政策
2025-07-01 01:58:51,576 - retriever - INFO - 查询扩展: 生物医药相关政策 -> ['医药', '制药', '医疗', '医药健康', '生物医药相关政策', '医疗器械', '生命科学']
2025-07-01 01:58:51,576 - retriever - INFO - 构建过滤条件: {'industries': ['生物医药'], 'enterprise_scales': ['初创企业']}
2025-07-01 01:58:51,645 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 01:58:51,646 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 01:58:51,646 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 01:58:51,646 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 01:58:51,646 - policy_matcher - INFO - 政策匹配完成，耗时: 0.07秒，返回: 0个结果
2025-07-01 01:58:51,646 - api - INFO - 查询完成，返回 0 个结果
2025-07-01 02:00:07,851 - __main__ - INFO - 启动政策匹配RAG检索系统
2025-07-01 02:00:07,851 - __main__ - INFO - 正在初始化政策匹配系统...
2025-07-01 02:00:15,233 - __main__ - INFO - 用户中断，正在关闭系统...
2025-07-01 02:13:53,963 - __main__ - INFO - 启动政策匹配RAG检索系统
2025-07-01 02:13:53,963 - __main__ - INFO - 正在初始化政策匹配系统...
2025-07-01 02:14:05,227 - vector_store - ERROR - 连接Milvus失败: <MilvusException: (code=2, message=Fail connecting to server on localhost:19530, illegal connection params or server unavailable)>
2025-07-01 02:14:05,228 - vector_store - ERROR - 连接Elasticsearch失败: Elasticsearch.__init__() got an unexpected keyword argument 'timeout'
2025-07-01 02:14:07,467 - embeddings - INFO - 正在加载嵌入模型: moka-ai/m3e-base
2025-07-01 02:14:07,467 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: moka-ai/m3e-base
2025-07-01 02:14:12,811 - embeddings - INFO - 模型加载完成，使用设备: cpu
2025-07-01 02:14:12,812 - __main__ - INFO - 系统状态: {'status': '运行中', 'vector_store': {'milvus_connected': False, 'elasticsearch_connected': False, 'milvus_stats': {}, 'elasticsearch_stats': {}}, 'embedding_model': {'status': 'loaded', 'model_name': 'moka-ai/m3e-base', 'device': 'cpu', 'embedding_dim': 768, 'max_seq_length': 512}, 'components': {'document_processor': '正常', 'retriever': '正常', 'matcher': '正常'}}
2025-07-01 02:14:12,812 - __main__ - INFO - 发现政策文档: 北京市产业政策导引.pdf，开始加载...
2025-07-01 02:14:12,812 - policy_matcher - INFO - 开始添加政策文档: 北京市产业政策导引.pdf
2025-07-01 02:14:13,078 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-07-01 02:14:13,079 - jieba - DEBUG - Loading model from cache /var/folders/w7/v83dx60s0wnf6qh99wjhckhc0000gn/T/jieba.cache
2025-07-01 02:14:13,345 - jieba - DEBUG - Loading model cost 0.267 seconds.
2025-07-01 02:14:13,345 - jieba - DEBUG - Prefix dict has been built successfully.
2025-07-01 02:14:13,346 - document_processor - INFO - 开始处理文档: 北京市产业政策导引.pdf
2025-07-01 02:14:24,865 - document_processor - INFO - 文档处理完成: 北京市产业政策导引.pdf, 生成 910 个分块
2025-07-01 02:14:24,868 - embeddings - INFO - 开始编码 910 个文本
2025-07-01 02:15:55,057 - embeddings - INFO - 编码完成，输出形状: (910, 768)
2025-07-01 02:15:55,059 - policy_matcher - ERROR - 政策文档存储失败: 北京市产业政策导引.pdf
2025-07-01 02:15:55,060 - __main__ - WARNING - 政策文档加载失败
2025-07-01 02:15:55,060 - __main__ - INFO - 系统初始化完成
2025-07-01 02:15:55,062 - __main__ - INFO - 开始测试查询...
2025-07-01 02:15:55,062 - __main__ - INFO - 
=== 测试查询 1: 生物医药行业政策查询 ===
2025-07-01 02:15:55,062 - __main__ - INFO - 查询: 我想查找和生物医药相关的政策
2025-07-01 02:15:55,065 - policy_matcher - INFO - 开始政策匹配: 我想查找和生物医药相关的政策
2025-07-01 02:15:55,067 - retriever - INFO - 开始混合检索: 我想查找和生物医药相关的政策
2025-07-01 02:15:55,068 - retriever - INFO - 查询扩展: 我想查找和生物医药相关的政策 -> ['制药', '医药健康', '医药', '生命科学', '医疗', '医疗器械', '我想查找和生物医药相关的政策']
2025-07-01 02:15:55,068 - retriever - INFO - 构建过滤条件: {}
2025-07-01 02:15:55,110 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 02:15:55,110 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 02:15:55,110 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 02:15:55,110 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 02:15:55,110 - policy_matcher - INFO - 政策匹配完成，耗时: 0.05秒，返回: 0个结果
2025-07-01 02:15:55,110 - __main__ - INFO - 查询结果: 找到 0 个匹配政策
2025-07-01 02:15:55,110 - __main__ - INFO - 处理时间: 0.05秒
2025-07-01 02:15:55,111 - __main__ - INFO - 建议:
2025-07-01 02:15:55,111 - __main__ - INFO -   - 未找到匹配的政策，建议：
2025-07-01 02:15:55,111 - __main__ - INFO -   - 1. 调整查询关键词，使用更通用的表述
2025-07-01 02:15:55,111 - __main__ - INFO -   - 2. 尝试按行业或政策类型分类查询
2025-07-01 02:15:55,111 - __main__ - INFO - 
=== 测试查询 2: 初创企业政策查询 ===
2025-07-01 02:15:55,111 - __main__ - INFO - 查询: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 02:15:55,111 - policy_matcher - INFO - 开始政策匹配: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 02:15:55,111 - retriever - INFO - 开始混合检索: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 02:15:55,111 - retriever - INFO - 查询扩展: 我是一家小型初创企业，现阶段有什么政策比较适用 -> ['小企业', '我是一家小型初创企业 现阶段有什么政策比较适用', '起步', '小微', '新成立', '创业']
2025-07-01 02:15:55,111 - retriever - INFO - 构建过滤条件: {}
2025-07-01 02:15:55,146 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 02:15:55,146 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 02:15:55,146 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 02:15:55,146 - retriever - INFO - 企业规模过滤: 0 -> 0
2025-07-01 02:15:55,146 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 02:15:55,146 - policy_matcher - INFO - 政策匹配完成，耗时: 0.04秒，返回: 0个结果
2025-07-01 02:15:55,146 - __main__ - INFO - 查询结果: 找到 0 个匹配政策
2025-07-01 02:15:55,146 - __main__ - INFO - 处理时间: 0.04秒
2025-07-01 02:15:55,146 - __main__ - INFO - 建议:
2025-07-01 02:15:55,146 - __main__ - INFO -   - 未找到匹配的政策，建议：
2025-07-01 02:15:55,146 - __main__ - INFO -   - 1. 调整查询关键词，使用更通用的表述
2025-07-01 02:15:55,146 - __main__ - INFO -   - 2. 尝试按行业或政策类型分类查询
2025-07-01 02:15:55,146 - __main__ - INFO - 
=== 测试查询 3: 创新资金政策查询 ===
2025-07-01 02:15:55,146 - __main__ - INFO - 查询: 有哪些研发创新方面的资金支持政策
2025-07-01 02:15:55,146 - policy_matcher - INFO - 开始政策匹配: 有哪些研发创新方面的资金支持政策
2025-07-01 02:15:55,146 - retriever - INFO - 开始混合检索: 有哪些研发创新方面的资金支持政策
2025-07-01 02:15:55,146 - retriever - INFO - 查询扩展: 有哪些研发创新方面的资金支持政策 -> ['奖励', '资助', '有哪些研发创新方面的资金支持政策', '研发', '技术', '专利', '专项资金', '补贴', '科技']
2025-07-01 02:15:55,146 - retriever - INFO - 构建过滤条件: {}
2025-07-01 02:15:55,184 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 02:15:55,185 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 02:15:55,185 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 02:15:55,185 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 02:15:55,185 - policy_matcher - INFO - 政策匹配完成，耗时: 0.04秒，返回: 0个结果
2025-07-01 02:15:55,185 - __main__ - INFO - 查询结果: 找到 0 个匹配政策
2025-07-01 02:15:55,185 - __main__ - INFO - 处理时间: 0.04秒
2025-07-01 02:15:55,185 - __main__ - INFO - 建议:
2025-07-01 02:15:55,185 - __main__ - INFO -   - 未找到匹配的政策，建议：
2025-07-01 02:15:55,185 - __main__ - INFO -   - 1. 调整查询关键词，使用更通用的表述
2025-07-01 02:15:55,185 - __main__ - INFO -   - 2. 尝试按行业或政策类型分类查询
2025-07-01 02:15:55,185 - __main__ - INFO - 启动API服务...
2025-07-01 02:23:10,853 - __main__ - INFO - 启动政策匹配RAG检索系统
2025-07-01 02:23:10,854 - __main__ - INFO - 正在初始化政策匹配系统...
2025-07-01 02:23:11,886 - vector_store - INFO - 已连接到Milvus: localhost:19530
2025-07-01 02:23:12,422 - vector_store - INFO - 创建新集合: policy_collection
2025-07-01 02:23:15,113 - vector_store - ERROR - 连接Elasticsearch失败: Elasticsearch.__init__() got an unexpected keyword argument 'timeout'
2025-07-01 02:23:15,114 - vector_store - ERROR - 获取统计信息失败: 'Collection' object has no attribute 'get_stats'
2025-07-01 02:23:17,406 - embeddings - INFO - 正在加载嵌入模型: moka-ai/m3e-base
2025-07-01 02:23:17,406 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: moka-ai/m3e-base
2025-07-01 02:23:22,314 - embeddings - INFO - 模型加载完成，使用设备: cpu
2025-07-01 02:23:22,315 - __main__ - INFO - 系统状态: {'status': '运行中', 'vector_store': {'milvus_connected': True, 'elasticsearch_connected': False, 'milvus_stats': {}, 'elasticsearch_stats': {}}, 'embedding_model': {'status': 'loaded', 'model_name': 'moka-ai/m3e-base', 'device': 'cpu', 'embedding_dim': 768, 'max_seq_length': 512}, 'components': {'document_processor': '正常', 'retriever': '正常', 'matcher': '正常'}}
2025-07-01 02:23:22,315 - __main__ - INFO - 发现政策文档: 北京市产业政策导引.pdf，开始加载...
2025-07-01 02:23:22,315 - policy_matcher - INFO - 开始添加政策文档: 北京市产业政策导引.pdf
2025-07-01 02:23:22,543 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-07-01 02:23:22,543 - jieba - DEBUG - Loading model from cache /var/folders/w7/v83dx60s0wnf6qh99wjhckhc0000gn/T/jieba.cache
2025-07-01 02:23:22,821 - jieba - DEBUG - Loading model cost 0.278 seconds.
2025-07-01 02:23:22,821 - jieba - DEBUG - Prefix dict has been built successfully.
2025-07-01 02:23:22,822 - document_processor - INFO - 开始处理文档: 北京市产业政策导引.pdf
2025-07-01 02:23:25,444 - __main__ - INFO - 用户中断，正在关闭系统...
2025-07-01 02:31:23,184 - __main__ - INFO - 启动政策匹配RAG检索系统
2025-07-01 02:31:23,184 - __main__ - INFO - 正在初始化政策匹配系统...
2025-07-01 02:31:24,218 - vector_store - INFO - 已连接到Milvus: localhost:19530
2025-07-01 02:31:24,221 - vector_store - INFO - 加载现有集合: policy_collection
2025-07-01 02:31:24,225 - vector_store - ERROR - 连接Elasticsearch失败: URL must include a 'scheme', 'host', and 'port' component (ie 'https://localhost:9200')
2025-07-01 02:31:26,904 - embeddings - INFO - 正在加载嵌入模型: moka-ai/m3e-base
2025-07-01 02:31:26,904 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: moka-ai/m3e-base
2025-07-01 02:31:34,813 - embeddings - INFO - 模型加载完成，使用设备: cpu
2025-07-01 02:31:34,813 - __main__ - INFO - 系统状态: {'status': '运行中', 'vector_store': {'milvus_connected': True, 'elasticsearch_connected': False, 'milvus_stats': {'row_count': 0}, 'elasticsearch_stats': {}}, 'embedding_model': {'status': 'loaded', 'model_name': 'moka-ai/m3e-base', 'device': 'cpu', 'embedding_dim': 768, 'max_seq_length': 512}, 'components': {'document_processor': '正常', 'retriever': '正常', 'matcher': '正常'}}
2025-07-01 02:31:34,813 - __main__ - INFO - 发现政策文档: 北京市产业政策导引.pdf，开始加载...
2025-07-01 02:31:34,813 - policy_matcher - INFO - 开始添加政策文档: 北京市产业政策导引.pdf
2025-07-01 02:31:35,052 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-07-01 02:31:35,053 - jieba - DEBUG - Loading model from cache /var/folders/w7/v83dx60s0wnf6qh99wjhckhc0000gn/T/jieba.cache
2025-07-01 02:31:35,319 - jieba - DEBUG - Loading model cost 0.266 seconds.
2025-07-01 02:31:35,319 - jieba - DEBUG - Prefix dict has been built successfully.
2025-07-01 02:31:35,320 - document_processor - INFO - 开始处理文档: 北京市产业政策导引.pdf
2025-07-01 02:31:46,229 - document_processor - INFO - 文档处理完成: 北京市产业政策导引.pdf, 生成 910 个分块
2025-07-01 02:31:46,231 - embeddings - INFO - 开始编码 910 个文本
2025-07-01 02:32:49,317 - __main__ - INFO - 启动政策匹配RAG检索系统
2025-07-01 02:32:49,317 - __main__ - INFO - 正在初始化政策匹配系统...
2025-07-01 02:32:50,137 - vector_store - INFO - 已连接到Milvus: localhost:19530
2025-07-01 02:32:50,140 - vector_store - INFO - 加载现有集合: policy_collection
2025-07-01 02:32:50,157 - elastic_transport.transport - INFO - HEAD http://localhost:9200/ [status:200 duration:0.012s]
2025-07-01 02:32:50,157 - vector_store - INFO - 已连接到Elasticsearch: localhost:9200
2025-07-01 02:32:50,193 - elastic_transport.transport - INFO - HEAD http://localhost:9200/policy_index [status:404 duration:0.036s]
2025-07-01 02:32:50,367 - elastic_transport.transport - INFO - PUT http://localhost:9200/policy_index [status:200 duration:0.173s]
2025-07-01 02:32:50,367 - vector_store - INFO - 创建Elasticsearch索引: policy_index
2025-07-01 02:32:50,367 - vector_store - INFO - Elasticsearch索引就绪: policy_index
2025-07-01 02:32:50,384 - elastic_transport.transport - INFO - GET http://localhost:9200/policy_index/_stats [status:200 duration:0.016s]
2025-07-01 02:32:52,678 - embeddings - INFO - 正在加载嵌入模型: moka-ai/m3e-base
2025-07-01 02:32:52,679 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: moka-ai/m3e-base
2025-07-01 02:32:57,934 - embeddings - INFO - 模型加载完成，使用设备: cpu
2025-07-01 02:32:57,934 - __main__ - INFO - 系统状态: {'status': '运行中', 'vector_store': {'milvus_connected': True, 'elasticsearch_connected': True, 'milvus_stats': {'row_count': 0}, 'elasticsearch_stats': {'doc_count': 0, 'store_size': 227}}, 'embedding_model': {'status': 'loaded', 'model_name': 'moka-ai/m3e-base', 'device': 'cpu', 'embedding_dim': 768, 'max_seq_length': 512}, 'components': {'document_processor': '正常', 'retriever': '正常', 'matcher': '正常'}}
2025-07-01 02:32:57,934 - __main__ - INFO - 发现政策文档: 北京市产业政策导引.pdf，开始加载...
2025-07-01 02:32:57,934 - policy_matcher - INFO - 开始添加政策文档: 北京市产业政策导引.pdf
2025-07-01 02:32:58,173 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-07-01 02:32:58,173 - jieba - DEBUG - Loading model from cache /var/folders/w7/v83dx60s0wnf6qh99wjhckhc0000gn/T/jieba.cache
2025-07-01 02:32:58,476 - jieba - DEBUG - Loading model cost 0.303 seconds.
2025-07-01 02:32:58,476 - jieba - DEBUG - Prefix dict has been built successfully.
2025-07-01 02:32:58,477 - document_processor - INFO - 开始处理文档: 北京市产业政策导引.pdf
2025-07-01 02:33:08,677 - document_processor - INFO - 文档处理完成: 北京市产业政策导引.pdf, 生成 910 个分块
2025-07-01 02:33:08,678 - embeddings - INFO - 开始编码 910 个文本
2025-07-01 02:34:31,893 - embeddings - INFO - 编码完成，输出形状: (910, 768)
2025-07-01 02:34:31,908 - pymilvus.decorators - ERROR - RPC error: [insert_rows], <DataNotMatchException: (code=1, message=The Input data type is inconsistent with defined schema, {chunk_id} field should be a varchar, but got a {<class 'list'>} instead.)>, <Time:{'RPC start': '2025-07-01 02:34:31.904244', 'RPC error': '2025-07-01 02:34:31.908881'}>
2025-07-01 02:34:31,909 - vector_store - ERROR - 插入数据到Milvus失败: <DataNotMatchException: (code=1, message=The Input data type is inconsistent with defined schema, {chunk_id} field should be a varchar, but got a {<class 'list'>} instead.)>
2025-07-01 02:34:32,022 - elastic_transport.transport - INFO - PUT http://localhost:9200/_bulk [status:200 duration:0.097s]
2025-07-01 02:34:32,025 - vector_store - ERROR - ES批量索引失败: 500 document(s) failed to index.
2025-07-01 02:34:32,025 - vector_store - WARNING - ES存储失败，但Milvus存储成功，系统继续运行
2025-07-01 02:34:32,025 - policy_matcher - ERROR - 政策文档存储失败: 北京市产业政策导引.pdf
2025-07-01 02:34:32,028 - __main__ - WARNING - 政策文档加载失败
2025-07-01 02:34:32,028 - __main__ - INFO - 系统初始化完成
2025-07-01 02:34:32,029 - __main__ - INFO - 开始测试查询...
2025-07-01 02:34:32,029 - __main__ - INFO - 
=== 测试查询 1: 生物医药行业政策查询 ===
2025-07-01 02:34:32,029 - __main__ - INFO - 查询: 我想查找和生物医药相关的政策
2025-07-01 02:34:32,029 - policy_matcher - INFO - 开始政策匹配: 我想查找和生物医药相关的政策
2025-07-01 02:34:32,030 - retriever - INFO - 开始混合检索: 我想查找和生物医药相关的政策
2025-07-01 02:34:32,030 - retriever - INFO - 查询扩展: 我想查找和生物医药相关的政策 -> ['我想查找和生物医药相关的政策', '制药', '医疗', '医疗器械', '医药', '医药健康', '生命科学']
2025-07-01 02:34:32,031 - retriever - INFO - 构建过滤条件: {}
2025-07-01 02:34:32,078 - vector_store - INFO - Milvus搜索返回 0 个结果
2025-07-01 02:34:32,078 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 02:34:32,093 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.015s]
2025-07-01 02:34:32,093 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:34:32,097 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 02:34:32,097 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:34:32,100 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 02:34:32,100 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:34:32,100 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 02:34:32,100 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 02:34:32,100 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 02:34:32,100 - policy_matcher - INFO - 政策匹配完成，耗时: 0.07秒，返回: 0个结果
2025-07-01 02:34:32,100 - __main__ - INFO - 查询结果: 找到 0 个匹配政策
2025-07-01 02:34:32,100 - __main__ - INFO - 处理时间: 0.07秒
2025-07-01 02:34:32,100 - __main__ - INFO - 建议:
2025-07-01 02:34:32,100 - __main__ - INFO -   - 未找到匹配的政策，建议：
2025-07-01 02:34:32,100 - __main__ - INFO -   - 1. 调整查询关键词，使用更通用的表述
2025-07-01 02:34:32,100 - __main__ - INFO -   - 2. 尝试按行业或政策类型分类查询
2025-07-01 02:34:32,100 - __main__ - INFO - 
=== 测试查询 2: 初创企业政策查询 ===
2025-07-01 02:34:32,100 - __main__ - INFO - 查询: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 02:34:32,100 - policy_matcher - INFO - 开始政策匹配: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 02:34:32,100 - retriever - INFO - 开始混合检索: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 02:34:32,100 - retriever - INFO - 查询扩展: 我是一家小型初创企业，现阶段有什么政策比较适用 -> ['我是一家小型初创企业 现阶段有什么政策比较适用', '新成立', '创业', '起步', '小企业', '小微']
2025-07-01 02:34:32,100 - retriever - INFO - 构建过滤条件: {}
2025-07-01 02:34:32,129 - vector_store - INFO - Milvus搜索返回 0 个结果
2025-07-01 02:34:32,129 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 02:34:32,133 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 02:34:32,133 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:34:32,136 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 02:34:32,136 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:34:32,139 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 02:34:32,139 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:34:32,139 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 02:34:32,139 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 02:34:32,139 - retriever - INFO - 企业规模过滤: 0 -> 0
2025-07-01 02:34:32,139 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 02:34:32,139 - policy_matcher - INFO - 政策匹配完成，耗时: 0.04秒，返回: 0个结果
2025-07-01 02:34:32,139 - __main__ - INFO - 查询结果: 找到 0 个匹配政策
2025-07-01 02:34:32,139 - __main__ - INFO - 处理时间: 0.04秒
2025-07-01 02:34:32,139 - __main__ - INFO - 建议:
2025-07-01 02:34:32,139 - __main__ - INFO -   - 未找到匹配的政策，建议：
2025-07-01 02:34:32,139 - __main__ - INFO -   - 1. 调整查询关键词，使用更通用的表述
2025-07-01 02:34:32,139 - __main__ - INFO -   - 2. 尝试按行业或政策类型分类查询
2025-07-01 02:34:32,139 - __main__ - INFO - 
=== 测试查询 3: 创新资金政策查询 ===
2025-07-01 02:34:32,139 - __main__ - INFO - 查询: 有哪些研发创新方面的资金支持政策
2025-07-01 02:34:32,139 - policy_matcher - INFO - 开始政策匹配: 有哪些研发创新方面的资金支持政策
2025-07-01 02:34:32,139 - retriever - INFO - 开始混合检索: 有哪些研发创新方面的资金支持政策
2025-07-01 02:34:32,139 - retriever - INFO - 查询扩展: 有哪些研发创新方面的资金支持政策 -> ['技术', '奖励', '专利', '专项资金', '有哪些研发创新方面的资金支持政策', '补贴', '研发', '科技', '资助']
2025-07-01 02:34:32,139 - retriever - INFO - 构建过滤条件: {}
2025-07-01 02:34:32,171 - vector_store - INFO - Milvus搜索返回 0 个结果
2025-07-01 02:34:32,171 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 02:34:32,174 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 02:34:32,175 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:34:32,177 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 02:34:32,177 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:34:32,179 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 02:34:32,179 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:34:32,179 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 02:34:32,179 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 02:34:32,179 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 02:34:32,179 - policy_matcher - INFO - 政策匹配完成，耗时: 0.04秒，返回: 0个结果
2025-07-01 02:34:32,179 - __main__ - INFO - 查询结果: 找到 0 个匹配政策
2025-07-01 02:34:32,179 - __main__ - INFO - 处理时间: 0.04秒
2025-07-01 02:34:32,179 - __main__ - INFO - 建议:
2025-07-01 02:34:32,179 - __main__ - INFO -   - 未找到匹配的政策，建议：
2025-07-01 02:34:32,179 - __main__ - INFO -   - 1. 调整查询关键词，使用更通用的表述
2025-07-01 02:34:32,179 - __main__ - INFO -   - 2. 尝试按行业或政策类型分类查询
2025-07-01 02:34:32,179 - __main__ - INFO - 启动API服务...
2025-07-01 02:37:36,922 - __main__ - INFO - 启动政策匹配RAG检索系统
2025-07-01 02:37:36,922 - __main__ - INFO - 正在初始化政策匹配系统...
2025-07-01 02:37:37,916 - vector_store - INFO - 已连接到Milvus: localhost:19530
2025-07-01 02:37:37,921 - vector_store - INFO - 加载现有集合: policy_collection
2025-07-01 02:37:37,935 - elastic_transport.transport - INFO - HEAD http://localhost:9200/ [status:200 duration:0.009s]
2025-07-01 02:37:37,935 - vector_store - INFO - 已连接到Elasticsearch: localhost:9200
2025-07-01 02:37:37,946 - elastic_transport.transport - INFO - HEAD http://localhost:9200/policy_index [status:200 duration:0.010s]
2025-07-01 02:37:37,946 - vector_store - INFO - Elasticsearch索引就绪: policy_index
2025-07-01 02:37:37,951 - elastic_transport.transport - INFO - GET http://localhost:9200/policy_index/_stats [status:200 duration:0.004s]
2025-07-01 02:37:40,115 - embeddings - INFO - 正在加载嵌入模型: moka-ai/m3e-base
2025-07-01 02:37:40,115 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: moka-ai/m3e-base
2025-07-01 02:37:45,397 - embeddings - INFO - 模型加载完成，使用设备: cpu
2025-07-01 02:37:45,397 - __main__ - INFO - 系统状态: {'status': '运行中', 'vector_store': {'milvus_connected': True, 'elasticsearch_connected': True, 'milvus_stats': {'row_count': 0}, 'elasticsearch_stats': {'doc_count': 0, 'store_size': 227}}, 'embedding_model': {'status': 'loaded', 'model_name': 'moka-ai/m3e-base', 'device': 'cpu', 'embedding_dim': 768, 'max_seq_length': 512}, 'components': {'document_processor': '正常', 'retriever': '正常', 'matcher': '正常'}}
2025-07-01 02:37:45,397 - __main__ - INFO - 发现政策文档: 北京市产业政策导引.pdf，开始加载...
2025-07-01 02:37:45,397 - policy_matcher - INFO - 开始添加政策文档: 北京市产业政策导引.pdf
2025-07-01 02:37:45,606 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-07-01 02:37:45,607 - jieba - DEBUG - Loading model from cache /var/folders/w7/v83dx60s0wnf6qh99wjhckhc0000gn/T/jieba.cache
2025-07-01 02:37:45,877 - jieba - DEBUG - Loading model cost 0.270 seconds.
2025-07-01 02:37:45,877 - jieba - DEBUG - Prefix dict has been built successfully.
2025-07-01 02:37:45,878 - document_processor - INFO - 开始处理文档: 北京市产业政策导引.pdf
2025-07-01 02:37:56,082 - document_processor - INFO - 文档处理完成: 北京市产业政策导引.pdf, 生成 910 个分块
2025-07-01 02:37:56,083 - embeddings - INFO - 开始编码 910 个文本
2025-07-01 02:39:17,924 - embeddings - INFO - 编码完成，输出形状: (910, 768)
2025-07-01 02:39:17,934 - vector_store - INFO - 准备插入数据: chunks数量=910, embeddings形状=(910, 768)
2025-07-01 02:39:17,934 - vector_store - INFO - chunk_ids类型: <class 'list'>, 样例: ['policy_157f44c2_chunk_0', 'policy_157f44c2_chunk_1']
2025-07-01 02:39:17,934 - vector_store - INFO - embedding_list类型: <class 'list'>, 长度: 910
2025-07-01 02:39:17,938 - pymilvus.decorators - ERROR - RPC error: [insert_rows], <DataNotMatchException: (code=1, message=The Input data type is inconsistent with defined schema, {chunk_id} field should be a varchar, but got a {<class 'list'>} instead.)>, <Time:{'RPC start': '2025-07-01 02:39:17.934494', 'RPC error': '2025-07-01 02:39:17.938553'}>
2025-07-01 02:39:17,938 - vector_store - ERROR - 插入数据到Milvus失败: <DataNotMatchException: (code=1, message=The Input data type is inconsistent with defined schema, {chunk_id} field should be a varchar, but got a {<class 'list'>} instead.)>
2025-07-01 02:39:18,028 - elastic_transport.transport - INFO - PUT http://localhost:9200/_bulk [status:200 duration:0.072s]
2025-07-01 02:39:18,029 - vector_store - ERROR - ES批量索引失败: 500 document(s) failed to index.
2025-07-01 02:39:18,030 - vector_store - WARNING - ES存储失败，但Milvus存储成功，系统继续运行
2025-07-01 02:39:18,030 - policy_matcher - ERROR - 政策文档存储失败: 北京市产业政策导引.pdf
2025-07-01 02:39:18,031 - __main__ - WARNING - 政策文档加载失败
2025-07-01 02:39:18,031 - __main__ - INFO - 系统初始化完成
2025-07-01 02:39:18,031 - __main__ - INFO - 开始测试查询...
2025-07-01 02:39:18,031 - __main__ - INFO - 
=== 测试查询 1: 生物医药行业政策查询 ===
2025-07-01 02:39:18,031 - __main__ - INFO - 查询: 我想查找和生物医药相关的政策
2025-07-01 02:39:18,031 - policy_matcher - INFO - 开始政策匹配: 我想查找和生物医药相关的政策
2025-07-01 02:39:18,032 - retriever - INFO - 开始混合检索: 我想查找和生物医药相关的政策
2025-07-01 02:39:18,032 - retriever - INFO - 查询扩展: 我想查找和生物医药相关的政策 -> ['医疗器械', '医疗', '医药健康', '制药', '生命科学', '医药', '我想查找和生物医药相关的政策']
2025-07-01 02:39:18,033 - retriever - INFO - 构建过滤条件: {}
2025-07-01 02:39:18,069 - vector_store - INFO - Milvus搜索返回 0 个结果
2025-07-01 02:39:18,069 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 02:39:18,076 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.006s]
2025-07-01 02:39:18,076 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:39:18,079 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 02:39:18,079 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:39:18,082 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 02:39:18,082 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:39:18,082 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 02:39:18,083 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 02:39:18,083 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 02:39:18,083 - policy_matcher - INFO - 政策匹配完成，耗时: 0.05秒，返回: 0个结果
2025-07-01 02:39:18,083 - __main__ - INFO - 查询结果: 找到 0 个匹配政策
2025-07-01 02:39:18,083 - __main__ - INFO - 处理时间: 0.05秒
2025-07-01 02:39:18,083 - __main__ - INFO - 建议:
2025-07-01 02:39:18,083 - __main__ - INFO -   - 未找到匹配的政策，建议：
2025-07-01 02:39:18,083 - __main__ - INFO -   - 1. 调整查询关键词，使用更通用的表述
2025-07-01 02:39:18,083 - __main__ - INFO -   - 2. 尝试按行业或政策类型分类查询
2025-07-01 02:39:18,083 - __main__ - INFO - 
=== 测试查询 2: 初创企业政策查询 ===
2025-07-01 02:39:18,083 - __main__ - INFO - 查询: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 02:39:18,083 - policy_matcher - INFO - 开始政策匹配: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 02:39:18,083 - retriever - INFO - 开始混合检索: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 02:39:18,083 - retriever - INFO - 查询扩展: 我是一家小型初创企业，现阶段有什么政策比较适用 -> ['小微', '新成立', '我是一家小型初创企业 现阶段有什么政策比较适用', '小企业', '起步', '创业']
2025-07-01 02:39:18,083 - retriever - INFO - 构建过滤条件: {}
2025-07-01 02:39:18,114 - vector_store - INFO - Milvus搜索返回 0 个结果
2025-07-01 02:39:18,114 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 02:39:18,118 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 02:39:18,118 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:39:18,122 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 02:39:18,122 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:39:18,126 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 02:39:18,126 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:39:18,126 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 02:39:18,126 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 02:39:18,126 - retriever - INFO - 企业规模过滤: 0 -> 0
2025-07-01 02:39:18,126 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 02:39:18,126 - policy_matcher - INFO - 政策匹配完成，耗时: 0.04秒，返回: 0个结果
2025-07-01 02:39:18,126 - __main__ - INFO - 查询结果: 找到 0 个匹配政策
2025-07-01 02:39:18,126 - __main__ - INFO - 处理时间: 0.04秒
2025-07-01 02:39:18,126 - __main__ - INFO - 建议:
2025-07-01 02:39:18,126 - __main__ - INFO -   - 未找到匹配的政策，建议：
2025-07-01 02:39:18,126 - __main__ - INFO -   - 1. 调整查询关键词，使用更通用的表述
2025-07-01 02:39:18,126 - __main__ - INFO -   - 2. 尝试按行业或政策类型分类查询
2025-07-01 02:39:18,126 - __main__ - INFO - 
=== 测试查询 3: 创新资金政策查询 ===
2025-07-01 02:39:18,126 - __main__ - INFO - 查询: 有哪些研发创新方面的资金支持政策
2025-07-01 02:39:18,126 - policy_matcher - INFO - 开始政策匹配: 有哪些研发创新方面的资金支持政策
2025-07-01 02:39:18,126 - retriever - INFO - 开始混合检索: 有哪些研发创新方面的资金支持政策
2025-07-01 02:39:18,126 - retriever - INFO - 查询扩展: 有哪些研发创新方面的资金支持政策 -> ['资助', '专项资金', '专利', '科技', '技术', '奖励', '研发', '补贴', '有哪些研发创新方面的资金支持政策']
2025-07-01 02:39:18,126 - retriever - INFO - 构建过滤条件: {}
2025-07-01 02:39:18,161 - vector_store - INFO - Milvus搜索返回 0 个结果
2025-07-01 02:39:18,161 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 02:39:18,164 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 02:39:18,164 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:39:18,166 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 02:39:18,166 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:39:18,168 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 02:39:18,168 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:39:18,168 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 02:39:18,168 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 02:39:18,169 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 02:39:18,169 - policy_matcher - INFO - 政策匹配完成，耗时: 0.04秒，返回: 0个结果
2025-07-01 02:39:18,169 - __main__ - INFO - 查询结果: 找到 0 个匹配政策
2025-07-01 02:39:18,169 - __main__ - INFO - 处理时间: 0.04秒
2025-07-01 02:39:18,169 - __main__ - INFO - 建议:
2025-07-01 02:39:18,169 - __main__ - INFO -   - 未找到匹配的政策，建议：
2025-07-01 02:39:18,169 - __main__ - INFO -   - 1. 调整查询关键词，使用更通用的表述
2025-07-01 02:39:18,169 - __main__ - INFO -   - 2. 尝试按行业或政策类型分类查询
2025-07-01 02:39:18,169 - __main__ - INFO - 启动API服务...
2025-07-01 02:43:27,934 - __main__ - INFO - 启动政策匹配RAG检索系统
2025-07-01 02:43:27,934 - __main__ - INFO - 正在初始化政策匹配系统...
2025-07-01 02:43:28,678 - vector_store - INFO - 已连接到Milvus: localhost:19530
2025-07-01 02:43:28,684 - vector_store - INFO - 加载现有集合: policy_collection
2025-07-01 02:43:28,701 - elastic_transport.transport - INFO - HEAD http://localhost:9200/ [status:200 duration:0.012s]
2025-07-01 02:43:28,701 - vector_store - INFO - 已连接到Elasticsearch: localhost:9200
2025-07-01 02:43:28,706 - elastic_transport.transport - INFO - HEAD http://localhost:9200/policy_index [status:200 duration:0.005s]
2025-07-01 02:43:28,706 - vector_store - INFO - Elasticsearch索引就绪: policy_index
2025-07-01 02:43:28,711 - elastic_transport.transport - INFO - GET http://localhost:9200/policy_index/_stats [status:200 duration:0.004s]
2025-07-01 02:43:30,647 - embeddings - INFO - 正在加载嵌入模型: moka-ai/m3e-base
2025-07-01 02:43:30,647 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: moka-ai/m3e-base
2025-07-01 02:43:35,837 - embeddings - INFO - 模型加载完成，使用设备: cpu
2025-07-01 02:43:35,838 - __main__ - INFO - 系统状态: {'status': '运行中', 'vector_store': {'milvus_connected': True, 'elasticsearch_connected': True, 'milvus_stats': {'row_count': 0}, 'elasticsearch_stats': {'doc_count': 0, 'store_size': 227}}, 'embedding_model': {'status': 'loaded', 'model_name': 'moka-ai/m3e-base', 'device': 'cpu', 'embedding_dim': 768, 'max_seq_length': 512}, 'components': {'document_processor': '正常', 'retriever': '正常', 'matcher': '正常'}}
2025-07-01 02:43:35,838 - __main__ - INFO - 发现政策文档: 北京市产业政策导引.pdf，开始加载...
2025-07-01 02:43:35,838 - policy_matcher - INFO - 开始添加政策文档: 北京市产业政策导引.pdf
2025-07-01 02:43:36,061 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-07-01 02:43:36,062 - jieba - DEBUG - Loading model from cache /var/folders/w7/v83dx60s0wnf6qh99wjhckhc0000gn/T/jieba.cache
2025-07-01 02:43:36,366 - jieba - DEBUG - Loading model cost 0.305 seconds.
2025-07-01 02:43:36,366 - jieba - DEBUG - Prefix dict has been built successfully.
2025-07-01 02:43:36,367 - document_processor - INFO - 开始处理文档: 北京市产业政策导引.pdf
2025-07-01 02:43:47,057 - document_processor - INFO - 文档处理完成: 北京市产业政策导引.pdf, 生成 910 个分块
2025-07-01 02:43:47,058 - embeddings - INFO - 开始编码 910 个文本
2025-07-01 02:45:10,442 - embeddings - INFO - 编码完成，输出形状: (910, 768)
2025-07-01 02:45:10,453 - vector_store - INFO - 准备插入数据: chunks数量=910, embeddings形状=(910, 768)
2025-07-01 02:45:10,453 - vector_store - INFO - chunk_ids类型: <class 'list'>, 样例: ['policy_157f44c2_chunk_0', 'policy_157f44c2_chunk_1']
2025-07-01 02:45:10,453 - vector_store - INFO - embedding_list类型: <class 'list'>, 长度: 910
2025-07-01 02:45:10,455 - vector_store - INFO - 实体格式样例: ['policy_157f44c2_chunk_0', 'policy_157f44c2', '北京市产业政策导引 \n（市级版）', '开篇', 'text', [-0.009589307941496372, 0.02911415882408619, -0.017605118453502655, 0.04515969753265381, -0.008898379281163216, -0.0004742610326502472, 0.03711366653442383, 0.009216396138072014, -0.028580965474247932, -0.004692758899182081, 0.061252694576978683, 0.004142737481743097, -0.00015245744725689292, -0.03795205056667328, -0.05199399217963219, -0.047508805990219116, 0.03326359763741493, 0.042946770787239075, -0.05036120489239693, -0.0045363628305494785, 0.03374297171831131, -0.013076845556497574, -0.028622999787330627, 0.011045549064874649, -0.008509015664458275, 0.009151282720267773, 0.0024055256508290768, -0.0009728657896630466, -0.033678777515888214, 0.0015214345185086131, 0.03267497941851616, -0.057704951614141464, -0.01816404238343239, 0.001693681930191815, -0.003161015221849084, 0.024775955826044083, -0.013540956191718578, -0.02623024582862854, 0.05934133008122444, 0.029546277597546577, -0.012443392537534237, 0.04352046549320221, -0.0014886443968862295, -0.008488436229526997, -0.008628182113170624, 0.027824610471725464, -0.006604868918657303, -0.00821163970977068, -0.040158990770578384, 0.009263608604669571, -0.007601940538734198, 0.3768092393875122, -0.01491926796734333, 0.005379746202379465, -0.04145354405045509, 0.06345204263925552, -0.03630485385656357, -0.009675629436969757, 0.010845758020877838, 0.039076875895261765, -0.005835541058331728, -0.01878809928894043, 0.0059173936024308205, -0.021044433116912842, 0.026823166757822037, -0.02284947596490383, -0.0548282191157341, -0.035297710448503494, 0.028276700526475906, -0.027777930721640587, 0.022341134026646614, -0.028723761439323425, 0.010176535695791245, -0.001923352712765336, 0.03312109410762787, 0.024043748155236244, 0.011900484561920166, -0.00845291931182146, 0.0014036806533113122, -0.012982417829334736, 0.014434284530580044, 0.0502677857875824, -0.012608615681529045, 0.0030357795767486095, -0.08627171814441681, -0.01438103336840868, -0.0019654601346701384, 0.021047798916697502, 0.013121829368174076, 0.0571318045258522, -0.06971745193004608, -0.053690601140260696, -0.005233254283666611, -0.008413158357143402, -0.02017509937286377, 0.002872430719435215, 0.053301695734262466, -0.05862448364496231, -0.036340124905109406, -0.00010847074736375362, 0.03970731794834137, -0.013180913403630257, -0.010341119952499866, -0.04928994178771973, 0.07712284475564957, 0.014791151508688927, -0.059449516236782074, 0.0129732396453619, 0.019919831305742264, -0.010746200568974018, -0.02472183108329773, -0.03969830274581909, 0.0226453747600317, 0.02169407159090042, -0.04375375062227249, -0.018663236871361732, -0.0026338407769799232, -0.0037480355240404606, 0.027444249019026756, 0.004402159247547388, -0.008972407318651676, 0.039672669023275375, -0.008463398553431034, -0.060849398374557495, 0.024426542222499847, 0.009231614880263805, 0.0036453548818826675, 0.0406363308429718, -0.02083449438214302, 0.036203619092702866, 0.010913846082985401, -0.018755804747343063, 0.011556701734662056, -0.0160507969558239, 0.020260801538825035, 0.003158723935484886, -0.0055779810063540936, -0.041698843240737915, -0.03637868911027908, -0.035921353846788406, 0.06556741893291473, 0.029048891738057137, 0.04013197496533394, -0.051235370337963104, -0.04153929278254509, 0.005427155643701553, 0.008758113719522953, 0.011159452609717846, 0.043652091175317764, -0.040720127522945404, -0.004773605149239302, 0.030425705015659332, 0.038182493299245834, 0.001564845209941268, 0.020213427022099495, 0.030758051201701164, 0.02055022120475769, 0.028158511966466904, -0.07821311801671982, -0.038057200610637665, 0.039441123604774475, -0.003705583279952407, 0.044595569372177124, -0.004892559722065926, 0.019788745790719986, 0.007673455867916346, 0.02045273967087269, -0.07352282106876373, -0.025709766894578934, 0.010276333428919315, 0.010867963545024395, -0.01248021051287651, 0.008558572269976139, -0.019154522567987442, -0.013651279732584953, -0.0453471764922142, -0.019337618723511696, 0.012558511458337307, -0.04601521044969559, -0.030041612684726715, -0.028040865436196327, 0.032115161418914795, 0.020124176517128944, 0.024890819564461708, -0.034578800201416016, 0.03267127275466919, -0.048211950808763504, 0.005665671080350876, 0.05325033888220787, -0.013328064233064651, -0.01906873844563961, -0.010803215205669403, -0.024040287360548973, 0.0011679499875754118, 0.06144373491406441, 0.037063393741846085, -0.02414027974009514, 0.034590207040309906, 0.0002138784620910883, 0.012140613049268723, -0.02405504509806633, -0.05000852793455124, 0.004672967828810215, -0.01480168104171753, 0.006675413344055414, 0.0972711369395256, 0.034512847661972046, 0.06292875111103058, 0.009348156861960888, -0.01494918204843998, -0.06759670376777649, -0.06978300958871841, 0.0232897587120533, 0.05494898930191994, -0.008022705093026161, 0.030105656012892723, -0.09707214683294296, 0.038521941751241684, -0.019789280369877815, 0.04824909195303917, 0.06329125165939331, -0.028315721079707146, -0.01932419277727604, -0.021181587129831314, -0.026322539895772934, -0.01419211458414793, -0.0008855590131133795, 0.03259635716676712, -0.0033729998394846916, 0.021748656406998634, 0.02658071182668209, -0.01077377237379551, 0.02914053201675415, 0.010506127960979939, -0.00022930283739697188, 0.07139137387275696, -0.0288256723433733, 0.015812374651432037, 0.024732865393161774, -0.03838037699460983, -0.016788508743047714, 0.009803450666368008, 0.030756089836359024, -0.000818780914414674, 0.01877676323056221, -0.006893815007060766, -0.02332308515906334, -0.03040100447833538, -0.055977363139390945, -0.05616838485002518, 0.01870473474264145, 0.018247749656438828, 0.0018340129172429442, -0.05407395213842392, -0.023001838475465775, -0.02583295851945877, 0.02642855793237686, 0.04169720411300659, 0.03082786314189434, -0.03451421111822128, 0.005526895169168711, -0.03213411569595337, 0.02497667260468006, 0.0029323389753699303, 0.03324692323803902, -0.011319850571453571, -0.01809949427843094, -0.020266283303499222, -0.029924612492322922, -0.02093447931110859, -0.004756493493914604, 0.06777933239936829, 0.03589344397187233, -0.016932327300310135, 0.020171288400888443, -0.03975522518157959, 0.04156431183218956, -0.008397664874792099, -0.03129595145583153, -0.07036636769771576, 0.05021882429718971, 0.04966488480567932, 0.03049454838037491, -0.028772899881005287, -0.018010294064879417, -0.04312371090054512, 0.0046417745761573315, 0.03925392031669617, -0.019701730459928513, -0.053943932056427, -0.030901964753866196, -0.029882483184337616, 0.01791478507220745, 0.027659915387630463, 0.08985470980405807, -0.05198268964886665, -0.03677350655198097, 0.018498342484235764, -0.03612259402871132, 0.0012379527324810624, 0.05046892166137695, -0.03301394730806351, 0.018706364557147026, 0.01413088757544756, -0.01602291315793991, 0.027428526431322098, 0.026961391791701317, -0.0035943014081567526, 0.017675628885626793, -0.02199414186179638, 0.03260156139731407, -0.023268917575478554, -0.023493386805057526, -0.02067587524652481, -0.0018503885949030519, 0.007983824238181114, -0.03271932154893875, 0.0006211347645148635, -0.01979614980518818, -0.005424872972071171, 0.039955489337444305, -0.010059586726129055, 0.000972070440184325, 0.10771221667528152, 0.06482519954442978, 0.03266149386763573, 0.02456350065767765, 0.00936193484812975, -0.008178982883691788, 0.05346611514687538, 0.028918839991092682, -0.07390716671943665, -0.006112892646342516, 0.028687957674264908, 0.054268978536129, 0.06121604144573212, -0.007828090339899063, -0.03363944590091705, -0.03989904373884201, 0.015971971675753593, -0.007727424614131451, -0.032877519726753235, 0.016885342076420784, -0.010724813677370548, -0.016950199380517006, -0.01989579387009144, -0.00168701377697289, -0.051006659865379333, -0.0014523814897984266, -0.04616301879286766, -0.030870657414197922, 1.5738576621515676e-05, -0.03532016649842262, -0.01884891837835312, -0.014430598355829716, -0.014676989056169987, 0.057766810059547424, 0.006159622687846422, 0.02132817544043064, 0.03129813075065613, -0.016254132613539696, -0.019971000030636787, -0.044640813022851944, 0.02695411629974842, -0.008467409759759903, 0.00490883132442832, 0.030902333557605743, -0.020411167293787003, -0.055149175226688385, -0.02834024652838707, 0.026349080726504326, 0.010783246718347073, 0.05821895971894264, -0.0026978147216141224, 0.03953702002763748, 0.01787497103214264, -0.05887347087264061, -0.00027197625604458153, -0.028730303049087524, -0.02215060405433178, 0.07047837227582932, -0.032375890761613846, -0.00011279471073066816, 0.01315301563590765, -0.0010450751287862659, 0.020898284390568733, -0.013241070322692394, -0.024628158658742905, -0.019909389317035675, -0.05343034118413925, 0.0022840951569378376, -0.017856450751423836, 0.03752543777227402, 0.024396277964115143, -0.004686280619353056, -0.016203105449676514, -0.009482908993959427, 0.03407151252031326, -0.002740207128226757, 0.03272382542490959, 0.02651531621813774, -0.058525729924440384, -0.023655390366911888, -0.011790175922214985, 0.03925531357526779, 0.013866443186998367, 0.04840943589806557, 0.01433261763304472, 0.033368755131959915, -0.017562948167324066, -0.07722582668066025, 0.010781972669064999, -0.01323713455349207, -0.058862410485744476, 0.05883099511265755, -0.043963633477687836, -0.03357572853565216, 0.00797117967158556, 0.033708181232213974, -0.0786106288433075, 0.026821736246347427, 0.022951070219278336, -0.011617700569331646, 0.021849937736988068, 0.03693987429141998, -0.001659695990383625, -0.0061637707985937595, -0.044292062520980835, 0.07012653350830078, 0.013633946888148785, 0.008747246116399765, -0.006612675730139017, 0.013270584866404533, -0.014857371337711811, -0.011432196013629436, 0.0065117403864860535, -0.01404486782848835, 0.01858045533299446, -0.02486853487789631, -0.01836327649652958, -0.024927770718932152, 0.02749050408601761, 0.0044959415681660175, -0.008484087884426117, 0.003905565943568945, 0.00446905056014657, -0.02270268090069294, -0.052917368710041046, -0.010605140589177608, 0.00709659606218338, 0.05721830576658249, 0.05082769691944122, 0.004808859899640083, -0.04757297411561012, 0.017576342448592186, -0.01816967874765396, 0.0019217076478525996, -0.019937697798013687, 0.05922657623887062, -0.023297931998968124, -0.009335382841527462, 0.019768856465816498, -0.02407260239124298, 0.029455088078975677, 0.041888874024152756, 0.03524501621723175, -0.03877586871385574, -0.04179271683096886, 0.06196897104382515, -0.007987288758158684, -0.04283953458070755, 0.06542922556400299, 0.0064946124330163, 0.008456920273602009, -0.02566426247358322, 0.020016202703118324, -0.001562338089570403, -0.0006199604249559343, -0.027312463149428368, -0.04545450210571289, 0.011615592055022717, -0.01337212324142456, 0.020239297300577164, -0.023537753149867058, -0.003997112158685923, -0.004092201124876738, -0.02057114616036415, -0.011246242560446262, 0.00971840787678957, -0.008114401251077652, -0.07252760231494904, -0.016493696719408035, 0.04132617264986038, -0.04882003739476204, -0.0026445596013218164, -0.0009650048450566828, 0.018796775490045547, 0.046294763684272766, -0.059855569154024124, 0.04281643033027649, -0.04874449595808983, 0.0025613352190703154, -0.01081911288201809, -0.0037697977386415005, 0.031707651913166046, -0.021693317219614983, 0.015387540683150291, -0.01732710190117359, -0.015074243769049644, 0.0418533980846405, 0.034862905740737915, 0.005694030784070492, 0.0007337104761973023, 0.03324953466653824, 0.001326580299064517, 0.028315981850028038, -0.030011458322405815, -0.012086973525583744, 0.007019157521426678, 0.012758257798850536, -0.0004404193314258009, -0.03769683092832565, -0.011248038150370121, 0.041032496839761734, -0.019792452454566956, 0.02623436599969864, 0.002371096983551979, -0.03930090367794037, 0.0002622672473080456, 0.04479384422302246, -0.035239823162555695, -0.06436390429735184, -0.005533753894269466, 0.021474644541740417, 0.006803956348448992, 0.033541347831487656, -0.015958765521645546, 0.0075390939600765705, -0.08871641755104065, -0.056117936968803406, 0.009939104318618774, 0.0015055258991196752, 0.05826868116855621, -0.02165314555168152, 0.021653825417160988, -0.057069793343544006, -0.026611806824803352, -0.013909755274653435, 0.06283603608608246, 0.012419736944139004, -0.04626639932394028, 0.01178447250276804, -0.03799920156598091, 0.010784066282212734, -0.02245737984776497, 0.022549331188201904, -0.07572583854198456, -0.017417579889297485, 0.033408280462026596, -0.03186677768826485, 0.02544129081070423, -0.03759037330746651, 0.004175000824034214, -0.035863246768713, -0.004104748833924532, 0.04276532679796219, -0.020994527265429497, 0.017737165093421936, 0.016124460846185684, -0.0408937931060791, -0.02875874936580658, 0.03717256337404251, 0.004172440618276596, 0.021906953305006027, -0.046760935336351395, -0.060809068381786346, -0.014605913311243057, -0.01680750772356987, 0.024257700890302658, 0.03192616254091263, 0.019896337762475014, 0.07277151942253113, -0.03467482328414917, -0.0296962708234787, -0.020838161930441856, -0.04029468074440956, 0.027133222669363022, -0.054488155990839005, 0.020477961748838425, 0.00099698337726295, -0.007412747014313936, -0.0006891798693686724, 0.008630702272057533, 0.07006815820932388, -0.0006025220500305295, 0.006870594806969166, -0.02347354218363762, -0.004952014423906803, -0.012581387534737587, 0.0016122444067150354, -0.003527534892782569, -0.009774364531040192, 0.012716458179056644, 0.0009260065853595734, 0.03004925511777401, 0.011623555794358253, 0.06507840007543564, -0.050444841384887695, 0.008790462277829647, -0.02803892455995083, -0.06705816090106964, 0.02005065605044365, 0.035633061081171036, 0.0002218412992078811, 0.0780092179775238, -0.018138019368052483, -0.023708099499344826, 0.010249351151287556, -0.035801246762275696, -0.0019092432921752334, -0.029957309365272522, -0.007117624394595623, 0.01950136199593544, 0.03664879873394966, -0.020137088373303413, -0.023347266018390656, 0.08971085399389267, 0.00516971480101347, 0.050085872411727905, -0.022632304579019547, -0.005027259234338999, -0.027102002874016762, 0.06915169954299927, 0.0013029997935518622, 0.017689192667603493, 0.009980677627027035, -0.008764904923737049, -0.03800809383392334, -0.029612688347697258, 0.05087962746620178, 0.032240815460681915, -0.009346778504550457, -0.02199050784111023, -0.025282803922891617, 0.014376815408468246, 0.03630366548895836, 0.0656920075416565, -0.014159136451780796, 0.01677713729441166, -0.036684345453977585, 0.04181422293186188, -0.03661084547638893, -0.0009762952686287463, -0.020955290645360947, 0.037498973309993744, -0.021638048812747, 0.0194693636149168, -0.009985314682126045, -0.08341575413942337, -0.0021505558397620916, 0.0004300408763810992, -0.03864736109972, 0.09971991181373596, -0.0420842319726944, -0.0013092535082250834, -0.0484723262488842, 0.019459035247564316, -0.01095435582101345, 0.020641816779971123, 0.07297729700803757, 0.060642678290605545, 0.026820100843906403, 0.010149716399610043, -0.042748551815748215, -0.02918965183198452, -0.034213971346616745, 0.08885794132947922, -0.025734225288033485, 0.02929290570318699, -0.0154344467446208, -0.044630784541368484, 0.03935050219297409, 0.01972702145576477, -0.037364643067121506, -0.016189686954021454, -0.07640594244003296, -0.018994292244315147, 0.018101777881383896, -0.014673523604869843, 0.02799123339354992, -0.010238418355584145, 0.01709965616464615, -0.019193274900317192, 0.04031998664140701, -0.03897527605295181, 0.10559485107660294, -0.054177287966012955, 0.023972777649760246, 0.005270805209875107, -0.04176589474081993, 0.05416272580623627, 0.030821776017546654, -0.025223834440112114, 0.0030505741015076637, 0.016425693407654762, 0.006580985151231289, -0.02823006734251976, -0.009023276157677174, -0.056368544697761536, -0.004875159356743097, -0.02268892526626587, -0.0034240498207509518, 0.03267257660627365, -0.03636043891310692, 0.04608139395713806, -0.04523656144738197, -0.010927774012088776, -0.005379600916057825, 0.03045721910893917, 0.0389670729637146, 0.028936419636011124, -0.029645929113030434, 0.030180001631379128, 0.003528584260493517, -0.017787493765354156, 0.05465669929981232, 0.02838345430791378, 0.06302227824926376, 0.029360666871070862, -0.017426690086722374, 0.0001560311357025057, -0.051588669419288635, -0.002858480205759406, -0.05941910296678543, 0.009235854260623455, 0.01826690323650837, -0.03919863700866699, 0.004400157369673252, -0.007518859580159187, -0.0030373611953109503, -0.06218826398253441, 0.0023394592572003603, 0.06459461897611618, 0.025311214849352837, -0.07068324089050293, -0.07035823166370392, -0.011732452549040318, -0.0036581538151949644, 0.03272993490099907, 0.06999839842319489, -0.013980642892420292, -0.010885556228458881, 0.04285767301917076, 0.012768624350428581, 0.035443015396595, -0.015054207295179367, 0.015541168861091137, -0.01729157753288746, 0.05152300000190735, 0.031376104801893234, -0.055162589997053146, -0.04728157818317413, 0.016747761517763138, -0.011066374368965626, -0.023549759760499, -0.04256664589047432, -0.029114289209246635, -0.007128818891942501]]
2025-07-01 02:45:10,456 - vector_store - ERROR - 插入数据到Milvus失败: <DataNotMatchException: (code=1, message=The data don't match with schema fields, expect 6 list, got 910)>
2025-07-01 02:45:10,530 - elastic_transport.transport - INFO - PUT http://localhost:9200/_bulk [status:200 duration:0.057s]
2025-07-01 02:45:10,532 - vector_store - ERROR - ES批量索引失败: 500 document(s) failed to index.
2025-07-01 02:45:10,532 - vector_store - WARNING - ES存储失败，但Milvus存储成功，系统继续运行
2025-07-01 02:45:10,532 - policy_matcher - ERROR - 政策文档存储失败: 北京市产业政策导引.pdf
2025-07-01 02:45:10,533 - __main__ - WARNING - 政策文档加载失败
2025-07-01 02:45:10,534 - __main__ - INFO - 系统初始化完成
2025-07-01 02:45:10,534 - __main__ - INFO - 开始测试查询...
2025-07-01 02:45:10,534 - __main__ - INFO - 
=== 测试查询 1: 生物医药行业政策查询 ===
2025-07-01 02:45:10,534 - __main__ - INFO - 查询: 我想查找和生物医药相关的政策
2025-07-01 02:45:10,534 - policy_matcher - INFO - 开始政策匹配: 我想查找和生物医药相关的政策
2025-07-01 02:45:10,535 - retriever - INFO - 开始混合检索: 我想查找和生物医药相关的政策
2025-07-01 02:45:10,535 - retriever - INFO - 查询扩展: 我想查找和生物医药相关的政策 -> ['我想查找和生物医药相关的政策', '医疗器械', '医疗', '生命科学', '医药健康', '医药', '制药']
2025-07-01 02:45:10,535 - retriever - INFO - 构建过滤条件: {}
2025-07-01 02:45:10,586 - vector_store - INFO - Milvus搜索返回 0 个结果
2025-07-01 02:45:10,586 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 02:45:10,593 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.007s]
2025-07-01 02:45:10,594 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:45:10,596 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 02:45:10,596 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:45:10,600 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 02:45:10,600 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:45:10,600 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 02:45:10,600 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 02:45:10,600 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 02:45:10,600 - policy_matcher - INFO - 政策匹配完成，耗时: 0.07秒，返回: 0个结果
2025-07-01 02:45:10,600 - __main__ - INFO - 查询结果: 找到 0 个匹配政策
2025-07-01 02:45:10,600 - __main__ - INFO - 处理时间: 0.07秒
2025-07-01 02:45:10,600 - __main__ - INFO - 建议:
2025-07-01 02:45:10,600 - __main__ - INFO -   - 未找到匹配的政策，建议：
2025-07-01 02:45:10,600 - __main__ - INFO -   - 1. 调整查询关键词，使用更通用的表述
2025-07-01 02:45:10,600 - __main__ - INFO -   - 2. 尝试按行业或政策类型分类查询
2025-07-01 02:45:10,600 - __main__ - INFO - 
=== 测试查询 2: 初创企业政策查询 ===
2025-07-01 02:45:10,600 - __main__ - INFO - 查询: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 02:45:10,600 - policy_matcher - INFO - 开始政策匹配: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 02:45:10,600 - retriever - INFO - 开始混合检索: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 02:45:10,600 - retriever - INFO - 查询扩展: 我是一家小型初创企业，现阶段有什么政策比较适用 -> ['我是一家小型初创企业 现阶段有什么政策比较适用', '起步', '创业', '小企业', '新成立', '小微']
2025-07-01 02:45:10,600 - retriever - INFO - 构建过滤条件: {}
2025-07-01 02:45:10,655 - vector_store - INFO - Milvus搜索返回 0 个结果
2025-07-01 02:45:10,655 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 02:45:10,658 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 02:45:10,658 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:45:10,660 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 02:45:10,660 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:45:10,662 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 02:45:10,662 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:45:10,662 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 02:45:10,662 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 02:45:10,662 - retriever - INFO - 企业规模过滤: 0 -> 0
2025-07-01 02:45:10,662 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 02:45:10,663 - policy_matcher - INFO - 政策匹配完成，耗时: 0.06秒，返回: 0个结果
2025-07-01 02:45:10,663 - __main__ - INFO - 查询结果: 找到 0 个匹配政策
2025-07-01 02:45:10,663 - __main__ - INFO - 处理时间: 0.06秒
2025-07-01 02:45:10,663 - __main__ - INFO - 建议:
2025-07-01 02:45:10,663 - __main__ - INFO -   - 未找到匹配的政策，建议：
2025-07-01 02:45:10,663 - __main__ - INFO -   - 1. 调整查询关键词，使用更通用的表述
2025-07-01 02:45:10,663 - __main__ - INFO -   - 2. 尝试按行业或政策类型分类查询
2025-07-01 02:45:10,663 - __main__ - INFO - 
=== 测试查询 3: 创新资金政策查询 ===
2025-07-01 02:45:10,663 - __main__ - INFO - 查询: 有哪些研发创新方面的资金支持政策
2025-07-01 02:45:10,663 - policy_matcher - INFO - 开始政策匹配: 有哪些研发创新方面的资金支持政策
2025-07-01 02:45:10,663 - retriever - INFO - 开始混合检索: 有哪些研发创新方面的资金支持政策
2025-07-01 02:45:10,663 - retriever - INFO - 查询扩展: 有哪些研发创新方面的资金支持政策 -> ['专项资金', '研发', '有哪些研发创新方面的资金支持政策', '科技', '资助', '技术', '奖励', '专利', '补贴']
2025-07-01 02:45:10,663 - retriever - INFO - 构建过滤条件: {}
2025-07-01 02:45:10,709 - vector_store - INFO - Milvus搜索返回 0 个结果
2025-07-01 02:45:10,709 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 02:45:10,712 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 02:45:10,712 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:45:10,715 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 02:45:10,715 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:45:10,717 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 02:45:10,718 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:45:10,718 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 02:45:10,718 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 02:45:10,718 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 02:45:10,718 - policy_matcher - INFO - 政策匹配完成，耗时: 0.05秒，返回: 0个结果
2025-07-01 02:45:10,718 - __main__ - INFO - 查询结果: 找到 0 个匹配政策
2025-07-01 02:45:10,718 - __main__ - INFO - 处理时间: 0.05秒
2025-07-01 02:45:10,718 - __main__ - INFO - 建议:
2025-07-01 02:45:10,718 - __main__ - INFO -   - 未找到匹配的政策，建议：
2025-07-01 02:45:10,718 - __main__ - INFO -   - 1. 调整查询关键词，使用更通用的表述
2025-07-01 02:45:10,718 - __main__ - INFO -   - 2. 尝试按行业或政策类型分类查询
2025-07-01 02:45:10,718 - __main__ - INFO - 启动API服务...
2025-07-01 02:49:49,624 - __main__ - INFO - 启动政策匹配RAG检索系统
2025-07-01 02:49:49,624 - __main__ - INFO - 正在初始化政策匹配系统...
2025-07-01 02:49:50,444 - vector_store - INFO - 已连接到Milvus: localhost:19530
2025-07-01 02:49:50,450 - vector_store - INFO - 加载现有集合: policy_collection
2025-07-01 02:49:50,465 - elastic_transport.transport - INFO - HEAD http://localhost:9200/ [status:200 duration:0.009s]
2025-07-01 02:49:50,465 - vector_store - INFO - 已连接到Elasticsearch: localhost:9200
2025-07-01 02:49:50,473 - elastic_transport.transport - INFO - HEAD http://localhost:9200/policy_index [status:200 duration:0.007s]
2025-07-01 02:49:50,473 - vector_store - INFO - Elasticsearch索引就绪: policy_index
2025-07-01 02:49:50,478 - elastic_transport.transport - INFO - GET http://localhost:9200/policy_index/_stats [status:200 duration:0.004s]
2025-07-01 02:49:52,410 - embeddings - INFO - 正在加载嵌入模型: moka-ai/m3e-base
2025-07-01 02:49:52,410 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: moka-ai/m3e-base
2025-07-01 02:49:57,666 - embeddings - INFO - 模型加载完成，使用设备: cpu
2025-07-01 02:49:57,667 - __main__ - INFO - 系统状态: {'status': '运行中', 'vector_store': {'milvus_connected': True, 'elasticsearch_connected': True, 'milvus_stats': {'row_count': 0}, 'elasticsearch_stats': {'doc_count': 0, 'store_size': 227}}, 'embedding_model': {'status': 'loaded', 'model_name': 'moka-ai/m3e-base', 'device': 'cpu', 'embedding_dim': 768, 'max_seq_length': 512}, 'components': {'document_processor': '正常', 'retriever': '正常', 'matcher': '正常'}}
2025-07-01 02:49:57,667 - __main__ - INFO - 发现政策文档: 北京市产业政策导引.pdf，开始加载...
2025-07-01 02:49:57,667 - policy_matcher - INFO - 开始添加政策文档: 北京市产业政策导引.pdf
2025-07-01 02:49:57,873 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-07-01 02:49:57,873 - jieba - DEBUG - Loading model from cache /var/folders/w7/v83dx60s0wnf6qh99wjhckhc0000gn/T/jieba.cache
2025-07-01 02:49:58,139 - jieba - DEBUG - Loading model cost 0.266 seconds.
2025-07-01 02:49:58,139 - jieba - DEBUG - Prefix dict has been built successfully.
2025-07-01 02:49:58,140 - document_processor - INFO - 开始处理文档: 北京市产业政策导引.pdf
2025-07-01 02:50:08,509 - document_processor - INFO - 文档处理完成: 北京市产业政策导引.pdf, 生成 910 个分块
2025-07-01 02:50:08,510 - embeddings - INFO - 开始编码 910 个文本
2025-07-01 02:51:29,507 - embeddings - INFO - 编码完成，输出形状: (910, 768)
2025-07-01 02:51:29,518 - vector_store - INFO - 准备插入数据: chunks数量=910, embeddings形状=(910, 768)
2025-07-01 02:51:29,518 - vector_store - INFO - chunk_ids类型: <class 'list'>, 样例: ['policy_157f44c2_chunk_0', 'policy_157f44c2_chunk_1']
2025-07-01 02:51:29,518 - vector_store - INFO - embedding_list类型: <class 'list'>, 长度: 910
2025-07-01 02:51:29,526 - pymilvus.decorators - ERROR - RPC error: [insert_rows], <DataNotMatchException: (code=1, message=The Input data type is inconsistent with defined schema, {chunk_id} field should be a varchar, but got a {<class 'list'>} instead.)>, <Time:{'RPC start': '2025-07-01 02:51:29.518867', 'RPC error': '2025-07-01 02:51:29.526276'}>
2025-07-01 02:51:29,526 - vector_store - ERROR - 插入数据到Milvus失败: <DataNotMatchException: (code=1, message=The Input data type is inconsistent with defined schema, {chunk_id} field should be a varchar, but got a {<class 'list'>} instead.)>
2025-07-01 02:51:29,598 - elastic_transport.transport - INFO - PUT http://localhost:9200/_bulk [status:200 duration:0.053s]
2025-07-01 02:51:29,600 - vector_store - ERROR - ES批量索引失败: 500 document(s) failed to index.
2025-07-01 02:51:29,600 - vector_store - WARNING - ES存储失败，但Milvus存储成功，系统继续运行
2025-07-01 02:51:29,600 - policy_matcher - ERROR - 政策文档存储失败: 北京市产业政策导引.pdf
2025-07-01 02:51:29,601 - __main__ - WARNING - 政策文档加载失败
2025-07-01 02:51:29,601 - __main__ - INFO - 系统初始化完成
2025-07-01 02:51:29,602 - __main__ - INFO - 开始测试查询...
2025-07-01 02:51:29,602 - __main__ - INFO - 
=== 测试查询 1: 生物医药行业政策查询 ===
2025-07-01 02:51:29,602 - __main__ - INFO - 查询: 我想查找和生物医药相关的政策
2025-07-01 02:51:29,602 - policy_matcher - INFO - 开始政策匹配: 我想查找和生物医药相关的政策
2025-07-01 02:51:29,603 - retriever - INFO - 开始混合检索: 我想查找和生物医药相关的政策
2025-07-01 02:51:29,604 - retriever - INFO - 查询扩展: 我想查找和生物医药相关的政策 -> ['医药', '制药', '医药健康', '医疗', '医疗器械', '我想查找和生物医药相关的政策', '生命科学']
2025-07-01 02:51:29,604 - retriever - INFO - 构建过滤条件: {}
2025-07-01 02:51:29,659 - vector_store - INFO - Milvus搜索返回 0 个结果
2025-07-01 02:51:29,659 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 02:51:29,666 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.007s]
2025-07-01 02:51:29,666 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:51:29,668 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 02:51:29,668 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:51:29,670 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 02:51:29,670 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:51:29,671 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 02:51:29,671 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 02:51:29,671 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 02:51:29,671 - policy_matcher - INFO - 政策匹配完成，耗时: 0.07秒，返回: 0个结果
2025-07-01 02:51:29,671 - __main__ - INFO - 查询结果: 找到 0 个匹配政策
2025-07-01 02:51:29,671 - __main__ - INFO - 处理时间: 0.07秒
2025-07-01 02:51:29,671 - __main__ - INFO - 建议:
2025-07-01 02:51:29,671 - __main__ - INFO -   - 未找到匹配的政策，建议：
2025-07-01 02:51:29,671 - __main__ - INFO -   - 1. 调整查询关键词，使用更通用的表述
2025-07-01 02:51:29,671 - __main__ - INFO -   - 2. 尝试按行业或政策类型分类查询
2025-07-01 02:51:29,671 - __main__ - INFO - 
=== 测试查询 2: 初创企业政策查询 ===
2025-07-01 02:51:29,671 - __main__ - INFO - 查询: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 02:51:29,671 - policy_matcher - INFO - 开始政策匹配: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 02:51:29,671 - retriever - INFO - 开始混合检索: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 02:51:29,671 - retriever - INFO - 查询扩展: 我是一家小型初创企业，现阶段有什么政策比较适用 -> ['新成立', '我是一家小型初创企业 现阶段有什么政策比较适用', '起步', '小企业', '创业', '小微']
2025-07-01 02:51:29,671 - retriever - INFO - 构建过滤条件: {}
2025-07-01 02:51:29,714 - vector_store - INFO - Milvus搜索返回 0 个结果
2025-07-01 02:51:29,714 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 02:51:29,717 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 02:51:29,717 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:51:29,719 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 02:51:29,720 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:51:29,724 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.005s]
2025-07-01 02:51:29,725 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:51:29,725 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 02:51:29,725 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 02:51:29,725 - retriever - INFO - 企业规模过滤: 0 -> 0
2025-07-01 02:51:29,725 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 02:51:29,725 - policy_matcher - INFO - 政策匹配完成，耗时: 0.05秒，返回: 0个结果
2025-07-01 02:51:29,725 - __main__ - INFO - 查询结果: 找到 0 个匹配政策
2025-07-01 02:51:29,725 - __main__ - INFO - 处理时间: 0.05秒
2025-07-01 02:51:29,725 - __main__ - INFO - 建议:
2025-07-01 02:51:29,725 - __main__ - INFO -   - 未找到匹配的政策，建议：
2025-07-01 02:51:29,725 - __main__ - INFO -   - 1. 调整查询关键词，使用更通用的表述
2025-07-01 02:51:29,725 - __main__ - INFO -   - 2. 尝试按行业或政策类型分类查询
2025-07-01 02:51:29,725 - __main__ - INFO - 
=== 测试查询 3: 创新资金政策查询 ===
2025-07-01 02:51:29,725 - __main__ - INFO - 查询: 有哪些研发创新方面的资金支持政策
2025-07-01 02:51:29,725 - policy_matcher - INFO - 开始政策匹配: 有哪些研发创新方面的资金支持政策
2025-07-01 02:51:29,725 - retriever - INFO - 开始混合检索: 有哪些研发创新方面的资金支持政策
2025-07-01 02:51:29,726 - retriever - INFO - 查询扩展: 有哪些研发创新方面的资金支持政策 -> ['有哪些研发创新方面的资金支持政策', '奖励', '研发', '科技', '专利', '补贴', '专项资金', '资助', '技术']
2025-07-01 02:51:29,726 - retriever - INFO - 构建过滤条件: {}
2025-07-01 02:51:29,771 - vector_store - INFO - Milvus搜索返回 0 个结果
2025-07-01 02:51:29,771 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 02:51:29,774 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 02:51:29,774 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:51:29,776 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 02:51:29,776 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:51:29,778 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 02:51:29,779 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:51:29,779 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 02:51:29,779 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 02:51:29,779 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 02:51:29,779 - policy_matcher - INFO - 政策匹配完成，耗时: 0.05秒，返回: 0个结果
2025-07-01 02:51:29,779 - __main__ - INFO - 查询结果: 找到 0 个匹配政策
2025-07-01 02:51:29,779 - __main__ - INFO - 处理时间: 0.05秒
2025-07-01 02:51:29,779 - __main__ - INFO - 建议:
2025-07-01 02:51:29,779 - __main__ - INFO -   - 未找到匹配的政策，建议：
2025-07-01 02:51:29,779 - __main__ - INFO -   - 1. 调整查询关键词，使用更通用的表述
2025-07-01 02:51:29,779 - __main__ - INFO -   - 2. 尝试按行业或政策类型分类查询
2025-07-01 02:51:29,779 - __main__ - INFO - 启动API服务...
2025-07-01 02:54:26,878 - __main__ - INFO - 启动政策匹配RAG检索系统
2025-07-01 02:54:26,878 - __main__ - INFO - 正在初始化政策匹配系统...
2025-07-01 02:54:27,757 - vector_store - INFO - 已连接到Milvus: localhost:19530
2025-07-01 02:54:28,322 - vector_store - INFO - 创建新集合: policy_collection
2025-07-01 02:54:31,068 - elastic_transport.transport - INFO - HEAD http://localhost:9200/ [status:200 duration:0.028s]
2025-07-01 02:54:31,068 - vector_store - INFO - 已连接到Elasticsearch: localhost:9200
2025-07-01 02:54:31,078 - elastic_transport.transport - INFO - HEAD http://localhost:9200/policy_index [status:200 duration:0.010s]
2025-07-01 02:54:31,078 - vector_store - INFO - Elasticsearch索引就绪: policy_index
2025-07-01 02:54:31,090 - elastic_transport.transport - INFO - GET http://localhost:9200/policy_index/_stats [status:200 duration:0.009s]
2025-07-01 02:54:33,467 - embeddings - INFO - 正在加载嵌入模型: moka-ai/m3e-base
2025-07-01 02:54:33,467 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: moka-ai/m3e-base
2025-07-01 02:54:38,187 - embeddings - INFO - 模型加载完成，使用设备: cpu
2025-07-01 02:54:38,188 - __main__ - INFO - 系统状态: {'status': '运行中', 'vector_store': {'milvus_connected': True, 'elasticsearch_connected': True, 'milvus_stats': {'row_count': 0}, 'elasticsearch_stats': {'doc_count': 0, 'store_size': 227}}, 'embedding_model': {'status': 'loaded', 'model_name': 'moka-ai/m3e-base', 'device': 'cpu', 'embedding_dim': 768, 'max_seq_length': 512}, 'components': {'document_processor': '正常', 'retriever': '正常', 'matcher': '正常'}}
2025-07-01 02:54:38,188 - __main__ - INFO - 发现政策文档: 北京市产业政策导引.pdf，开始加载...
2025-07-01 02:54:38,188 - policy_matcher - INFO - 开始添加政策文档: 北京市产业政策导引.pdf
2025-07-01 02:54:38,428 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-07-01 02:54:38,429 - jieba - DEBUG - Loading model from cache /var/folders/w7/v83dx60s0wnf6qh99wjhckhc0000gn/T/jieba.cache
2025-07-01 02:54:38,705 - jieba - DEBUG - Loading model cost 0.277 seconds.
2025-07-01 02:54:38,706 - jieba - DEBUG - Prefix dict has been built successfully.
2025-07-01 02:54:38,706 - document_processor - INFO - 开始处理文档: 北京市产业政策导引.pdf
2025-07-01 02:54:49,709 - document_processor - INFO - 文档处理完成: 北京市产业政策导引.pdf, 生成 910 个分块
2025-07-01 02:54:49,710 - embeddings - INFO - 开始编码 910 个文本
2025-07-01 02:56:12,505 - embeddings - INFO - 编码完成，输出形状: (910, 768)
2025-07-01 02:56:12,516 - vector_store - INFO - 准备插入数据: chunks数量=910, embeddings形状=(910, 768)
2025-07-01 02:56:12,517 - vector_store - INFO - chunk_ids类型: <class 'list'>, 样例: ['policy_157f44c2_chunk_0', 'policy_157f44c2_chunk_1']
2025-07-01 02:56:12,517 - vector_store - INFO - embedding_list类型: <class 'list'>, 长度: 910
2025-07-01 02:56:12,522 - pymilvus.decorators - ERROR - RPC error: [insert_rows], <DataNotMatchException: (code=1, message=The Input data type is inconsistent with defined schema, {chunk_id} field should be a varchar, but got a {<class 'list'>} instead.)>, <Time:{'RPC start': '2025-07-01 02:56:12.517252', 'RPC error': '2025-07-01 02:56:12.522395'}>
2025-07-01 02:56:12,522 - vector_store - ERROR - 插入数据到Milvus失败: <DataNotMatchException: (code=1, message=The Input data type is inconsistent with defined schema, {chunk_id} field should be a varchar, but got a {<class 'list'>} instead.)>
2025-07-01 02:56:12,598 - elastic_transport.transport - INFO - PUT http://localhost:9200/_bulk [status:200 duration:0.057s]
2025-07-01 02:56:12,600 - vector_store - ERROR - ES批量索引失败: 500 document(s) failed to index.
2025-07-01 02:56:12,601 - vector_store - WARNING - ES存储失败，但Milvus存储成功，系统继续运行
2025-07-01 02:56:12,601 - policy_matcher - ERROR - 政策文档存储失败: 北京市产业政策导引.pdf
2025-07-01 02:56:12,602 - __main__ - WARNING - 政策文档加载失败
2025-07-01 02:56:12,602 - __main__ - INFO - 系统初始化完成
2025-07-01 02:56:12,603 - __main__ - INFO - 开始测试查询...
2025-07-01 02:56:12,603 - __main__ - INFO - 
=== 测试查询 1: 生物医药行业政策查询 ===
2025-07-01 02:56:12,603 - __main__ - INFO - 查询: 我想查找和生物医药相关的政策
2025-07-01 02:56:12,603 - policy_matcher - INFO - 开始政策匹配: 我想查找和生物医药相关的政策
2025-07-01 02:56:12,604 - retriever - INFO - 开始混合检索: 我想查找和生物医药相关的政策
2025-07-01 02:56:12,604 - retriever - INFO - 查询扩展: 我想查找和生物医药相关的政策 -> ['制药', '医疗器械', '医药', '医疗', '医药健康', '生命科学', '我想查找和生物医药相关的政策']
2025-07-01 02:56:12,604 - retriever - INFO - 构建过滤条件: {}
2025-07-01 02:56:12,655 - vector_store - INFO - Milvus搜索返回 0 个结果
2025-07-01 02:56:12,655 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 02:56:12,662 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.007s]
2025-07-01 02:56:12,662 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:56:12,665 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 02:56:12,665 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:56:12,668 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 02:56:12,668 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:56:12,668 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 02:56:12,668 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 02:56:12,668 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 02:56:12,668 - policy_matcher - INFO - 政策匹配完成，耗时: 0.07秒，返回: 0个结果
2025-07-01 02:56:12,668 - __main__ - INFO - 查询结果: 找到 0 个匹配政策
2025-07-01 02:56:12,668 - __main__ - INFO - 处理时间: 0.07秒
2025-07-01 02:56:12,668 - __main__ - INFO - 建议:
2025-07-01 02:56:12,668 - __main__ - INFO -   - 未找到匹配的政策，建议：
2025-07-01 02:56:12,668 - __main__ - INFO -   - 1. 调整查询关键词，使用更通用的表述
2025-07-01 02:56:12,668 - __main__ - INFO -   - 2. 尝试按行业或政策类型分类查询
2025-07-01 02:56:12,668 - __main__ - INFO - 
=== 测试查询 2: 初创企业政策查询 ===
2025-07-01 02:56:12,668 - __main__ - INFO - 查询: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 02:56:12,668 - policy_matcher - INFO - 开始政策匹配: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 02:56:12,668 - retriever - INFO - 开始混合检索: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 02:56:12,668 - retriever - INFO - 查询扩展: 我是一家小型初创企业，现阶段有什么政策比较适用 -> ['我是一家小型初创企业 现阶段有什么政策比较适用', '新成立', '创业', '起步', '小企业', '小微']
2025-07-01 02:56:12,668 - retriever - INFO - 构建过滤条件: {}
2025-07-01 02:56:12,712 - vector_store - INFO - Milvus搜索返回 0 个结果
2025-07-01 02:56:12,712 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 02:56:12,714 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 02:56:12,715 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:56:12,717 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 02:56:12,717 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:56:12,719 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 02:56:12,719 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:56:12,719 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 02:56:12,719 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 02:56:12,719 - retriever - INFO - 企业规模过滤: 0 -> 0
2025-07-01 02:56:12,719 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 02:56:12,719 - policy_matcher - INFO - 政策匹配完成，耗时: 0.05秒，返回: 0个结果
2025-07-01 02:56:12,719 - __main__ - INFO - 查询结果: 找到 0 个匹配政策
2025-07-01 02:56:12,719 - __main__ - INFO - 处理时间: 0.05秒
2025-07-01 02:56:12,719 - __main__ - INFO - 建议:
2025-07-01 02:56:12,719 - __main__ - INFO -   - 未找到匹配的政策，建议：
2025-07-01 02:56:12,719 - __main__ - INFO -   - 1. 调整查询关键词，使用更通用的表述
2025-07-01 02:56:12,719 - __main__ - INFO -   - 2. 尝试按行业或政策类型分类查询
2025-07-01 02:56:12,719 - __main__ - INFO - 
=== 测试查询 3: 创新资金政策查询 ===
2025-07-01 02:56:12,719 - __main__ - INFO - 查询: 有哪些研发创新方面的资金支持政策
2025-07-01 02:56:12,719 - policy_matcher - INFO - 开始政策匹配: 有哪些研发创新方面的资金支持政策
2025-07-01 02:56:12,720 - retriever - INFO - 开始混合检索: 有哪些研发创新方面的资金支持政策
2025-07-01 02:56:12,720 - retriever - INFO - 查询扩展: 有哪些研发创新方面的资金支持政策 -> ['有哪些研发创新方面的资金支持政策', '专项资金', '专利', '科技', '研发', '补贴', '资助', '技术', '奖励']
2025-07-01 02:56:12,720 - retriever - INFO - 构建过滤条件: {}
2025-07-01 02:56:12,764 - vector_store - INFO - Milvus搜索返回 0 个结果
2025-07-01 02:56:12,764 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 02:56:12,767 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 02:56:12,767 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:56:12,769 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 02:56:12,769 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:56:12,771 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 02:56:12,771 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 02:56:12,771 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 02:56:12,771 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 02:56:12,771 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 02:56:12,771 - policy_matcher - INFO - 政策匹配完成，耗时: 0.05秒，返回: 0个结果
2025-07-01 02:56:12,771 - __main__ - INFO - 查询结果: 找到 0 个匹配政策
2025-07-01 02:56:12,771 - __main__ - INFO - 处理时间: 0.05秒
2025-07-01 02:56:12,771 - __main__ - INFO - 建议:
2025-07-01 02:56:12,771 - __main__ - INFO -   - 未找到匹配的政策，建议：
2025-07-01 02:56:12,771 - __main__ - INFO -   - 1. 调整查询关键词，使用更通用的表述
2025-07-01 02:56:12,772 - __main__ - INFO -   - 2. 尝试按行业或政策类型分类查询
2025-07-01 02:56:12,772 - __main__ - INFO - 启动API服务...
2025-07-01 03:05:39,912 - __main__ - INFO - 启动政策匹配RAG检索系统
2025-07-01 03:05:39,912 - __main__ - INFO - 正在初始化政策匹配系统...
2025-07-01 03:05:40,840 - vector_store - INFO - 已连接到Milvus: localhost:19530
2025-07-01 03:05:40,845 - vector_store - INFO - 加载现有集合: policy_collection
2025-07-01 03:05:40,870 - elastic_transport.transport - INFO - HEAD http://localhost:9200/ [status:200 duration:0.014s]
2025-07-01 03:05:40,870 - vector_store - INFO - 已连接到Elasticsearch: localhost:9200
2025-07-01 03:05:40,880 - elastic_transport.transport - INFO - HEAD http://localhost:9200/policy_index [status:200 duration:0.010s]
2025-07-01 03:05:40,880 - vector_store - INFO - Elasticsearch索引就绪: policy_index
2025-07-01 03:05:40,888 - elastic_transport.transport - INFO - GET http://localhost:9200/policy_index/_stats [status:200 duration:0.006s]
2025-07-01 03:05:43,122 - embeddings - INFO - 正在加载嵌入模型: moka-ai/m3e-base
2025-07-01 03:05:43,122 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: moka-ai/m3e-base
2025-07-01 03:05:51,023 - embeddings - INFO - 模型加载完成，使用设备: cpu
2025-07-01 03:05:51,023 - __main__ - INFO - 系统状态: {'status': '运行中', 'vector_store': {'milvus_connected': True, 'elasticsearch_connected': True, 'milvus_stats': {'row_count': 0}, 'elasticsearch_stats': {'doc_count': 0, 'store_size': 227}}, 'embedding_model': {'status': 'loaded', 'model_name': 'moka-ai/m3e-base', 'device': 'cpu', 'embedding_dim': 768, 'max_seq_length': 512}, 'components': {'document_processor': '正常', 'retriever': '正常', 'matcher': '正常'}}
2025-07-01 03:05:51,024 - __main__ - INFO - 发现政策文档: 北京市产业政策导引.pdf，开始加载...
2025-07-01 03:05:51,024 - policy_matcher - INFO - 开始添加政策文档: 北京市产业政策导引.pdf
2025-07-01 03:05:51,275 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-07-01 03:05:51,276 - jieba - DEBUG - Loading model from cache /var/folders/w7/v83dx60s0wnf6qh99wjhckhc0000gn/T/jieba.cache
2025-07-01 03:05:51,536 - jieba - DEBUG - Loading model cost 0.261 seconds.
2025-07-01 03:05:51,536 - jieba - DEBUG - Prefix dict has been built successfully.
2025-07-01 03:05:51,537 - document_processor - INFO - 开始处理文档: 北京市产业政策导引.pdf
2025-07-01 03:06:01,759 - document_processor - INFO - 文档处理完成: 北京市产业政策导引.pdf, 生成 910 个分块
2025-07-01 03:06:01,760 - embeddings - INFO - 开始编码 910 个文本
2025-07-01 03:07:22,436 - embeddings - INFO - 编码完成，输出形状: (910, 768)
2025-07-01 03:07:22,451 - vector_store - INFO - 准备插入数据: chunks数量=910, embeddings形状=(910, 768)
2025-07-01 03:07:22,451 - vector_store - INFO - chunk_ids类型: <class 'list'>, 样例: ['policy_157f44c2_chunk_0', 'policy_157f44c2_chunk_1']
2025-07-01 03:07:22,451 - vector_store - INFO - embedding_list类型: <class 'list'>, 长度: 910
2025-07-01 03:07:22,452 - vector_store - INFO - 验证字段 chunk_id (Milvus类型: 21) - 样例值: policy_157f44c2_chunk_0 - Python类型: <class 'str'>
2025-07-01 03:07:22,452 - vector_store - INFO - 验证字段 policy_id (Milvus类型: 21) - 样例值: policy_157f44c2 - Python类型: <class 'str'>
2025-07-01 03:07:22,452 - vector_store - INFO - 验证字段 content (Milvus类型: 21) - 样例值: 北京市产业政策导引 
（市级版） - Python类型: <class 'str'>
2025-07-01 03:07:22,452 - vector_store - INFO - 验证字段 section (Milvus类型: 21) - 样例值: 开篇 - Python类型: <class 'str'>
2025-07-01 03:07:22,452 - vector_store - INFO - 验证字段 chunk_type (Milvus类型: 21) - 样例值: text - Python类型: <class 'str'>
2025-07-01 03:07:22,452 - vector_store - INFO - 验证字段 embedding (Milvus类型: 101) - 样例值: [-0.009589307941496372, 0.02911415882408619, -0.017605118453502655, 0.04515969753265381, -0.008898379281163216, -0.0004742610326502472, 0.03711366653442383, 0.009216396138072014, -0.028580965474247932, -0.004692758899182081, 0.061252694576978683, 0.004142737481743097, -0.00015245744725689292, -0.03795205056667328, -0.05199399217963219, -0.047508805990219116, 0.03326359763741493, 0.042946770787239075, -0.05036120489239693, -0.0045363628305494785, 0.03374297171831131, -0.013076845556497574, -0.028622999787330627, 0.011045549064874649, -0.008509015664458275, 0.009151282720267773, 0.0024055256508290768, -0.0009728657896630466, -0.033678777515888214, 0.0015214345185086131, 0.03267497941851616, -0.057704951614141464, -0.01816404238343239, 0.001693681930191815, -0.003161015221849084, 0.024775955826044083, -0.013540956191718578, -0.02623024582862854, 0.05934133008122444, 0.029546277597546577, -0.012443392537534237, 0.04352046549320221, -0.0014886443968862295, -0.008488436229526997, -0.008628182113170624, 0.027824610471725464, -0.006604868918657303, -0.00821163970977068, -0.040158990770578384, 0.009263608604669571, -0.007601940538734198, 0.3768092393875122, -0.01491926796734333, 0.005379746202379465, -0.04145354405045509, 0.06345204263925552, -0.03630485385656357, -0.009675629436969757, 0.010845758020877838, 0.039076875895261765, -0.005835541058331728, -0.01878809928894043, 0.0059173936024308205, -0.021044433116912842, 0.026823166757822037, -0.02284947596490383, -0.0548282191157341, -0.035297710448503494, 0.028276700526475906, -0.027777930721640587, 0.022341134026646614, -0.028723761439323425, 0.010176535695791245, -0.001923352712765336, 0.03312109410762787, 0.024043748155236244, 0.011900484561920166, -0.00845291931182146, 0.0014036806533113122, -0.012982417829334736, 0.014434284530580044, 0.0502677857875824, -0.012608615681529045, 0.0030357795767486095, -0.08627171814441681, -0.01438103336840868, -0.0019654601346701384, 0.021047798916697502, 0.013121829368174076, 0.0571318045258522, -0.06971745193004608, -0.053690601140260696, -0.005233254283666611, -0.008413158357143402, -0.02017509937286377, 0.002872430719435215, 0.053301695734262466, -0.05862448364496231, -0.036340124905109406, -0.00010847074736375362, 0.03970731794834137, -0.013180913403630257, -0.010341119952499866, -0.04928994178771973, 0.07712284475564957, 0.014791151508688927, -0.059449516236782074, 0.0129732396453619, 0.019919831305742264, -0.010746200568974018, -0.02472183108329773, -0.03969830274581909, 0.0226453747600317, 0.02169407159090042, -0.04375375062227249, -0.018663236871361732, -0.0026338407769799232, -0.0037480355240404606, 0.027444249019026756, 0.004402159247547388, -0.008972407318651676, 0.039672669023275375, -0.008463398553431034, -0.060849398374557495, 0.024426542222499847, 0.009231614880263805, 0.0036453548818826675, 0.0406363308429718, -0.02083449438214302, 0.036203619092702866, 0.010913846082985401, -0.018755804747343063, 0.011556701734662056, -0.0160507969558239, 0.020260801538825035, 0.003158723935484886, -0.0055779810063540936, -0.041698843240737915, -0.03637868911027908, -0.035921353846788406, 0.06556741893291473, 0.029048891738057137, 0.04013197496533394, -0.051235370337963104, -0.04153929278254509, 0.005427155643701553, 0.008758113719522953, 0.011159452609717846, 0.043652091175317764, -0.040720127522945404, -0.004773605149239302, 0.030425705015659332, 0.038182493299245834, 0.001564845209941268, 0.020213427022099495, 0.030758051201701164, 0.02055022120475769, 0.028158511966466904, -0.07821311801671982, -0.038057200610637665, 0.039441123604774475, -0.003705583279952407, 0.044595569372177124, -0.004892559722065926, 0.019788745790719986, 0.007673455867916346, 0.02045273967087269, -0.07352282106876373, -0.025709766894578934, 0.010276333428919315, 0.010867963545024395, -0.01248021051287651, 0.008558572269976139, -0.019154522567987442, -0.013651279732584953, -0.0453471764922142, -0.019337618723511696, 0.012558511458337307, -0.04601521044969559, -0.030041612684726715, -0.028040865436196327, 0.032115161418914795, 0.020124176517128944, 0.024890819564461708, -0.034578800201416016, 0.03267127275466919, -0.048211950808763504, 0.005665671080350876, 0.05325033888220787, -0.013328064233064651, -0.01906873844563961, -0.010803215205669403, -0.024040287360548973, 0.0011679499875754118, 0.06144373491406441, 0.037063393741846085, -0.02414027974009514, 0.034590207040309906, 0.0002138784620910883, 0.012140613049268723, -0.02405504509806633, -0.05000852793455124, 0.004672967828810215, -0.01480168104171753, 0.006675413344055414, 0.0972711369395256, 0.034512847661972046, 0.06292875111103058, 0.009348156861960888, -0.01494918204843998, -0.06759670376777649, -0.06978300958871841, 0.0232897587120533, 0.05494898930191994, -0.008022705093026161, 0.030105656012892723, -0.09707214683294296, 0.038521941751241684, -0.019789280369877815, 0.04824909195303917, 0.06329125165939331, -0.028315721079707146, -0.01932419277727604, -0.021181587129831314, -0.026322539895772934, -0.01419211458414793, -0.0008855590131133795, 0.03259635716676712, -0.0033729998394846916, 0.021748656406998634, 0.02658071182668209, -0.01077377237379551, 0.02914053201675415, 0.010506127960979939, -0.00022930283739697188, 0.07139137387275696, -0.0288256723433733, 0.015812374651432037, 0.024732865393161774, -0.03838037699460983, -0.016788508743047714, 0.009803450666368008, 0.030756089836359024, -0.000818780914414674, 0.01877676323056221, -0.006893815007060766, -0.02332308515906334, -0.03040100447833538, -0.055977363139390945, -0.05616838485002518, 0.01870473474264145, 0.018247749656438828, 0.0018340129172429442, -0.05407395213842392, -0.023001838475465775, -0.02583295851945877, 0.02642855793237686, 0.04169720411300659, 0.03082786314189434, -0.03451421111822128, 0.005526895169168711, -0.03213411569595337, 0.02497667260468006, 0.0029323389753699303, 0.03324692323803902, -0.011319850571453571, -0.01809949427843094, -0.020266283303499222, -0.029924612492322922, -0.02093447931110859, -0.004756493493914604, 0.06777933239936829, 0.03589344397187233, -0.016932327300310135, 0.020171288400888443, -0.03975522518157959, 0.04156431183218956, -0.008397664874792099, -0.03129595145583153, -0.07036636769771576, 0.05021882429718971, 0.04966488480567932, 0.03049454838037491, -0.028772899881005287, -0.018010294064879417, -0.04312371090054512, 0.0046417745761573315, 0.03925392031669617, -0.019701730459928513, -0.053943932056427, -0.030901964753866196, -0.029882483184337616, 0.01791478507220745, 0.027659915387630463, 0.08985470980405807, -0.05198268964886665, -0.03677350655198097, 0.018498342484235764, -0.03612259402871132, 0.0012379527324810624, 0.05046892166137695, -0.03301394730806351, 0.018706364557147026, 0.01413088757544756, -0.01602291315793991, 0.027428526431322098, 0.026961391791701317, -0.0035943014081567526, 0.017675628885626793, -0.02199414186179638, 0.03260156139731407, -0.023268917575478554, -0.023493386805057526, -0.02067587524652481, -0.0018503885949030519, 0.007983824238181114, -0.03271932154893875, 0.0006211347645148635, -0.01979614980518818, -0.005424872972071171, 0.039955489337444305, -0.010059586726129055, 0.000972070440184325, 0.10771221667528152, 0.06482519954442978, 0.03266149386763573, 0.02456350065767765, 0.00936193484812975, -0.008178982883691788, 0.05346611514687538, 0.028918839991092682, -0.07390716671943665, -0.006112892646342516, 0.028687957674264908, 0.054268978536129, 0.06121604144573212, -0.007828090339899063, -0.03363944590091705, -0.03989904373884201, 0.015971971675753593, -0.007727424614131451, -0.032877519726753235, 0.016885342076420784, -0.010724813677370548, -0.016950199380517006, -0.01989579387009144, -0.00168701377697289, -0.051006659865379333, -0.0014523814897984266, -0.04616301879286766, -0.030870657414197922, 1.5738576621515676e-05, -0.03532016649842262, -0.01884891837835312, -0.014430598355829716, -0.014676989056169987, 0.057766810059547424, 0.006159622687846422, 0.02132817544043064, 0.03129813075065613, -0.016254132613539696, -0.019971000030636787, -0.044640813022851944, 0.02695411629974842, -0.008467409759759903, 0.00490883132442832, 0.030902333557605743, -0.020411167293787003, -0.055149175226688385, -0.02834024652838707, 0.026349080726504326, 0.010783246718347073, 0.05821895971894264, -0.0026978147216141224, 0.03953702002763748, 0.01787497103214264, -0.05887347087264061, -0.00027197625604458153, -0.028730303049087524, -0.02215060405433178, 0.07047837227582932, -0.032375890761613846, -0.00011279471073066816, 0.01315301563590765, -0.0010450751287862659, 0.020898284390568733, -0.013241070322692394, -0.024628158658742905, -0.019909389317035675, -0.05343034118413925, 0.0022840951569378376, -0.017856450751423836, 0.03752543777227402, 0.024396277964115143, -0.004686280619353056, -0.016203105449676514, -0.009482908993959427, 0.03407151252031326, -0.002740207128226757, 0.03272382542490959, 0.02651531621813774, -0.058525729924440384, -0.023655390366911888, -0.011790175922214985, 0.03925531357526779, 0.013866443186998367, 0.04840943589806557, 0.01433261763304472, 0.033368755131959915, -0.017562948167324066, -0.07722582668066025, 0.010781972669064999, -0.01323713455349207, -0.058862410485744476, 0.05883099511265755, -0.043963633477687836, -0.03357572853565216, 0.00797117967158556, 0.033708181232213974, -0.0786106288433075, 0.026821736246347427, 0.022951070219278336, -0.011617700569331646, 0.021849937736988068, 0.03693987429141998, -0.001659695990383625, -0.0061637707985937595, -0.044292062520980835, 0.07012653350830078, 0.013633946888148785, 0.008747246116399765, -0.006612675730139017, 0.013270584866404533, -0.014857371337711811, -0.011432196013629436, 0.0065117403864860535, -0.01404486782848835, 0.01858045533299446, -0.02486853487789631, -0.01836327649652958, -0.024927770718932152, 0.02749050408601761, 0.0044959415681660175, -0.008484087884426117, 0.003905565943568945, 0.00446905056014657, -0.02270268090069294, -0.052917368710041046, -0.010605140589177608, 0.00709659606218338, 0.05721830576658249, 0.05082769691944122, 0.004808859899640083, -0.04757297411561012, 0.017576342448592186, -0.01816967874765396, 0.0019217076478525996, -0.019937697798013687, 0.05922657623887062, -0.023297931998968124, -0.009335382841527462, 0.019768856465816498, -0.02407260239124298, 0.029455088078975677, 0.041888874024152756, 0.03524501621723175, -0.03877586871385574, -0.04179271683096886, 0.06196897104382515, -0.007987288758158684, -0.04283953458070755, 0.06542922556400299, 0.0064946124330163, 0.008456920273602009, -0.02566426247358322, 0.020016202703118324, -0.001562338089570403, -0.0006199604249559343, -0.027312463149428368, -0.04545450210571289, 0.011615592055022717, -0.01337212324142456, 0.020239297300577164, -0.023537753149867058, -0.003997112158685923, -0.004092201124876738, -0.02057114616036415, -0.011246242560446262, 0.00971840787678957, -0.008114401251077652, -0.07252760231494904, -0.016493696719408035, 0.04132617264986038, -0.04882003739476204, -0.0026445596013218164, -0.0009650048450566828, 0.018796775490045547, 0.046294763684272766, -0.059855569154024124, 0.04281643033027649, -0.04874449595808983, 0.0025613352190703154, -0.01081911288201809, -0.0037697977386415005, 0.031707651913166046, -0.021693317219614983, 0.015387540683150291, -0.01732710190117359, -0.015074243769049644, 0.0418533980846405, 0.034862905740737915, 0.005694030784070492, 0.0007337104761973023, 0.03324953466653824, 0.001326580299064517, 0.028315981850028038, -0.030011458322405815, -0.012086973525583744, 0.007019157521426678, 0.012758257798850536, -0.0004404193314258009, -0.03769683092832565, -0.011248038150370121, 0.041032496839761734, -0.019792452454566956, 0.02623436599969864, 0.002371096983551979, -0.03930090367794037, 0.0002622672473080456, 0.04479384422302246, -0.035239823162555695, -0.06436390429735184, -0.005533753894269466, 0.021474644541740417, 0.006803956348448992, 0.033541347831487656, -0.015958765521645546, 0.0075390939600765705, -0.08871641755104065, -0.056117936968803406, 0.009939104318618774, 0.0015055258991196752, 0.05826868116855621, -0.02165314555168152, 0.021653825417160988, -0.057069793343544006, -0.026611806824803352, -0.013909755274653435, 0.06283603608608246, 0.012419736944139004, -0.04626639932394028, 0.01178447250276804, -0.03799920156598091, 0.010784066282212734, -0.02245737984776497, 0.022549331188201904, -0.07572583854198456, -0.017417579889297485, 0.033408280462026596, -0.03186677768826485, 0.02544129081070423, -0.03759037330746651, 0.004175000824034214, -0.035863246768713, -0.004104748833924532, 0.04276532679796219, -0.020994527265429497, 0.017737165093421936, 0.016124460846185684, -0.0408937931060791, -0.02875874936580658, 0.03717256337404251, 0.004172440618276596, 0.021906953305006027, -0.046760935336351395, -0.060809068381786346, -0.014605913311243057, -0.01680750772356987, 0.024257700890302658, 0.03192616254091263, 0.019896337762475014, 0.07277151942253113, -0.03467482328414917, -0.0296962708234787, -0.020838161930441856, -0.04029468074440956, 0.027133222669363022, -0.054488155990839005, 0.020477961748838425, 0.00099698337726295, -0.007412747014313936, -0.0006891798693686724, 0.008630702272057533, 0.07006815820932388, -0.0006025220500305295, 0.006870594806969166, -0.02347354218363762, -0.004952014423906803, -0.012581387534737587, 0.0016122444067150354, -0.003527534892782569, -0.009774364531040192, 0.012716458179056644, 0.0009260065853595734, 0.03004925511777401, 0.011623555794358253, 0.06507840007543564, -0.050444841384887695, 0.008790462277829647, -0.02803892455995083, -0.06705816090106964, 0.02005065605044365, 0.035633061081171036, 0.0002218412992078811, 0.0780092179775238, -0.018138019368052483, -0.023708099499344826, 0.010249351151287556, -0.035801246762275696, -0.0019092432921752334, -0.029957309365272522, -0.007117624394595623, 0.01950136199593544, 0.03664879873394966, -0.020137088373303413, -0.023347266018390656, 0.08971085399389267, 0.00516971480101347, 0.050085872411727905, -0.022632304579019547, -0.005027259234338999, -0.027102002874016762, 0.06915169954299927, 0.0013029997935518622, 0.017689192667603493, 0.009980677627027035, -0.008764904923737049, -0.03800809383392334, -0.029612688347697258, 0.05087962746620178, 0.032240815460681915, -0.009346778504550457, -0.02199050784111023, -0.025282803922891617, 0.014376815408468246, 0.03630366548895836, 0.0656920075416565, -0.014159136451780796, 0.01677713729441166, -0.036684345453977585, 0.04181422293186188, -0.03661084547638893, -0.0009762952686287463, -0.020955290645360947, 0.037498973309993744, -0.021638048812747, 0.0194693636149168, -0.009985314682126045, -0.08341575413942337, -0.0021505558397620916, 0.0004300408763810992, -0.03864736109972, 0.09971991181373596, -0.0420842319726944, -0.0013092535082250834, -0.0484723262488842, 0.019459035247564316, -0.01095435582101345, 0.020641816779971123, 0.07297729700803757, 0.060642678290605545, 0.026820100843906403, 0.010149716399610043, -0.042748551815748215, -0.02918965183198452, -0.034213971346616745, 0.08885794132947922, -0.025734225288033485, 0.02929290570318699, -0.0154344467446208, -0.044630784541368484, 0.03935050219297409, 0.01972702145576477, -0.037364643067121506, -0.016189686954021454, -0.07640594244003296, -0.018994292244315147, 0.018101777881383896, -0.014673523604869843, 0.02799123339354992, -0.010238418355584145, 0.01709965616464615, -0.019193274900317192, 0.04031998664140701, -0.03897527605295181, 0.10559485107660294, -0.054177287966012955, 0.023972777649760246, 0.005270805209875107, -0.04176589474081993, 0.05416272580623627, 0.030821776017546654, -0.025223834440112114, 0.0030505741015076637, 0.016425693407654762, 0.006580985151231289, -0.02823006734251976, -0.009023276157677174, -0.056368544697761536, -0.004875159356743097, -0.02268892526626587, -0.0034240498207509518, 0.03267257660627365, -0.03636043891310692, 0.04608139395713806, -0.04523656144738197, -0.010927774012088776, -0.005379600916057825, 0.03045721910893917, 0.0389670729637146, 0.028936419636011124, -0.029645929113030434, 0.030180001631379128, 0.003528584260493517, -0.017787493765354156, 0.05465669929981232, 0.02838345430791378, 0.06302227824926376, 0.029360666871070862, -0.017426690086722374, 0.0001560311357025057, -0.051588669419288635, -0.002858480205759406, -0.05941910296678543, 0.009235854260623455, 0.01826690323650837, -0.03919863700866699, 0.004400157369673252, -0.007518859580159187, -0.0030373611953109503, -0.06218826398253441, 0.0023394592572003603, 0.06459461897611618, 0.025311214849352837, -0.07068324089050293, -0.07035823166370392, -0.011732452549040318, -0.0036581538151949644, 0.03272993490099907, 0.06999839842319489, -0.013980642892420292, -0.010885556228458881, 0.04285767301917076, 0.012768624350428581, 0.035443015396595, -0.015054207295179367, 0.015541168861091137, -0.01729157753288746, 0.05152300000190735, 0.031376104801893234, -0.055162589997053146, -0.04728157818317413, 0.016747761517763138, -0.011066374368965626, -0.023549759760499, -0.04256664589047432, -0.029114289209246635, -0.007128818891942501] - Python类型: <class 'list'>
2025-07-01 03:07:22,579 - pymilvus.decorators - ERROR - RPC error: [batch_insert], <MilvusException: (code=1100, message=the length (2084) of 6th string exceeds max length (2048): invalid parameter[expected=valid length string][actual=string length exceeds max length])>, <Time:{'RPC start': '2025-07-01 03:07:22.454702', 'RPC error': '2025-07-01 03:07:22.579938'}>
2025-07-01 03:07:22,580 - vector_store - ERROR - 插入数据到Milvus失败: <MilvusException: (code=1100, message=the length (2084) of 6th string exceeds max length (2048): invalid parameter[expected=valid length string][actual=string length exceeds max length])>
2025-07-01 03:07:22,620 - elastic_transport.transport - INFO - PUT http://localhost:9200/_bulk [status:200 duration:0.020s]
2025-07-01 03:07:22,622 - vector_store - ERROR - ES批量索引失败: 500 document(s) failed to index.
2025-07-01 03:07:22,623 - vector_store - WARNING - ES存储失败，但Milvus存储成功，系统继续运行
2025-07-01 03:07:22,623 - policy_matcher - ERROR - 政策文档存储失败: 北京市产业政策导引.pdf
2025-07-01 03:07:22,624 - __main__ - WARNING - 政策文档加载失败
2025-07-01 03:07:22,624 - __main__ - INFO - 系统初始化完成
2025-07-01 03:07:22,625 - __main__ - INFO - 开始测试查询...
2025-07-01 03:07:22,625 - __main__ - INFO - 
=== 测试查询 1: 生物医药行业政策查询 ===
2025-07-01 03:07:22,625 - __main__ - INFO - 查询: 我想查找和生物医药相关的政策
2025-07-01 03:07:22,625 - policy_matcher - INFO - 开始政策匹配: 我想查找和生物医药相关的政策
2025-07-01 03:07:22,626 - retriever - INFO - 开始混合检索: 我想查找和生物医药相关的政策
2025-07-01 03:07:22,627 - retriever - INFO - 查询扩展: 我想查找和生物医药相关的政策 -> ['生命科学', '医药', '医药健康', '我想查找和生物医药相关的政策', '制药', '医疗', '医疗器械']
2025-07-01 03:07:22,627 - retriever - INFO - 构建过滤条件: {}
2025-07-01 03:07:22,684 - vector_store - INFO - Milvus搜索返回 0 个结果
2025-07-01 03:07:22,684 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 03:07:22,690 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.006s]
2025-07-01 03:07:22,690 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 03:07:22,693 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 03:07:22,693 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 03:07:22,696 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 03:07:22,697 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 03:07:22,697 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 03:07:22,697 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 03:07:22,697 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 03:07:22,697 - policy_matcher - INFO - 政策匹配完成，耗时: 0.07秒，返回: 0个结果
2025-07-01 03:07:22,697 - __main__ - INFO - 查询结果: 找到 0 个匹配政策
2025-07-01 03:07:22,697 - __main__ - INFO - 处理时间: 0.07秒
2025-07-01 03:07:22,697 - __main__ - INFO - 建议:
2025-07-01 03:07:22,697 - __main__ - INFO -   - 未找到匹配的政策，建议：
2025-07-01 03:07:22,697 - __main__ - INFO -   - 1. 调整查询关键词，使用更通用的表述
2025-07-01 03:07:22,697 - __main__ - INFO -   - 2. 尝试按行业或政策类型分类查询
2025-07-01 03:07:22,697 - __main__ - INFO - 
=== 测试查询 2: 初创企业政策查询 ===
2025-07-01 03:07:22,697 - __main__ - INFO - 查询: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 03:07:22,697 - policy_matcher - INFO - 开始政策匹配: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 03:07:22,697 - retriever - INFO - 开始混合检索: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 03:07:22,697 - retriever - INFO - 查询扩展: 我是一家小型初创企业，现阶段有什么政策比较适用 -> ['新成立', '创业', '小微', '我是一家小型初创企业 现阶段有什么政策比较适用', '小企业', '起步']
2025-07-01 03:07:22,697 - retriever - INFO - 构建过滤条件: {}
2025-07-01 03:07:22,742 - vector_store - INFO - Milvus搜索返回 0 个结果
2025-07-01 03:07:22,742 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 03:07:22,747 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.005s]
2025-07-01 03:07:22,747 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 03:07:22,749 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 03:07:22,750 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 03:07:22,752 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 03:07:22,752 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 03:07:22,752 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 03:07:22,752 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 03:07:22,752 - retriever - INFO - 企业规模过滤: 0 -> 0
2025-07-01 03:07:22,752 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 03:07:22,753 - policy_matcher - INFO - 政策匹配完成，耗时: 0.06秒，返回: 0个结果
2025-07-01 03:07:22,753 - __main__ - INFO - 查询结果: 找到 0 个匹配政策
2025-07-01 03:07:22,753 - __main__ - INFO - 处理时间: 0.06秒
2025-07-01 03:07:22,753 - __main__ - INFO - 建议:
2025-07-01 03:07:22,753 - __main__ - INFO -   - 未找到匹配的政策，建议：
2025-07-01 03:07:22,753 - __main__ - INFO -   - 1. 调整查询关键词，使用更通用的表述
2025-07-01 03:07:22,753 - __main__ - INFO -   - 2. 尝试按行业或政策类型分类查询
2025-07-01 03:07:22,753 - __main__ - INFO - 
=== 测试查询 3: 创新资金政策查询 ===
2025-07-01 03:07:22,753 - __main__ - INFO - 查询: 有哪些研发创新方面的资金支持政策
2025-07-01 03:07:22,753 - policy_matcher - INFO - 开始政策匹配: 有哪些研发创新方面的资金支持政策
2025-07-01 03:07:22,753 - retriever - INFO - 开始混合检索: 有哪些研发创新方面的资金支持政策
2025-07-01 03:07:22,753 - retriever - INFO - 查询扩展: 有哪些研发创新方面的资金支持政策 -> ['技术', '科技', '奖励', '补贴', '研发', '专项资金', '有哪些研发创新方面的资金支持政策', '专利', '资助']
2025-07-01 03:07:22,753 - retriever - INFO - 构建过滤条件: {}
2025-07-01 03:07:22,791 - vector_store - INFO - Milvus搜索返回 0 个结果
2025-07-01 03:07:22,792 - retriever - INFO - 向量搜索返回 0 个结果
2025-07-01 03:07:22,795 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 03:07:22,795 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 03:07:22,797 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 03:07:22,797 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 03:07:22,799 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.001s]
2025-07-01 03:07:22,799 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 03:07:22,799 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 03:07:22,799 - retriever - INFO - 融合结果: 0 个结果
2025-07-01 03:07:22,799 - retriever - INFO - 检索完成，返回 0 个结果
2025-07-01 03:07:22,799 - policy_matcher - INFO - 政策匹配完成，耗时: 0.05秒，返回: 0个结果
2025-07-01 03:07:22,799 - __main__ - INFO - 查询结果: 找到 0 个匹配政策
2025-07-01 03:07:22,799 - __main__ - INFO - 处理时间: 0.05秒
2025-07-01 03:07:22,799 - __main__ - INFO - 建议:
2025-07-01 03:07:22,799 - __main__ - INFO -   - 未找到匹配的政策，建议：
2025-07-01 03:07:22,799 - __main__ - INFO -   - 1. 调整查询关键词，使用更通用的表述
2025-07-01 03:07:22,799 - __main__ - INFO -   - 2. 尝试按行业或政策类型分类查询
2025-07-01 03:07:22,799 - __main__ - INFO - 启动API服务...
2025-07-01 03:16:58,390 - __main__ - INFO - 启动政策匹配RAG检索系统
2025-07-01 03:16:58,391 - __main__ - INFO - 正在初始化政策匹配系统...
2025-07-01 03:16:59,290 - vector_store - INFO - 已连接到Milvus: localhost:19530
2025-07-01 03:16:59,295 - vector_store - INFO - 加载现有集合: policy_collection
2025-07-01 03:16:59,308 - elastic_transport.transport - INFO - HEAD http://localhost:9200/ [status:200 duration:0.007s]
2025-07-01 03:16:59,308 - vector_store - INFO - 已连接到Elasticsearch: localhost:9200
2025-07-01 03:16:59,314 - elastic_transport.transport - INFO - HEAD http://localhost:9200/policy_index [status:200 duration:0.006s]
2025-07-01 03:16:59,314 - vector_store - INFO - Elasticsearch索引就绪: policy_index
2025-07-01 03:16:59,321 - elastic_transport.transport - INFO - GET http://localhost:9200/policy_index/_stats [status:200 duration:0.005s]
2025-07-01 03:17:01,602 - embeddings - INFO - 正在加载嵌入模型: moka-ai/m3e-base
2025-07-01 03:17:01,602 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: moka-ai/m3e-base
2025-07-01 03:17:07,455 - embeddings - INFO - 模型加载完成，使用设备: cpu
2025-07-01 03:17:07,457 - __main__ - INFO - 系统状态: {'status': '运行中', 'vector_store': {'milvus_connected': True, 'elasticsearch_connected': True, 'milvus_stats': {'row_count': 0}, 'elasticsearch_stats': {'doc_count': 0, 'store_size': 227}}, 'embedding_model': {'status': 'loaded', 'model_name': 'moka-ai/m3e-base', 'device': 'cpu', 'embedding_dim': 768, 'max_seq_length': 512}, 'components': {'document_processor': '正常', 'retriever': '正常', 'matcher': '正常'}}
2025-07-01 03:17:07,457 - __main__ - INFO - 发现政策文档: 北京市产业政策导引.pdf，开始加载...
2025-07-01 03:17:07,457 - policy_matcher - INFO - 开始添加政策文档: 北京市产业政策导引.pdf
2025-07-01 03:17:07,676 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-07-01 03:17:07,677 - jieba - DEBUG - Loading model from cache /var/folders/w7/v83dx60s0wnf6qh99wjhckhc0000gn/T/jieba.cache
2025-07-01 03:17:07,943 - jieba - DEBUG - Loading model cost 0.267 seconds.
2025-07-01 03:17:07,943 - jieba - DEBUG - Prefix dict has been built successfully.
2025-07-01 03:17:07,944 - document_processor - INFO - 开始处理文档: 北京市产业政策导引.pdf
2025-07-01 03:17:18,662 - document_processor - INFO - 文档处理完成: 北京市产业政策导引.pdf, 生成 910 个分块
2025-07-01 03:17:18,663 - embeddings - INFO - 开始编码 910 个文本
2025-07-01 03:18:40,137 - embeddings - INFO - 编码完成，输出形状: (910, 768)
2025-07-01 03:18:40,149 - vector_store - INFO - 准备插入数据: chunks数量=910, embeddings形状=(910, 768)
2025-07-01 03:18:40,149 - vector_store - INFO - chunk_ids类型: <class 'list'>, 样例: ['policy_157f44c2_chunk_0', 'policy_157f44c2_chunk_1']
2025-07-01 03:18:40,149 - vector_store - INFO - embedding_list类型: <class 'list'>, 长度: 910
2025-07-01 03:18:40,149 - vector_store - INFO - 验证字段 chunk_id (Milvus类型: 21) - 样例值: policy_157f44c2_chunk_0 - Python类型: <class 'str'>
2025-07-01 03:18:40,149 - vector_store - INFO - 验证字段 policy_id (Milvus类型: 21) - 样例值: policy_157f44c2 - Python类型: <class 'str'>
2025-07-01 03:18:40,149 - vector_store - INFO - 验证字段 content (Milvus类型: 21) - 样例值: 北京市产业政策导引 
（市级版） - Python类型: <class 'str'>
2025-07-01 03:18:40,149 - vector_store - INFO - 验证字段 section (Milvus类型: 21) - 样例值: 开篇 - Python类型: <class 'str'>
2025-07-01 03:18:40,149 - vector_store - INFO - 验证字段 chunk_type (Milvus类型: 21) - 样例值: text - Python类型: <class 'str'>
2025-07-01 03:18:40,150 - vector_store - INFO - 验证字段 embedding (Milvus类型: 101) - 样例值: [-0.009589307941496372, 0.02911415882408619, -0.017605118453502655, 0.04515969753265381, -0.008898379281163216, -0.0004742610326502472, 0.03711366653442383, 0.009216396138072014, -0.028580965474247932, -0.004692758899182081, 0.061252694576978683, 0.004142737481743097, -0.00015245744725689292, -0.03795205056667328, -0.05199399217963219, -0.047508805990219116, 0.03326359763741493, 0.042946770787239075, -0.05036120489239693, -0.0045363628305494785, 0.03374297171831131, -0.013076845556497574, -0.028622999787330627, 0.011045549064874649, -0.008509015664458275, 0.009151282720267773, 0.0024055256508290768, -0.0009728657896630466, -0.033678777515888214, 0.0015214345185086131, 0.03267497941851616, -0.057704951614141464, -0.01816404238343239, 0.001693681930191815, -0.003161015221849084, 0.024775955826044083, -0.013540956191718578, -0.02623024582862854, 0.05934133008122444, 0.029546277597546577, -0.012443392537534237, 0.04352046549320221, -0.0014886443968862295, -0.008488436229526997, -0.008628182113170624, 0.027824610471725464, -0.006604868918657303, -0.00821163970977068, -0.040158990770578384, 0.009263608604669571, -0.007601940538734198, 0.3768092393875122, -0.01491926796734333, 0.005379746202379465, -0.04145354405045509, 0.06345204263925552, -0.03630485385656357, -0.009675629436969757, 0.010845758020877838, 0.039076875895261765, -0.005835541058331728, -0.01878809928894043, 0.0059173936024308205, -0.021044433116912842, 0.026823166757822037, -0.02284947596490383, -0.0548282191157341, -0.035297710448503494, 0.028276700526475906, -0.027777930721640587, 0.022341134026646614, -0.028723761439323425, 0.010176535695791245, -0.001923352712765336, 0.03312109410762787, 0.024043748155236244, 0.011900484561920166, -0.00845291931182146, 0.0014036806533113122, -0.012982417829334736, 0.014434284530580044, 0.0502677857875824, -0.012608615681529045, 0.0030357795767486095, -0.08627171814441681, -0.01438103336840868, -0.0019654601346701384, 0.021047798916697502, 0.013121829368174076, 0.0571318045258522, -0.06971745193004608, -0.053690601140260696, -0.005233254283666611, -0.008413158357143402, -0.02017509937286377, 0.002872430719435215, 0.053301695734262466, -0.05862448364496231, -0.036340124905109406, -0.00010847074736375362, 0.03970731794834137, -0.013180913403630257, -0.010341119952499866, -0.04928994178771973, 0.07712284475564957, 0.014791151508688927, -0.059449516236782074, 0.0129732396453619, 0.019919831305742264, -0.010746200568974018, -0.02472183108329773, -0.03969830274581909, 0.0226453747600317, 0.02169407159090042, -0.04375375062227249, -0.018663236871361732, -0.0026338407769799232, -0.0037480355240404606, 0.027444249019026756, 0.004402159247547388, -0.008972407318651676, 0.039672669023275375, -0.008463398553431034, -0.060849398374557495, 0.024426542222499847, 0.009231614880263805, 0.0036453548818826675, 0.0406363308429718, -0.02083449438214302, 0.036203619092702866, 0.010913846082985401, -0.018755804747343063, 0.011556701734662056, -0.0160507969558239, 0.020260801538825035, 0.003158723935484886, -0.0055779810063540936, -0.041698843240737915, -0.03637868911027908, -0.035921353846788406, 0.06556741893291473, 0.029048891738057137, 0.04013197496533394, -0.051235370337963104, -0.04153929278254509, 0.005427155643701553, 0.008758113719522953, 0.011159452609717846, 0.043652091175317764, -0.040720127522945404, -0.004773605149239302, 0.030425705015659332, 0.038182493299245834, 0.001564845209941268, 0.020213427022099495, 0.030758051201701164, 0.02055022120475769, 0.028158511966466904, -0.07821311801671982, -0.038057200610637665, 0.039441123604774475, -0.003705583279952407, 0.044595569372177124, -0.004892559722065926, 0.019788745790719986, 0.007673455867916346, 0.02045273967087269, -0.07352282106876373, -0.025709766894578934, 0.010276333428919315, 0.010867963545024395, -0.01248021051287651, 0.008558572269976139, -0.019154522567987442, -0.013651279732584953, -0.0453471764922142, -0.019337618723511696, 0.012558511458337307, -0.04601521044969559, -0.030041612684726715, -0.028040865436196327, 0.032115161418914795, 0.020124176517128944, 0.024890819564461708, -0.034578800201416016, 0.03267127275466919, -0.048211950808763504, 0.005665671080350876, 0.05325033888220787, -0.013328064233064651, -0.01906873844563961, -0.010803215205669403, -0.024040287360548973, 0.0011679499875754118, 0.06144373491406441, 0.037063393741846085, -0.02414027974009514, 0.034590207040309906, 0.0002138784620910883, 0.012140613049268723, -0.02405504509806633, -0.05000852793455124, 0.004672967828810215, -0.01480168104171753, 0.006675413344055414, 0.0972711369395256, 0.034512847661972046, 0.06292875111103058, 0.009348156861960888, -0.01494918204843998, -0.06759670376777649, -0.06978300958871841, 0.0232897587120533, 0.05494898930191994, -0.008022705093026161, 0.030105656012892723, -0.09707214683294296, 0.038521941751241684, -0.019789280369877815, 0.04824909195303917, 0.06329125165939331, -0.028315721079707146, -0.01932419277727604, -0.021181587129831314, -0.026322539895772934, -0.01419211458414793, -0.0008855590131133795, 0.03259635716676712, -0.0033729998394846916, 0.021748656406998634, 0.02658071182668209, -0.01077377237379551, 0.02914053201675415, 0.010506127960979939, -0.00022930283739697188, 0.07139137387275696, -0.0288256723433733, 0.015812374651432037, 0.024732865393161774, -0.03838037699460983, -0.016788508743047714, 0.009803450666368008, 0.030756089836359024, -0.000818780914414674, 0.01877676323056221, -0.006893815007060766, -0.02332308515906334, -0.03040100447833538, -0.055977363139390945, -0.05616838485002518, 0.01870473474264145, 0.018247749656438828, 0.0018340129172429442, -0.05407395213842392, -0.023001838475465775, -0.02583295851945877, 0.02642855793237686, 0.04169720411300659, 0.03082786314189434, -0.03451421111822128, 0.005526895169168711, -0.03213411569595337, 0.02497667260468006, 0.0029323389753699303, 0.03324692323803902, -0.011319850571453571, -0.01809949427843094, -0.020266283303499222, -0.029924612492322922, -0.02093447931110859, -0.004756493493914604, 0.06777933239936829, 0.03589344397187233, -0.016932327300310135, 0.020171288400888443, -0.03975522518157959, 0.04156431183218956, -0.008397664874792099, -0.03129595145583153, -0.07036636769771576, 0.05021882429718971, 0.04966488480567932, 0.03049454838037491, -0.028772899881005287, -0.018010294064879417, -0.04312371090054512, 0.0046417745761573315, 0.03925392031669617, -0.019701730459928513, -0.053943932056427, -0.030901964753866196, -0.029882483184337616, 0.01791478507220745, 0.027659915387630463, 0.08985470980405807, -0.05198268964886665, -0.03677350655198097, 0.018498342484235764, -0.03612259402871132, 0.0012379527324810624, 0.05046892166137695, -0.03301394730806351, 0.018706364557147026, 0.01413088757544756, -0.01602291315793991, 0.027428526431322098, 0.026961391791701317, -0.0035943014081567526, 0.017675628885626793, -0.02199414186179638, 0.03260156139731407, -0.023268917575478554, -0.023493386805057526, -0.02067587524652481, -0.0018503885949030519, 0.007983824238181114, -0.03271932154893875, 0.0006211347645148635, -0.01979614980518818, -0.005424872972071171, 0.039955489337444305, -0.010059586726129055, 0.000972070440184325, 0.10771221667528152, 0.06482519954442978, 0.03266149386763573, 0.02456350065767765, 0.00936193484812975, -0.008178982883691788, 0.05346611514687538, 0.028918839991092682, -0.07390716671943665, -0.006112892646342516, 0.028687957674264908, 0.054268978536129, 0.06121604144573212, -0.007828090339899063, -0.03363944590091705, -0.03989904373884201, 0.015971971675753593, -0.007727424614131451, -0.032877519726753235, 0.016885342076420784, -0.010724813677370548, -0.016950199380517006, -0.01989579387009144, -0.00168701377697289, -0.051006659865379333, -0.0014523814897984266, -0.04616301879286766, -0.030870657414197922, 1.5738576621515676e-05, -0.03532016649842262, -0.01884891837835312, -0.014430598355829716, -0.014676989056169987, 0.057766810059547424, 0.006159622687846422, 0.02132817544043064, 0.03129813075065613, -0.016254132613539696, -0.019971000030636787, -0.044640813022851944, 0.02695411629974842, -0.008467409759759903, 0.00490883132442832, 0.030902333557605743, -0.020411167293787003, -0.055149175226688385, -0.02834024652838707, 0.026349080726504326, 0.010783246718347073, 0.05821895971894264, -0.0026978147216141224, 0.03953702002763748, 0.01787497103214264, -0.05887347087264061, -0.00027197625604458153, -0.028730303049087524, -0.02215060405433178, 0.07047837227582932, -0.032375890761613846, -0.00011279471073066816, 0.01315301563590765, -0.0010450751287862659, 0.020898284390568733, -0.013241070322692394, -0.024628158658742905, -0.019909389317035675, -0.05343034118413925, 0.0022840951569378376, -0.017856450751423836, 0.03752543777227402, 0.024396277964115143, -0.004686280619353056, -0.016203105449676514, -0.009482908993959427, 0.03407151252031326, -0.002740207128226757, 0.03272382542490959, 0.02651531621813774, -0.058525729924440384, -0.023655390366911888, -0.011790175922214985, 0.03925531357526779, 0.013866443186998367, 0.04840943589806557, 0.01433261763304472, 0.033368755131959915, -0.017562948167324066, -0.07722582668066025, 0.010781972669064999, -0.01323713455349207, -0.058862410485744476, 0.05883099511265755, -0.043963633477687836, -0.03357572853565216, 0.00797117967158556, 0.033708181232213974, -0.0786106288433075, 0.026821736246347427, 0.022951070219278336, -0.011617700569331646, 0.021849937736988068, 0.03693987429141998, -0.001659695990383625, -0.0061637707985937595, -0.044292062520980835, 0.07012653350830078, 0.013633946888148785, 0.008747246116399765, -0.006612675730139017, 0.013270584866404533, -0.014857371337711811, -0.011432196013629436, 0.0065117403864860535, -0.01404486782848835, 0.01858045533299446, -0.02486853487789631, -0.01836327649652958, -0.024927770718932152, 0.02749050408601761, 0.0044959415681660175, -0.008484087884426117, 0.003905565943568945, 0.00446905056014657, -0.02270268090069294, -0.052917368710041046, -0.010605140589177608, 0.00709659606218338, 0.05721830576658249, 0.05082769691944122, 0.004808859899640083, -0.04757297411561012, 0.017576342448592186, -0.01816967874765396, 0.0019217076478525996, -0.019937697798013687, 0.05922657623887062, -0.023297931998968124, -0.009335382841527462, 0.019768856465816498, -0.02407260239124298, 0.029455088078975677, 0.041888874024152756, 0.03524501621723175, -0.03877586871385574, -0.04179271683096886, 0.06196897104382515, -0.007987288758158684, -0.04283953458070755, 0.06542922556400299, 0.0064946124330163, 0.008456920273602009, -0.02566426247358322, 0.020016202703118324, -0.001562338089570403, -0.0006199604249559343, -0.027312463149428368, -0.04545450210571289, 0.011615592055022717, -0.01337212324142456, 0.020239297300577164, -0.023537753149867058, -0.003997112158685923, -0.004092201124876738, -0.02057114616036415, -0.011246242560446262, 0.00971840787678957, -0.008114401251077652, -0.07252760231494904, -0.016493696719408035, 0.04132617264986038, -0.04882003739476204, -0.0026445596013218164, -0.0009650048450566828, 0.018796775490045547, 0.046294763684272766, -0.059855569154024124, 0.04281643033027649, -0.04874449595808983, 0.0025613352190703154, -0.01081911288201809, -0.0037697977386415005, 0.031707651913166046, -0.021693317219614983, 0.015387540683150291, -0.01732710190117359, -0.015074243769049644, 0.0418533980846405, 0.034862905740737915, 0.005694030784070492, 0.0007337104761973023, 0.03324953466653824, 0.001326580299064517, 0.028315981850028038, -0.030011458322405815, -0.012086973525583744, 0.007019157521426678, 0.012758257798850536, -0.0004404193314258009, -0.03769683092832565, -0.011248038150370121, 0.041032496839761734, -0.019792452454566956, 0.02623436599969864, 0.002371096983551979, -0.03930090367794037, 0.0002622672473080456, 0.04479384422302246, -0.035239823162555695, -0.06436390429735184, -0.005533753894269466, 0.021474644541740417, 0.006803956348448992, 0.033541347831487656, -0.015958765521645546, 0.0075390939600765705, -0.08871641755104065, -0.056117936968803406, 0.009939104318618774, 0.0015055258991196752, 0.05826868116855621, -0.02165314555168152, 0.021653825417160988, -0.057069793343544006, -0.026611806824803352, -0.013909755274653435, 0.06283603608608246, 0.012419736944139004, -0.04626639932394028, 0.01178447250276804, -0.03799920156598091, 0.010784066282212734, -0.02245737984776497, 0.022549331188201904, -0.07572583854198456, -0.017417579889297485, 0.033408280462026596, -0.03186677768826485, 0.02544129081070423, -0.03759037330746651, 0.004175000824034214, -0.035863246768713, -0.004104748833924532, 0.04276532679796219, -0.020994527265429497, 0.017737165093421936, 0.016124460846185684, -0.0408937931060791, -0.02875874936580658, 0.03717256337404251, 0.004172440618276596, 0.021906953305006027, -0.046760935336351395, -0.060809068381786346, -0.014605913311243057, -0.01680750772356987, 0.024257700890302658, 0.03192616254091263, 0.019896337762475014, 0.07277151942253113, -0.03467482328414917, -0.0296962708234787, -0.020838161930441856, -0.04029468074440956, 0.027133222669363022, -0.054488155990839005, 0.020477961748838425, 0.00099698337726295, -0.007412747014313936, -0.0006891798693686724, 0.008630702272057533, 0.07006815820932388, -0.0006025220500305295, 0.006870594806969166, -0.02347354218363762, -0.004952014423906803, -0.012581387534737587, 0.0016122444067150354, -0.003527534892782569, -0.009774364531040192, 0.012716458179056644, 0.0009260065853595734, 0.03004925511777401, 0.011623555794358253, 0.06507840007543564, -0.050444841384887695, 0.008790462277829647, -0.02803892455995083, -0.06705816090106964, 0.02005065605044365, 0.035633061081171036, 0.0002218412992078811, 0.0780092179775238, -0.018138019368052483, -0.023708099499344826, 0.010249351151287556, -0.035801246762275696, -0.0019092432921752334, -0.029957309365272522, -0.007117624394595623, 0.01950136199593544, 0.03664879873394966, -0.020137088373303413, -0.023347266018390656, 0.08971085399389267, 0.00516971480101347, 0.050085872411727905, -0.022632304579019547, -0.005027259234338999, -0.027102002874016762, 0.06915169954299927, 0.0013029997935518622, 0.017689192667603493, 0.009980677627027035, -0.008764904923737049, -0.03800809383392334, -0.029612688347697258, 0.05087962746620178, 0.032240815460681915, -0.009346778504550457, -0.02199050784111023, -0.025282803922891617, 0.014376815408468246, 0.03630366548895836, 0.0656920075416565, -0.014159136451780796, 0.01677713729441166, -0.036684345453977585, 0.04181422293186188, -0.03661084547638893, -0.0009762952686287463, -0.020955290645360947, 0.037498973309993744, -0.021638048812747, 0.0194693636149168, -0.009985314682126045, -0.08341575413942337, -0.0021505558397620916, 0.0004300408763810992, -0.03864736109972, 0.09971991181373596, -0.0420842319726944, -0.0013092535082250834, -0.0484723262488842, 0.019459035247564316, -0.01095435582101345, 0.020641816779971123, 0.07297729700803757, 0.060642678290605545, 0.026820100843906403, 0.010149716399610043, -0.042748551815748215, -0.02918965183198452, -0.034213971346616745, 0.08885794132947922, -0.025734225288033485, 0.02929290570318699, -0.0154344467446208, -0.044630784541368484, 0.03935050219297409, 0.01972702145576477, -0.037364643067121506, -0.016189686954021454, -0.07640594244003296, -0.018994292244315147, 0.018101777881383896, -0.014673523604869843, 0.02799123339354992, -0.010238418355584145, 0.01709965616464615, -0.019193274900317192, 0.04031998664140701, -0.03897527605295181, 0.10559485107660294, -0.054177287966012955, 0.023972777649760246, 0.005270805209875107, -0.04176589474081993, 0.05416272580623627, 0.030821776017546654, -0.025223834440112114, 0.0030505741015076637, 0.016425693407654762, 0.006580985151231289, -0.02823006734251976, -0.009023276157677174, -0.056368544697761536, -0.004875159356743097, -0.02268892526626587, -0.0034240498207509518, 0.03267257660627365, -0.03636043891310692, 0.04608139395713806, -0.04523656144738197, -0.010927774012088776, -0.005379600916057825, 0.03045721910893917, 0.0389670729637146, 0.028936419636011124, -0.029645929113030434, 0.030180001631379128, 0.003528584260493517, -0.017787493765354156, 0.05465669929981232, 0.02838345430791378, 0.06302227824926376, 0.029360666871070862, -0.017426690086722374, 0.0001560311357025057, -0.051588669419288635, -0.002858480205759406, -0.05941910296678543, 0.009235854260623455, 0.01826690323650837, -0.03919863700866699, 0.004400157369673252, -0.007518859580159187, -0.0030373611953109503, -0.06218826398253441, 0.0023394592572003603, 0.06459461897611618, 0.025311214849352837, -0.07068324089050293, -0.07035823166370392, -0.011732452549040318, -0.0036581538151949644, 0.03272993490099907, 0.06999839842319489, -0.013980642892420292, -0.010885556228458881, 0.04285767301917076, 0.012768624350428581, 0.035443015396595, -0.015054207295179367, 0.015541168861091137, -0.01729157753288746, 0.05152300000190735, 0.031376104801893234, -0.055162589997053146, -0.04728157818317413, 0.016747761517763138, -0.011066374368965626, -0.023549759760499, -0.04256664589047432, -0.029114289209246635, -0.007128818891942501] - Python类型: <class 'list'>
2025-07-01 03:18:43,354 - vector_store - INFO - 成功插入 910 个分块到Milvus
2025-07-01 03:18:43,438 - elastic_transport.transport - INFO - PUT http://localhost:9200/_bulk [status:200 duration:0.049s]
2025-07-01 03:18:43,440 - vector_store - ERROR - ES批量索引失败: 500 document(s) failed to index.
2025-07-01 03:18:43,441 - vector_store - WARNING - ES存储失败，但Milvus存储成功，系统继续运行
2025-07-01 03:18:43,441 - policy_matcher - INFO - 政策文档添加成功: 北京市产业政策导引.pdf
2025-07-01 03:18:43,442 - __main__ - INFO - 政策文档加载成功
2025-07-01 03:18:43,442 - __main__ - INFO - 系统初始化完成
2025-07-01 03:18:43,443 - __main__ - INFO - 开始测试查询...
2025-07-01 03:18:43,443 - __main__ - INFO - 
=== 测试查询 1: 生物医药行业政策查询 ===
2025-07-01 03:18:43,443 - __main__ - INFO - 查询: 我想查找和生物医药相关的政策
2025-07-01 03:18:43,443 - policy_matcher - INFO - 开始政策匹配: 我想查找和生物医药相关的政策
2025-07-01 03:18:43,445 - retriever - INFO - 开始混合检索: 我想查找和生物医药相关的政策
2025-07-01 03:18:43,445 - retriever - INFO - 查询扩展: 我想查找和生物医药相关的政策 -> ['医疗', '我想查找和生物医药相关的政策', '制药', '医疗器械', '医药健康', '生命科学', '医药']
2025-07-01 03:18:43,445 - retriever - INFO - 构建过滤条件: {}
2025-07-01 03:18:43,540 - vector_store - INFO - Milvus搜索返回 10 个结果
2025-07-01 03:18:43,540 - retriever - INFO - 向量搜索返回 10 个结果
2025-07-01 03:18:43,557 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.018s]
2025-07-01 03:18:43,558 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 03:18:43,562 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 03:18:43,563 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 03:18:43,566 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 03:18:43,566 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 03:18:43,566 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 03:18:43,566 - retriever - INFO - 融合结果: 10 个结果
2025-07-01 03:18:43,566 - retriever - INFO - 检索完成，返回 5 个结果
2025-07-01 03:18:43,569 - policy_matcher - INFO - 政策匹配完成，耗时: 0.13秒，返回: 1个结果
2025-07-01 03:18:43,569 - __main__ - INFO - 查询结果: 找到 1 个匹配政策
2025-07-01 03:18:43,569 - __main__ - INFO - 处理时间: 0.13秒
2025-07-01 03:18:43,569 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 03:18:43,569 - __main__ - INFO -      相关性: 0.331
2025-07-01 03:18:43,569 - __main__ - INFO -      摘要: 政策类型：资金支持 | 主要内容：给予奖励，单个药品奖励；给予奖励；给予奖励，单个品种奖励... | 适用条件：应急审批/工信部揭榜挂帅入围医疗器械，且确；必需易短缺药品重点监测清单》中新上市的本市注...
2025-07-01 03:18:43,569 - __main__ - INFO - 建议:
2025-07-01 03:18:43,569 - __main__ - INFO -   - 相关政策较少，建议：
2025-07-01 03:18:43,569 - __main__ - INFO -   - 1. 扩大查询范围，考虑相关行业政策
2025-07-01 03:18:43,569 - __main__ - INFO -   - 2. 关注上级政府的通用性政策
2025-07-01 03:18:43,569 - __main__ - INFO - 
=== 测试查询 2: 初创企业政策查询 ===
2025-07-01 03:18:43,569 - __main__ - INFO - 查询: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 03:18:43,569 - policy_matcher - INFO - 开始政策匹配: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 03:18:43,569 - retriever - INFO - 开始混合检索: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 03:18:43,569 - retriever - INFO - 查询扩展: 我是一家小型初创企业，现阶段有什么政策比较适用 -> ['新成立', '小微', '起步', '小企业', '创业', '我是一家小型初创企业 现阶段有什么政策比较适用']
2025-07-01 03:18:43,569 - retriever - INFO - 构建过滤条件: {}
2025-07-01 03:18:43,608 - vector_store - INFO - Milvus搜索返回 10 个结果
2025-07-01 03:18:43,608 - retriever - INFO - 向量搜索返回 10 个结果
2025-07-01 03:18:43,611 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 03:18:43,611 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 03:18:43,613 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 03:18:43,613 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 03:18:43,615 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 03:18:43,615 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 03:18:43,615 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 03:18:43,615 - retriever - INFO - 融合结果: 10 个结果
2025-07-01 03:18:43,616 - retriever - INFO - 企业规模过滤: 5 -> 5
2025-07-01 03:18:43,616 - retriever - INFO - 检索完成，返回 5 个结果
2025-07-01 03:18:43,616 - policy_matcher - INFO - 政策匹配完成，耗时: 0.05秒，返回: 1个结果
2025-07-01 03:18:43,616 - __main__ - INFO - 查询结果: 找到 1 个匹配政策
2025-07-01 03:18:43,616 - __main__ - INFO - 处理时间: 0.05秒
2025-07-01 03:18:43,616 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 03:18:43,616 - __main__ - INFO -      相关性: 0.338
2025-07-01 03:18:43,616 - __main__ - INFO -      摘要: 政策类型：税收优惠 | 主要内容：给予资金支持；给予不超过30 万元的资金支持；给予不超过20 万元的资金支持... | 适用条件：要求 | 纳入支持的科技型小微企业须满足以下条件：；当年入库的科技型...
2025-07-01 03:18:43,616 - __main__ - INFO - 建议:
2025-07-01 03:18:43,616 - __main__ - INFO -   - 相关政策较少，建议：
2025-07-01 03:18:43,616 - __main__ - INFO -   - 1. 扩大查询范围，考虑相关行业政策
2025-07-01 03:18:43,616 - __main__ - INFO -   - 2. 关注上级政府的通用性政策
2025-07-01 03:18:43,616 - __main__ - INFO - 
=== 测试查询 3: 创新资金政策查询 ===
2025-07-01 03:18:43,616 - __main__ - INFO - 查询: 有哪些研发创新方面的资金支持政策
2025-07-01 03:18:43,616 - policy_matcher - INFO - 开始政策匹配: 有哪些研发创新方面的资金支持政策
2025-07-01 03:18:43,616 - retriever - INFO - 开始混合检索: 有哪些研发创新方面的资金支持政策
2025-07-01 03:18:43,616 - retriever - INFO - 查询扩展: 有哪些研发创新方面的资金支持政策 -> ['专利', '资助', '科技', '研发', '补贴', '奖励', '技术', '有哪些研发创新方面的资金支持政策', '专项资金']
2025-07-01 03:18:43,616 - retriever - INFO - 构建过滤条件: {}
2025-07-01 03:18:43,672 - vector_store - INFO - Milvus搜索返回 10 个结果
2025-07-01 03:18:43,672 - retriever - INFO - 向量搜索返回 10 个结果
2025-07-01 03:18:43,674 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 03:18:43,674 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 03:18:43,676 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.001s]
2025-07-01 03:18:43,676 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 03:18:43,677 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.001s]
2025-07-01 03:18:43,677 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 03:18:43,677 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 03:18:43,677 - retriever - INFO - 融合结果: 10 个结果
2025-07-01 03:18:43,677 - retriever - INFO - 检索完成，返回 5 个结果
2025-07-01 03:18:43,677 - policy_matcher - INFO - 政策匹配完成，耗时: 0.06秒，返回: 1个结果
2025-07-01 03:18:43,677 - __main__ - INFO - 查询结果: 找到 1 个匹配政策
2025-07-01 03:18:43,677 - __main__ - INFO - 处理时间: 0.06秒
2025-07-01 03:18:43,677 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 03:18:43,677 - __main__ - INFO -      相关性: 0.522
2025-07-01 03:18:43,677 - __main__ - INFO -      摘要: 政策类型：资金支持 | 主要内容：给予支持；给予不超过 2000万元资金支持；给予支持... | 适用条件：要求 ；应用且取得显著成效的技术（服务），......
2025-07-01 03:18:43,677 - __main__ - INFO - 建议:
2025-07-01 03:18:43,677 - __main__ - INFO -   - 相关政策较少，建议：
2025-07-01 03:18:43,677 - __main__ - INFO -   - 1. 扩大查询范围，考虑相关行业政策
2025-07-01 03:18:43,677 - __main__ - INFO -   - 2. 关注上级政府的通用性政策
2025-07-01 03:18:43,677 - __main__ - INFO - 启动API服务...
2025-07-01 09:20:55,303 - __main__ - INFO - 启动政策匹配RAG检索系统
2025-07-01 09:20:55,304 - __main__ - INFO - 正在初始化政策匹配系统...
2025-07-01 09:20:57,394 - vector_store - INFO - 已连接到Milvus: localhost:19530
2025-07-01 09:20:57,410 - vector_store - INFO - 加载现有集合: policy_collection
2025-07-01 09:20:57,479 - elastic_transport.transport - INFO - HEAD http://localhost:9200/ [status:200 duration:0.053s]
2025-07-01 09:20:57,479 - vector_store - INFO - 已连接到Elasticsearch: localhost:9200
2025-07-01 09:20:57,517 - elastic_transport.transport - INFO - HEAD http://localhost:9200/policy_index [status:200 duration:0.037s]
2025-07-01 09:20:57,517 - vector_store - INFO - Elasticsearch索引就绪: policy_index
2025-07-01 09:20:57,554 - elastic_transport.transport - INFO - GET http://localhost:9200/policy_index/_stats [status:200 duration:0.033s]
2025-07-01 09:21:00,538 - embeddings - INFO - 正在加载嵌入模型: moka-ai/m3e-base
2025-07-01 09:21:00,538 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: moka-ai/m3e-base
2025-07-01 09:21:05,752 - embeddings - INFO - 模型加载完成，使用设备: cpu
2025-07-01 09:21:05,753 - __main__ - INFO - 系统状态: {'status': '运行中', 'vector_store': {'milvus_connected': True, 'elasticsearch_connected': True, 'milvus_stats': {'row_count': 910}, 'elasticsearch_stats': {'doc_count': 0, 'store_size': 227}}, 'embedding_model': {'status': 'loaded', 'model_name': 'moka-ai/m3e-base', 'device': 'cpu', 'embedding_dim': 768, 'max_seq_length': 512}, 'components': {'document_processor': '正常', 'retriever': '正常', 'matcher': '正常'}}
2025-07-01 09:21:05,753 - __main__ - INFO - 发现政策文档: 北京市产业政策导引.pdf，开始加载...
2025-07-01 09:21:05,754 - policy_matcher - INFO - 开始添加政策文档: 北京市产业政策导引.pdf
2025-07-01 09:21:06,097 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-07-01 09:21:06,101 - jieba - DEBUG - Loading model from cache /var/folders/w7/v83dx60s0wnf6qh99wjhckhc0000gn/T/jieba.cache
2025-07-01 09:21:06,400 - jieba - DEBUG - Loading model cost 0.300 seconds.
2025-07-01 09:21:06,400 - jieba - DEBUG - Prefix dict has been built successfully.
2025-07-01 09:21:06,401 - document_processor - INFO - 开始处理文档: 北京市产业政策导引.pdf
2025-07-01 09:21:19,599 - document_processor - INFO - 文档处理完成: 北京市产业政策导引.pdf, 生成 910 个分块
2025-07-01 09:21:19,609 - embeddings - INFO - 开始编码 910 个文本
2025-07-01 09:22:51,568 - embeddings - INFO - 编码完成，输出形状: (910, 768)
2025-07-01 09:22:51,613 - vector_store - INFO - 准备插入数据: chunks数量=910, embeddings形状=(910, 768)
2025-07-01 09:22:51,613 - vector_store - INFO - chunk_ids类型: <class 'list'>, 样例: ['policy_157f44c2_chunk_0', 'policy_157f44c2_chunk_1']
2025-07-01 09:22:51,613 - vector_store - INFO - embedding_list类型: <class 'list'>, 长度: 910
2025-07-01 09:22:51,613 - vector_store - INFO - 验证字段 chunk_id (Milvus类型: 21) - 样例值: policy_157f44c2_chunk_0 - Python类型: <class 'str'>
2025-07-01 09:22:51,613 - vector_store - INFO - 验证字段 policy_id (Milvus类型: 21) - 样例值: policy_157f44c2 - Python类型: <class 'str'>
2025-07-01 09:22:51,613 - vector_store - INFO - 验证字段 content (Milvus类型: 21) - 样例值: 北京市产业政策导引 
（市级版） - Python类型: <class 'str'>
2025-07-01 09:22:51,613 - vector_store - INFO - 验证字段 section (Milvus类型: 21) - 样例值: 开篇 - Python类型: <class 'str'>
2025-07-01 09:22:51,614 - vector_store - INFO - 验证字段 chunk_type (Milvus类型: 21) - 样例值: text - Python类型: <class 'str'>
2025-07-01 09:22:51,614 - vector_store - INFO - 验证字段 embedding (Milvus类型: 101) - 样例值: [-0.009589307941496372, 0.02911415882408619, -0.017605118453502655, 0.04515969753265381, -0.008898379281163216, -0.0004742610326502472, 0.03711366653442383, 0.009216396138072014, -0.028580965474247932, -0.004692758899182081, 0.061252694576978683, 0.004142737481743097, -0.00015245744725689292, -0.03795205056667328, -0.05199399217963219, -0.047508805990219116, 0.03326359763741493, 0.042946770787239075, -0.05036120489239693, -0.0045363628305494785, 0.03374297171831131, -0.013076845556497574, -0.028622999787330627, 0.011045549064874649, -0.008509015664458275, 0.009151282720267773, 0.0024055256508290768, -0.0009728657896630466, -0.033678777515888214, 0.0015214345185086131, 0.03267497941851616, -0.057704951614141464, -0.01816404238343239, 0.001693681930191815, -0.003161015221849084, 0.024775955826044083, -0.013540956191718578, -0.02623024582862854, 0.05934133008122444, 0.029546277597546577, -0.012443392537534237, 0.04352046549320221, -0.0014886443968862295, -0.008488436229526997, -0.008628182113170624, 0.027824610471725464, -0.006604868918657303, -0.00821163970977068, -0.040158990770578384, 0.009263608604669571, -0.007601940538734198, 0.3768092393875122, -0.01491926796734333, 0.005379746202379465, -0.04145354405045509, 0.06345204263925552, -0.03630485385656357, -0.009675629436969757, 0.010845758020877838, 0.039076875895261765, -0.005835541058331728, -0.01878809928894043, 0.0059173936024308205, -0.021044433116912842, 0.026823166757822037, -0.02284947596490383, -0.0548282191157341, -0.035297710448503494, 0.028276700526475906, -0.027777930721640587, 0.022341134026646614, -0.028723761439323425, 0.010176535695791245, -0.001923352712765336, 0.03312109410762787, 0.024043748155236244, 0.011900484561920166, -0.00845291931182146, 0.0014036806533113122, -0.012982417829334736, 0.014434284530580044, 0.0502677857875824, -0.012608615681529045, 0.0030357795767486095, -0.08627171814441681, -0.01438103336840868, -0.0019654601346701384, 0.021047798916697502, 0.013121829368174076, 0.0571318045258522, -0.06971745193004608, -0.053690601140260696, -0.005233254283666611, -0.008413158357143402, -0.02017509937286377, 0.002872430719435215, 0.053301695734262466, -0.05862448364496231, -0.036340124905109406, -0.00010847074736375362, 0.03970731794834137, -0.013180913403630257, -0.010341119952499866, -0.04928994178771973, 0.07712284475564957, 0.014791151508688927, -0.059449516236782074, 0.0129732396453619, 0.019919831305742264, -0.010746200568974018, -0.02472183108329773, -0.03969830274581909, 0.0226453747600317, 0.02169407159090042, -0.04375375062227249, -0.018663236871361732, -0.0026338407769799232, -0.0037480355240404606, 0.027444249019026756, 0.004402159247547388, -0.008972407318651676, 0.039672669023275375, -0.008463398553431034, -0.060849398374557495, 0.024426542222499847, 0.009231614880263805, 0.0036453548818826675, 0.0406363308429718, -0.02083449438214302, 0.036203619092702866, 0.010913846082985401, -0.018755804747343063, 0.011556701734662056, -0.0160507969558239, 0.020260801538825035, 0.003158723935484886, -0.0055779810063540936, -0.041698843240737915, -0.03637868911027908, -0.035921353846788406, 0.06556741893291473, 0.029048891738057137, 0.04013197496533394, -0.051235370337963104, -0.04153929278254509, 0.005427155643701553, 0.008758113719522953, 0.011159452609717846, 0.043652091175317764, -0.040720127522945404, -0.004773605149239302, 0.030425705015659332, 0.038182493299245834, 0.001564845209941268, 0.020213427022099495, 0.030758051201701164, 0.02055022120475769, 0.028158511966466904, -0.07821311801671982, -0.038057200610637665, 0.039441123604774475, -0.003705583279952407, 0.044595569372177124, -0.004892559722065926, 0.019788745790719986, 0.007673455867916346, 0.02045273967087269, -0.07352282106876373, -0.025709766894578934, 0.010276333428919315, 0.010867963545024395, -0.01248021051287651, 0.008558572269976139, -0.019154522567987442, -0.013651279732584953, -0.0453471764922142, -0.019337618723511696, 0.012558511458337307, -0.04601521044969559, -0.030041612684726715, -0.028040865436196327, 0.032115161418914795, 0.020124176517128944, 0.024890819564461708, -0.034578800201416016, 0.03267127275466919, -0.048211950808763504, 0.005665671080350876, 0.05325033888220787, -0.013328064233064651, -0.01906873844563961, -0.010803215205669403, -0.024040287360548973, 0.0011679499875754118, 0.06144373491406441, 0.037063393741846085, -0.02414027974009514, 0.034590207040309906, 0.0002138784620910883, 0.012140613049268723, -0.02405504509806633, -0.05000852793455124, 0.004672967828810215, -0.01480168104171753, 0.006675413344055414, 0.0972711369395256, 0.034512847661972046, 0.06292875111103058, 0.009348156861960888, -0.01494918204843998, -0.06759670376777649, -0.06978300958871841, 0.0232897587120533, 0.05494898930191994, -0.008022705093026161, 0.030105656012892723, -0.09707214683294296, 0.038521941751241684, -0.019789280369877815, 0.04824909195303917, 0.06329125165939331, -0.028315721079707146, -0.01932419277727604, -0.021181587129831314, -0.026322539895772934, -0.01419211458414793, -0.0008855590131133795, 0.03259635716676712, -0.0033729998394846916, 0.021748656406998634, 0.02658071182668209, -0.01077377237379551, 0.02914053201675415, 0.010506127960979939, -0.00022930283739697188, 0.07139137387275696, -0.0288256723433733, 0.015812374651432037, 0.024732865393161774, -0.03838037699460983, -0.016788508743047714, 0.009803450666368008, 0.030756089836359024, -0.000818780914414674, 0.01877676323056221, -0.006893815007060766, -0.02332308515906334, -0.03040100447833538, -0.055977363139390945, -0.05616838485002518, 0.01870473474264145, 0.018247749656438828, 0.0018340129172429442, -0.05407395213842392, -0.023001838475465775, -0.02583295851945877, 0.02642855793237686, 0.04169720411300659, 0.03082786314189434, -0.03451421111822128, 0.005526895169168711, -0.03213411569595337, 0.02497667260468006, 0.0029323389753699303, 0.03324692323803902, -0.011319850571453571, -0.01809949427843094, -0.020266283303499222, -0.029924612492322922, -0.02093447931110859, -0.004756493493914604, 0.06777933239936829, 0.03589344397187233, -0.016932327300310135, 0.020171288400888443, -0.03975522518157959, 0.04156431183218956, -0.008397664874792099, -0.03129595145583153, -0.07036636769771576, 0.05021882429718971, 0.04966488480567932, 0.03049454838037491, -0.028772899881005287, -0.018010294064879417, -0.04312371090054512, 0.0046417745761573315, 0.03925392031669617, -0.019701730459928513, -0.053943932056427, -0.030901964753866196, -0.029882483184337616, 0.01791478507220745, 0.027659915387630463, 0.08985470980405807, -0.05198268964886665, -0.03677350655198097, 0.018498342484235764, -0.03612259402871132, 0.0012379527324810624, 0.05046892166137695, -0.03301394730806351, 0.018706364557147026, 0.01413088757544756, -0.01602291315793991, 0.027428526431322098, 0.026961391791701317, -0.0035943014081567526, 0.017675628885626793, -0.02199414186179638, 0.03260156139731407, -0.023268917575478554, -0.023493386805057526, -0.02067587524652481, -0.0018503885949030519, 0.007983824238181114, -0.03271932154893875, 0.0006211347645148635, -0.01979614980518818, -0.005424872972071171, 0.039955489337444305, -0.010059586726129055, 0.000972070440184325, 0.10771221667528152, 0.06482519954442978, 0.03266149386763573, 0.02456350065767765, 0.00936193484812975, -0.008178982883691788, 0.05346611514687538, 0.028918839991092682, -0.07390716671943665, -0.006112892646342516, 0.028687957674264908, 0.054268978536129, 0.06121604144573212, -0.007828090339899063, -0.03363944590091705, -0.03989904373884201, 0.015971971675753593, -0.007727424614131451, -0.032877519726753235, 0.016885342076420784, -0.010724813677370548, -0.016950199380517006, -0.01989579387009144, -0.00168701377697289, -0.051006659865379333, -0.0014523814897984266, -0.04616301879286766, -0.030870657414197922, 1.5738576621515676e-05, -0.03532016649842262, -0.01884891837835312, -0.014430598355829716, -0.014676989056169987, 0.057766810059547424, 0.006159622687846422, 0.02132817544043064, 0.03129813075065613, -0.016254132613539696, -0.019971000030636787, -0.044640813022851944, 0.02695411629974842, -0.008467409759759903, 0.00490883132442832, 0.030902333557605743, -0.020411167293787003, -0.055149175226688385, -0.02834024652838707, 0.026349080726504326, 0.010783246718347073, 0.05821895971894264, -0.0026978147216141224, 0.03953702002763748, 0.01787497103214264, -0.05887347087264061, -0.00027197625604458153, -0.028730303049087524, -0.02215060405433178, 0.07047837227582932, -0.032375890761613846, -0.00011279471073066816, 0.01315301563590765, -0.0010450751287862659, 0.020898284390568733, -0.013241070322692394, -0.024628158658742905, -0.019909389317035675, -0.05343034118413925, 0.0022840951569378376, -0.017856450751423836, 0.03752543777227402, 0.024396277964115143, -0.004686280619353056, -0.016203105449676514, -0.009482908993959427, 0.03407151252031326, -0.002740207128226757, 0.03272382542490959, 0.02651531621813774, -0.058525729924440384, -0.023655390366911888, -0.011790175922214985, 0.03925531357526779, 0.013866443186998367, 0.04840943589806557, 0.01433261763304472, 0.033368755131959915, -0.017562948167324066, -0.07722582668066025, 0.010781972669064999, -0.01323713455349207, -0.058862410485744476, 0.05883099511265755, -0.043963633477687836, -0.03357572853565216, 0.00797117967158556, 0.033708181232213974, -0.0786106288433075, 0.026821736246347427, 0.022951070219278336, -0.011617700569331646, 0.021849937736988068, 0.03693987429141998, -0.001659695990383625, -0.0061637707985937595, -0.044292062520980835, 0.07012653350830078, 0.013633946888148785, 0.008747246116399765, -0.006612675730139017, 0.013270584866404533, -0.014857371337711811, -0.011432196013629436, 0.0065117403864860535, -0.01404486782848835, 0.01858045533299446, -0.02486853487789631, -0.01836327649652958, -0.024927770718932152, 0.02749050408601761, 0.0044959415681660175, -0.008484087884426117, 0.003905565943568945, 0.00446905056014657, -0.02270268090069294, -0.052917368710041046, -0.010605140589177608, 0.00709659606218338, 0.05721830576658249, 0.05082769691944122, 0.004808859899640083, -0.04757297411561012, 0.017576342448592186, -0.01816967874765396, 0.0019217076478525996, -0.019937697798013687, 0.05922657623887062, -0.023297931998968124, -0.009335382841527462, 0.019768856465816498, -0.02407260239124298, 0.029455088078975677, 0.041888874024152756, 0.03524501621723175, -0.03877586871385574, -0.04179271683096886, 0.06196897104382515, -0.007987288758158684, -0.04283953458070755, 0.06542922556400299, 0.0064946124330163, 0.008456920273602009, -0.02566426247358322, 0.020016202703118324, -0.001562338089570403, -0.0006199604249559343, -0.027312463149428368, -0.04545450210571289, 0.011615592055022717, -0.01337212324142456, 0.020239297300577164, -0.023537753149867058, -0.003997112158685923, -0.004092201124876738, -0.02057114616036415, -0.011246242560446262, 0.00971840787678957, -0.008114401251077652, -0.07252760231494904, -0.016493696719408035, 0.04132617264986038, -0.04882003739476204, -0.0026445596013218164, -0.0009650048450566828, 0.018796775490045547, 0.046294763684272766, -0.059855569154024124, 0.04281643033027649, -0.04874449595808983, 0.0025613352190703154, -0.01081911288201809, -0.0037697977386415005, 0.031707651913166046, -0.021693317219614983, 0.015387540683150291, -0.01732710190117359, -0.015074243769049644, 0.0418533980846405, 0.034862905740737915, 0.005694030784070492, 0.0007337104761973023, 0.03324953466653824, 0.001326580299064517, 0.028315981850028038, -0.030011458322405815, -0.012086973525583744, 0.007019157521426678, 0.012758257798850536, -0.0004404193314258009, -0.03769683092832565, -0.011248038150370121, 0.041032496839761734, -0.019792452454566956, 0.02623436599969864, 0.002371096983551979, -0.03930090367794037, 0.0002622672473080456, 0.04479384422302246, -0.035239823162555695, -0.06436390429735184, -0.005533753894269466, 0.021474644541740417, 0.006803956348448992, 0.033541347831487656, -0.015958765521645546, 0.0075390939600765705, -0.08871641755104065, -0.056117936968803406, 0.009939104318618774, 0.0015055258991196752, 0.05826868116855621, -0.02165314555168152, 0.021653825417160988, -0.057069793343544006, -0.026611806824803352, -0.013909755274653435, 0.06283603608608246, 0.012419736944139004, -0.04626639932394028, 0.01178447250276804, -0.03799920156598091, 0.010784066282212734, -0.02245737984776497, 0.022549331188201904, -0.07572583854198456, -0.017417579889297485, 0.033408280462026596, -0.03186677768826485, 0.02544129081070423, -0.03759037330746651, 0.004175000824034214, -0.035863246768713, -0.004104748833924532, 0.04276532679796219, -0.020994527265429497, 0.017737165093421936, 0.016124460846185684, -0.0408937931060791, -0.02875874936580658, 0.03717256337404251, 0.004172440618276596, 0.021906953305006027, -0.046760935336351395, -0.060809068381786346, -0.014605913311243057, -0.01680750772356987, 0.024257700890302658, 0.03192616254091263, 0.019896337762475014, 0.07277151942253113, -0.03467482328414917, -0.0296962708234787, -0.020838161930441856, -0.04029468074440956, 0.027133222669363022, -0.054488155990839005, 0.020477961748838425, 0.00099698337726295, -0.007412747014313936, -0.0006891798693686724, 0.008630702272057533, 0.07006815820932388, -0.0006025220500305295, 0.006870594806969166, -0.02347354218363762, -0.004952014423906803, -0.012581387534737587, 0.0016122444067150354, -0.003527534892782569, -0.009774364531040192, 0.012716458179056644, 0.0009260065853595734, 0.03004925511777401, 0.011623555794358253, 0.06507840007543564, -0.050444841384887695, 0.008790462277829647, -0.02803892455995083, -0.06705816090106964, 0.02005065605044365, 0.035633061081171036, 0.0002218412992078811, 0.0780092179775238, -0.018138019368052483, -0.023708099499344826, 0.010249351151287556, -0.035801246762275696, -0.0019092432921752334, -0.029957309365272522, -0.007117624394595623, 0.01950136199593544, 0.03664879873394966, -0.020137088373303413, -0.023347266018390656, 0.08971085399389267, 0.00516971480101347, 0.050085872411727905, -0.022632304579019547, -0.005027259234338999, -0.027102002874016762, 0.06915169954299927, 0.0013029997935518622, 0.017689192667603493, 0.009980677627027035, -0.008764904923737049, -0.03800809383392334, -0.029612688347697258, 0.05087962746620178, 0.032240815460681915, -0.009346778504550457, -0.02199050784111023, -0.025282803922891617, 0.014376815408468246, 0.03630366548895836, 0.0656920075416565, -0.014159136451780796, 0.01677713729441166, -0.036684345453977585, 0.04181422293186188, -0.03661084547638893, -0.0009762952686287463, -0.020955290645360947, 0.037498973309993744, -0.021638048812747, 0.0194693636149168, -0.009985314682126045, -0.08341575413942337, -0.0021505558397620916, 0.0004300408763810992, -0.03864736109972, 0.09971991181373596, -0.0420842319726944, -0.0013092535082250834, -0.0484723262488842, 0.019459035247564316, -0.01095435582101345, 0.020641816779971123, 0.07297729700803757, 0.060642678290605545, 0.026820100843906403, 0.010149716399610043, -0.042748551815748215, -0.02918965183198452, -0.034213971346616745, 0.08885794132947922, -0.025734225288033485, 0.02929290570318699, -0.0154344467446208, -0.044630784541368484, 0.03935050219297409, 0.01972702145576477, -0.037364643067121506, -0.016189686954021454, -0.07640594244003296, -0.018994292244315147, 0.018101777881383896, -0.014673523604869843, 0.02799123339354992, -0.010238418355584145, 0.01709965616464615, -0.019193274900317192, 0.04031998664140701, -0.03897527605295181, 0.10559485107660294, -0.054177287966012955, 0.023972777649760246, 0.005270805209875107, -0.04176589474081993, 0.05416272580623627, 0.030821776017546654, -0.025223834440112114, 0.0030505741015076637, 0.016425693407654762, 0.006580985151231289, -0.02823006734251976, -0.009023276157677174, -0.056368544697761536, -0.004875159356743097, -0.02268892526626587, -0.0034240498207509518, 0.03267257660627365, -0.03636043891310692, 0.04608139395713806, -0.04523656144738197, -0.010927774012088776, -0.005379600916057825, 0.03045721910893917, 0.0389670729637146, 0.028936419636011124, -0.029645929113030434, 0.030180001631379128, 0.003528584260493517, -0.017787493765354156, 0.05465669929981232, 0.02838345430791378, 0.06302227824926376, 0.029360666871070862, -0.017426690086722374, 0.0001560311357025057, -0.051588669419288635, -0.002858480205759406, -0.05941910296678543, 0.009235854260623455, 0.01826690323650837, -0.03919863700866699, 0.004400157369673252, -0.007518859580159187, -0.0030373611953109503, -0.06218826398253441, 0.0023394592572003603, 0.06459461897611618, 0.025311214849352837, -0.07068324089050293, -0.07035823166370392, -0.011732452549040318, -0.0036581538151949644, 0.03272993490099907, 0.06999839842319489, -0.013980642892420292, -0.010885556228458881, 0.04285767301917076, 0.012768624350428581, 0.035443015396595, -0.015054207295179367, 0.015541168861091137, -0.01729157753288746, 0.05152300000190735, 0.031376104801893234, -0.055162589997053146, -0.04728157818317413, 0.016747761517763138, -0.011066374368965626, -0.023549759760499, -0.04256664589047432, -0.029114289209246635, -0.007128818891942501] - Python类型: <class 'list'>
2025-07-01 09:22:54,859 - vector_store - INFO - 成功插入 910 个分块到Milvus
2025-07-01 09:22:54,889 - vector_store - INFO - 准备索引 910 个文档到ES
2025-07-01 09:22:55,057 - elastic_transport.transport - INFO - PUT http://localhost:9200/_bulk [status:200 duration:0.060s]
2025-07-01 09:22:55,059 - vector_store - ERROR - ES批量索引异常: 500 document(s) failed to index.
2025-07-01 09:22:55,060 - vector_store - WARNING - ES存储失败，但Milvus存储成功，系统继续运行
2025-07-01 09:22:55,060 - policy_matcher - INFO - 政策文档添加成功: 北京市产业政策导引.pdf
2025-07-01 09:22:55,063 - __main__ - INFO - 政策文档加载成功
2025-07-01 09:22:55,064 - __main__ - INFO - 系统初始化完成
2025-07-01 09:22:55,069 - __main__ - INFO - 开始测试查询...
2025-07-01 09:22:55,070 - __main__ - INFO - 
=== 测试查询 1: 生物医药行业政策查询 ===
2025-07-01 09:22:55,070 - __main__ - INFO - 查询: 我想查找和生物医药相关的政策
2025-07-01 09:22:55,071 - policy_matcher - INFO - 开始政策匹配: 我想查找和生物医药相关的政策
2025-07-01 09:22:55,073 - retriever - INFO - 开始混合检索: 我想查找和生物医药相关的政策
2025-07-01 09:22:55,074 - retriever - INFO - 查询扩展: 我想查找和生物医药相关的政策 -> ['制药', '我想查找和生物医药相关的政策', '医疗器械', '医疗', '医药健康', '生命科学', '医药']
2025-07-01 09:22:55,074 - retriever - INFO - 构建过滤条件: {}
2025-07-01 09:22:55,669 - vector_store - INFO - Milvus搜索返回 10 个结果
2025-07-01 09:22:55,669 - retriever - INFO - 向量搜索返回 10 个结果
2025-07-01 09:22:55,727 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.057s]
2025-07-01 09:22:55,728 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:22:55,743 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.015s]
2025-07-01 09:22:55,743 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:22:55,750 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.006s]
2025-07-01 09:22:55,750 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:22:55,750 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 09:22:55,750 - retriever - INFO - 融合结果: 10 个结果
2025-07-01 09:22:55,750 - retriever - INFO - 检索完成，返回 5 个结果
2025-07-01 09:22:55,755 - policy_matcher - INFO - 政策匹配完成，耗时: 0.68秒，返回: 1个结果
2025-07-01 09:22:55,755 - __main__ - INFO - 查询结果: 找到 1 个匹配政策
2025-07-01 09:22:55,755 - __main__ - INFO - 处理时间: 0.68秒
2025-07-01 09:22:55,756 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 09:22:55,756 - __main__ - INFO -      相关性: 0.331
2025-07-01 09:22:55,756 - __main__ - INFO -      摘要: 政策类型：资金支持 | 主要内容：给予奖励，单个药品奖励；给予奖励；给予奖励，单个品种奖励... | 适用条件：应急审批/工信部揭榜挂帅入围医疗器械，且确；必需易短缺药品重点监测清单》中新上市的本市注...
2025-07-01 09:22:55,756 - __main__ - INFO - 建议:
2025-07-01 09:22:55,756 - __main__ - INFO -   - 相关政策较少，建议：
2025-07-01 09:22:55,756 - __main__ - INFO -   - 1. 扩大查询范围，考虑相关行业政策
2025-07-01 09:22:55,756 - __main__ - INFO -   - 2. 关注上级政府的通用性政策
2025-07-01 09:22:55,756 - __main__ - INFO - 
=== 测试查询 2: 初创企业政策查询 ===
2025-07-01 09:22:55,756 - __main__ - INFO - 查询: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 09:22:55,756 - policy_matcher - INFO - 开始政策匹配: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 09:22:55,756 - retriever - INFO - 开始混合检索: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 09:22:55,756 - retriever - INFO - 查询扩展: 我是一家小型初创企业，现阶段有什么政策比较适用 -> ['小企业', '起步', '创业', '新成立', '小微', '我是一家小型初创企业 现阶段有什么政策比较适用']
2025-07-01 09:22:55,757 - retriever - INFO - 构建过滤条件: {}
2025-07-01 09:22:55,935 - vector_store - INFO - Milvus搜索返回 10 个结果
2025-07-01 09:22:55,935 - retriever - INFO - 向量搜索返回 10 个结果
2025-07-01 09:22:55,944 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.009s]
2025-07-01 09:22:55,944 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:22:55,949 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 09:22:55,949 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:22:55,954 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.005s]
2025-07-01 09:22:55,955 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:22:55,955 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 09:22:55,955 - retriever - INFO - 融合结果: 10 个结果
2025-07-01 09:22:55,955 - retriever - INFO - 企业规模过滤: 5 -> 5
2025-07-01 09:22:55,955 - retriever - INFO - 检索完成，返回 5 个结果
2025-07-01 09:22:55,955 - policy_matcher - INFO - 政策匹配完成，耗时: 0.20秒，返回: 1个结果
2025-07-01 09:22:55,955 - __main__ - INFO - 查询结果: 找到 1 个匹配政策
2025-07-01 09:22:55,955 - __main__ - INFO - 处理时间: 0.20秒
2025-07-01 09:22:55,955 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 09:22:55,956 - __main__ - INFO -      相关性: 0.338
2025-07-01 09:22:55,956 - __main__ - INFO -      摘要: 政策类型：税收优惠 | 主要内容：给予资金支持；给予不超过30 万元的资金支持；给予不超过20 万元的资金支持... | 适用条件：要求 | 纳入支持的科技型小微企业须满足以下条件：；当年入库的科技型...
2025-07-01 09:22:55,956 - __main__ - INFO - 建议:
2025-07-01 09:22:55,956 - __main__ - INFO -   - 相关政策较少，建议：
2025-07-01 09:22:55,956 - __main__ - INFO -   - 1. 扩大查询范围，考虑相关行业政策
2025-07-01 09:22:55,956 - __main__ - INFO -   - 2. 关注上级政府的通用性政策
2025-07-01 09:22:55,956 - __main__ - INFO - 
=== 测试查询 3: 创新资金政策查询 ===
2025-07-01 09:22:55,956 - __main__ - INFO - 查询: 有哪些研发创新方面的资金支持政策
2025-07-01 09:22:55,956 - policy_matcher - INFO - 开始政策匹配: 有哪些研发创新方面的资金支持政策
2025-07-01 09:22:55,956 - retriever - INFO - 开始混合检索: 有哪些研发创新方面的资金支持政策
2025-07-01 09:22:55,956 - retriever - INFO - 查询扩展: 有哪些研发创新方面的资金支持政策 -> ['专利', '专项资金', '资助', '研发', '科技', '技术', '奖励', '有哪些研发创新方面的资金支持政策', '补贴']
2025-07-01 09:22:55,956 - retriever - INFO - 构建过滤条件: {}
2025-07-01 09:22:56,051 - vector_store - INFO - Milvus搜索返回 10 个结果
2025-07-01 09:22:56,052 - retriever - INFO - 向量搜索返回 10 个结果
2025-07-01 09:22:56,059 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.007s]
2025-07-01 09:22:56,059 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:22:56,064 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.005s]
2025-07-01 09:22:56,065 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:22:56,068 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 09:22:56,068 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:22:56,068 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 09:22:56,068 - retriever - INFO - 融合结果: 10 个结果
2025-07-01 09:22:56,068 - retriever - INFO - 检索完成，返回 5 个结果
2025-07-01 09:22:56,069 - policy_matcher - INFO - 政策匹配完成，耗时: 0.11秒，返回: 1个结果
2025-07-01 09:22:56,069 - __main__ - INFO - 查询结果: 找到 1 个匹配政策
2025-07-01 09:22:56,069 - __main__ - INFO - 处理时间: 0.11秒
2025-07-01 09:22:56,069 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 09:22:56,069 - __main__ - INFO -      相关性: 0.522
2025-07-01 09:22:56,069 - __main__ - INFO -      摘要: 政策类型：资金支持 | 主要内容：给予支持；给予不超过 2000万元资金支持；给予支持... | 适用条件：要求 ；应用且取得显著成效的技术（服务），......
2025-07-01 09:22:56,069 - __main__ - INFO - 建议:
2025-07-01 09:22:56,069 - __main__ - INFO -   - 相关政策较少，建议：
2025-07-01 09:22:56,069 - __main__ - INFO -   - 1. 扩大查询范围，考虑相关行业政策
2025-07-01 09:22:56,069 - __main__ - INFO -   - 2. 关注上级政府的通用性政策
2025-07-01 09:22:56,069 - __main__ - INFO - 启动API服务...
2025-07-01 09:23:35,221 - __main__ - INFO - 启动政策匹配RAG检索系统
2025-07-01 09:23:35,221 - __main__ - INFO - 正在初始化政策匹配系统...
2025-07-01 09:23:36,130 - vector_store - INFO - 已连接到Milvus: localhost:19530
2025-07-01 09:23:36,137 - vector_store - INFO - 加载现有集合: policy_collection
2025-07-01 09:23:36,155 - elastic_transport.transport - INFO - HEAD http://localhost:9200/ [status:200 duration:0.009s]
2025-07-01 09:23:36,155 - vector_store - INFO - 已连接到Elasticsearch: localhost:9200
2025-07-01 09:23:36,158 - elastic_transport.transport - INFO - HEAD http://localhost:9200/policy_index [status:200 duration:0.003s]
2025-07-01 09:23:36,159 - vector_store - INFO - Elasticsearch索引就绪: policy_index
2025-07-01 09:23:36,166 - elastic_transport.transport - INFO - GET http://localhost:9200/policy_index/_stats [status:200 duration:0.006s]
2025-07-01 09:23:39,436 - embeddings - INFO - 正在加载嵌入模型: moka-ai/m3e-base
2025-07-01 09:23:39,437 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: moka-ai/m3e-base
2025-07-01 09:23:44,521 - embeddings - INFO - 模型加载完成，使用设备: cpu
2025-07-01 09:23:44,522 - __main__ - INFO - 系统状态: {'status': '运行中', 'vector_store': {'milvus_connected': True, 'elasticsearch_connected': True, 'milvus_stats': {'row_count': 1820}, 'elasticsearch_stats': {'doc_count': 0, 'store_size': 227}}, 'embedding_model': {'status': 'loaded', 'model_name': 'moka-ai/m3e-base', 'device': 'cpu', 'embedding_dim': 768, 'max_seq_length': 512}, 'components': {'document_processor': '正常', 'retriever': '正常', 'matcher': '正常'}}
2025-07-01 09:23:44,522 - __main__ - INFO - 发现政策文档: 北京市产业政策导引.pdf，开始加载...
2025-07-01 09:23:44,522 - policy_matcher - INFO - 开始添加政策文档: 北京市产业政策导引.pdf
2025-07-01 09:23:44,861 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-07-01 09:23:44,862 - jieba - DEBUG - Loading model from cache /var/folders/w7/v83dx60s0wnf6qh99wjhckhc0000gn/T/jieba.cache
2025-07-01 09:23:45,135 - jieba - DEBUG - Loading model cost 0.273 seconds.
2025-07-01 09:23:45,135 - jieba - DEBUG - Prefix dict has been built successfully.
2025-07-01 09:23:45,136 - document_processor - INFO - 开始处理文档: 北京市产业政策导引.pdf
2025-07-01 09:23:56,553 - document_processor - INFO - 文档处理完成: 北京市产业政策导引.pdf, 生成 910 个分块
2025-07-01 09:23:56,555 - embeddings - INFO - 开始编码 910 个文本
2025-07-01 09:25:26,545 - embeddings - INFO - 编码完成，输出形状: (910, 768)
2025-07-01 09:25:26,559 - vector_store - INFO - 准备插入数据: chunks数量=910, embeddings形状=(910, 768)
2025-07-01 09:25:26,559 - vector_store - INFO - chunk_ids类型: <class 'list'>, 样例: ['policy_157f44c2_chunk_0', 'policy_157f44c2_chunk_1']
2025-07-01 09:25:26,559 - vector_store - INFO - embedding_list类型: <class 'list'>, 长度: 910
2025-07-01 09:25:26,559 - vector_store - INFO - 验证字段 chunk_id (Milvus类型: 21) - 样例值: policy_157f44c2_chunk_0 - Python类型: <class 'str'>
2025-07-01 09:25:26,560 - vector_store - INFO - 验证字段 policy_id (Milvus类型: 21) - 样例值: policy_157f44c2 - Python类型: <class 'str'>
2025-07-01 09:25:26,560 - vector_store - INFO - 验证字段 content (Milvus类型: 21) - 样例值: 北京市产业政策导引 
（市级版） - Python类型: <class 'str'>
2025-07-01 09:25:26,560 - vector_store - INFO - 验证字段 section (Milvus类型: 21) - 样例值: 开篇 - Python类型: <class 'str'>
2025-07-01 09:25:26,560 - vector_store - INFO - 验证字段 chunk_type (Milvus类型: 21) - 样例值: text - Python类型: <class 'str'>
2025-07-01 09:25:26,560 - vector_store - INFO - 验证字段 embedding (Milvus类型: 101) - 样例值: [-0.009589307941496372, 0.02911415882408619, -0.017605118453502655, 0.04515969753265381, -0.008898379281163216, -0.0004742610326502472, 0.03711366653442383, 0.009216396138072014, -0.028580965474247932, -0.004692758899182081, 0.061252694576978683, 0.004142737481743097, -0.00015245744725689292, -0.03795205056667328, -0.05199399217963219, -0.047508805990219116, 0.03326359763741493, 0.042946770787239075, -0.05036120489239693, -0.0045363628305494785, 0.03374297171831131, -0.013076845556497574, -0.028622999787330627, 0.011045549064874649, -0.008509015664458275, 0.009151282720267773, 0.0024055256508290768, -0.0009728657896630466, -0.033678777515888214, 0.0015214345185086131, 0.03267497941851616, -0.057704951614141464, -0.01816404238343239, 0.001693681930191815, -0.003161015221849084, 0.024775955826044083, -0.013540956191718578, -0.02623024582862854, 0.05934133008122444, 0.029546277597546577, -0.012443392537534237, 0.04352046549320221, -0.0014886443968862295, -0.008488436229526997, -0.008628182113170624, 0.027824610471725464, -0.006604868918657303, -0.00821163970977068, -0.040158990770578384, 0.009263608604669571, -0.007601940538734198, 0.3768092393875122, -0.01491926796734333, 0.005379746202379465, -0.04145354405045509, 0.06345204263925552, -0.03630485385656357, -0.009675629436969757, 0.010845758020877838, 0.039076875895261765, -0.005835541058331728, -0.01878809928894043, 0.0059173936024308205, -0.021044433116912842, 0.026823166757822037, -0.02284947596490383, -0.0548282191157341, -0.035297710448503494, 0.028276700526475906, -0.027777930721640587, 0.022341134026646614, -0.028723761439323425, 0.010176535695791245, -0.001923352712765336, 0.03312109410762787, 0.024043748155236244, 0.011900484561920166, -0.00845291931182146, 0.0014036806533113122, -0.012982417829334736, 0.014434284530580044, 0.0502677857875824, -0.012608615681529045, 0.0030357795767486095, -0.08627171814441681, -0.01438103336840868, -0.0019654601346701384, 0.021047798916697502, 0.013121829368174076, 0.0571318045258522, -0.06971745193004608, -0.053690601140260696, -0.005233254283666611, -0.008413158357143402, -0.02017509937286377, 0.002872430719435215, 0.053301695734262466, -0.05862448364496231, -0.036340124905109406, -0.00010847074736375362, 0.03970731794834137, -0.013180913403630257, -0.010341119952499866, -0.04928994178771973, 0.07712284475564957, 0.014791151508688927, -0.059449516236782074, 0.0129732396453619, 0.019919831305742264, -0.010746200568974018, -0.02472183108329773, -0.03969830274581909, 0.0226453747600317, 0.02169407159090042, -0.04375375062227249, -0.018663236871361732, -0.0026338407769799232, -0.0037480355240404606, 0.027444249019026756, 0.004402159247547388, -0.008972407318651676, 0.039672669023275375, -0.008463398553431034, -0.060849398374557495, 0.024426542222499847, 0.009231614880263805, 0.0036453548818826675, 0.0406363308429718, -0.02083449438214302, 0.036203619092702866, 0.010913846082985401, -0.018755804747343063, 0.011556701734662056, -0.0160507969558239, 0.020260801538825035, 0.003158723935484886, -0.0055779810063540936, -0.041698843240737915, -0.03637868911027908, -0.035921353846788406, 0.06556741893291473, 0.029048891738057137, 0.04013197496533394, -0.051235370337963104, -0.04153929278254509, 0.005427155643701553, 0.008758113719522953, 0.011159452609717846, 0.043652091175317764, -0.040720127522945404, -0.004773605149239302, 0.030425705015659332, 0.038182493299245834, 0.001564845209941268, 0.020213427022099495, 0.030758051201701164, 0.02055022120475769, 0.028158511966466904, -0.07821311801671982, -0.038057200610637665, 0.039441123604774475, -0.003705583279952407, 0.044595569372177124, -0.004892559722065926, 0.019788745790719986, 0.007673455867916346, 0.02045273967087269, -0.07352282106876373, -0.025709766894578934, 0.010276333428919315, 0.010867963545024395, -0.01248021051287651, 0.008558572269976139, -0.019154522567987442, -0.013651279732584953, -0.0453471764922142, -0.019337618723511696, 0.012558511458337307, -0.04601521044969559, -0.030041612684726715, -0.028040865436196327, 0.032115161418914795, 0.020124176517128944, 0.024890819564461708, -0.034578800201416016, 0.03267127275466919, -0.048211950808763504, 0.005665671080350876, 0.05325033888220787, -0.013328064233064651, -0.01906873844563961, -0.010803215205669403, -0.024040287360548973, 0.0011679499875754118, 0.06144373491406441, 0.037063393741846085, -0.02414027974009514, 0.034590207040309906, 0.0002138784620910883, 0.012140613049268723, -0.02405504509806633, -0.05000852793455124, 0.004672967828810215, -0.01480168104171753, 0.006675413344055414, 0.0972711369395256, 0.034512847661972046, 0.06292875111103058, 0.009348156861960888, -0.01494918204843998, -0.06759670376777649, -0.06978300958871841, 0.0232897587120533, 0.05494898930191994, -0.008022705093026161, 0.030105656012892723, -0.09707214683294296, 0.038521941751241684, -0.019789280369877815, 0.04824909195303917, 0.06329125165939331, -0.028315721079707146, -0.01932419277727604, -0.021181587129831314, -0.026322539895772934, -0.01419211458414793, -0.0008855590131133795, 0.03259635716676712, -0.0033729998394846916, 0.021748656406998634, 0.02658071182668209, -0.01077377237379551, 0.02914053201675415, 0.010506127960979939, -0.00022930283739697188, 0.07139137387275696, -0.0288256723433733, 0.015812374651432037, 0.024732865393161774, -0.03838037699460983, -0.016788508743047714, 0.009803450666368008, 0.030756089836359024, -0.000818780914414674, 0.01877676323056221, -0.006893815007060766, -0.02332308515906334, -0.03040100447833538, -0.055977363139390945, -0.05616838485002518, 0.01870473474264145, 0.018247749656438828, 0.0018340129172429442, -0.05407395213842392, -0.023001838475465775, -0.02583295851945877, 0.02642855793237686, 0.04169720411300659, 0.03082786314189434, -0.03451421111822128, 0.005526895169168711, -0.03213411569595337, 0.02497667260468006, 0.0029323389753699303, 0.03324692323803902, -0.011319850571453571, -0.01809949427843094, -0.020266283303499222, -0.029924612492322922, -0.02093447931110859, -0.004756493493914604, 0.06777933239936829, 0.03589344397187233, -0.016932327300310135, 0.020171288400888443, -0.03975522518157959, 0.04156431183218956, -0.008397664874792099, -0.03129595145583153, -0.07036636769771576, 0.05021882429718971, 0.04966488480567932, 0.03049454838037491, -0.028772899881005287, -0.018010294064879417, -0.04312371090054512, 0.0046417745761573315, 0.03925392031669617, -0.019701730459928513, -0.053943932056427, -0.030901964753866196, -0.029882483184337616, 0.01791478507220745, 0.027659915387630463, 0.08985470980405807, -0.05198268964886665, -0.03677350655198097, 0.018498342484235764, -0.03612259402871132, 0.0012379527324810624, 0.05046892166137695, -0.03301394730806351, 0.018706364557147026, 0.01413088757544756, -0.01602291315793991, 0.027428526431322098, 0.026961391791701317, -0.0035943014081567526, 0.017675628885626793, -0.02199414186179638, 0.03260156139731407, -0.023268917575478554, -0.023493386805057526, -0.02067587524652481, -0.0018503885949030519, 0.007983824238181114, -0.03271932154893875, 0.0006211347645148635, -0.01979614980518818, -0.005424872972071171, 0.039955489337444305, -0.010059586726129055, 0.000972070440184325, 0.10771221667528152, 0.06482519954442978, 0.03266149386763573, 0.02456350065767765, 0.00936193484812975, -0.008178982883691788, 0.05346611514687538, 0.028918839991092682, -0.07390716671943665, -0.006112892646342516, 0.028687957674264908, 0.054268978536129, 0.06121604144573212, -0.007828090339899063, -0.03363944590091705, -0.03989904373884201, 0.015971971675753593, -0.007727424614131451, -0.032877519726753235, 0.016885342076420784, -0.010724813677370548, -0.016950199380517006, -0.01989579387009144, -0.00168701377697289, -0.051006659865379333, -0.0014523814897984266, -0.04616301879286766, -0.030870657414197922, 1.5738576621515676e-05, -0.03532016649842262, -0.01884891837835312, -0.014430598355829716, -0.014676989056169987, 0.057766810059547424, 0.006159622687846422, 0.02132817544043064, 0.03129813075065613, -0.016254132613539696, -0.019971000030636787, -0.044640813022851944, 0.02695411629974842, -0.008467409759759903, 0.00490883132442832, 0.030902333557605743, -0.020411167293787003, -0.055149175226688385, -0.02834024652838707, 0.026349080726504326, 0.010783246718347073, 0.05821895971894264, -0.0026978147216141224, 0.03953702002763748, 0.01787497103214264, -0.05887347087264061, -0.00027197625604458153, -0.028730303049087524, -0.02215060405433178, 0.07047837227582932, -0.032375890761613846, -0.00011279471073066816, 0.01315301563590765, -0.0010450751287862659, 0.020898284390568733, -0.013241070322692394, -0.024628158658742905, -0.019909389317035675, -0.05343034118413925, 0.0022840951569378376, -0.017856450751423836, 0.03752543777227402, 0.024396277964115143, -0.004686280619353056, -0.016203105449676514, -0.009482908993959427, 0.03407151252031326, -0.002740207128226757, 0.03272382542490959, 0.02651531621813774, -0.058525729924440384, -0.023655390366911888, -0.011790175922214985, 0.03925531357526779, 0.013866443186998367, 0.04840943589806557, 0.01433261763304472, 0.033368755131959915, -0.017562948167324066, -0.07722582668066025, 0.010781972669064999, -0.01323713455349207, -0.058862410485744476, 0.05883099511265755, -0.043963633477687836, -0.03357572853565216, 0.00797117967158556, 0.033708181232213974, -0.0786106288433075, 0.026821736246347427, 0.022951070219278336, -0.011617700569331646, 0.021849937736988068, 0.03693987429141998, -0.001659695990383625, -0.0061637707985937595, -0.044292062520980835, 0.07012653350830078, 0.013633946888148785, 0.008747246116399765, -0.006612675730139017, 0.013270584866404533, -0.014857371337711811, -0.011432196013629436, 0.0065117403864860535, -0.01404486782848835, 0.01858045533299446, -0.02486853487789631, -0.01836327649652958, -0.024927770718932152, 0.02749050408601761, 0.0044959415681660175, -0.008484087884426117, 0.003905565943568945, 0.00446905056014657, -0.02270268090069294, -0.052917368710041046, -0.010605140589177608, 0.00709659606218338, 0.05721830576658249, 0.05082769691944122, 0.004808859899640083, -0.04757297411561012, 0.017576342448592186, -0.01816967874765396, 0.0019217076478525996, -0.019937697798013687, 0.05922657623887062, -0.023297931998968124, -0.009335382841527462, 0.019768856465816498, -0.02407260239124298, 0.029455088078975677, 0.041888874024152756, 0.03524501621723175, -0.03877586871385574, -0.04179271683096886, 0.06196897104382515, -0.007987288758158684, -0.04283953458070755, 0.06542922556400299, 0.0064946124330163, 0.008456920273602009, -0.02566426247358322, 0.020016202703118324, -0.001562338089570403, -0.0006199604249559343, -0.027312463149428368, -0.04545450210571289, 0.011615592055022717, -0.01337212324142456, 0.020239297300577164, -0.023537753149867058, -0.003997112158685923, -0.004092201124876738, -0.02057114616036415, -0.011246242560446262, 0.00971840787678957, -0.008114401251077652, -0.07252760231494904, -0.016493696719408035, 0.04132617264986038, -0.04882003739476204, -0.0026445596013218164, -0.0009650048450566828, 0.018796775490045547, 0.046294763684272766, -0.059855569154024124, 0.04281643033027649, -0.04874449595808983, 0.0025613352190703154, -0.01081911288201809, -0.0037697977386415005, 0.031707651913166046, -0.021693317219614983, 0.015387540683150291, -0.01732710190117359, -0.015074243769049644, 0.0418533980846405, 0.034862905740737915, 0.005694030784070492, 0.0007337104761973023, 0.03324953466653824, 0.001326580299064517, 0.028315981850028038, -0.030011458322405815, -0.012086973525583744, 0.007019157521426678, 0.012758257798850536, -0.0004404193314258009, -0.03769683092832565, -0.011248038150370121, 0.041032496839761734, -0.019792452454566956, 0.02623436599969864, 0.002371096983551979, -0.03930090367794037, 0.0002622672473080456, 0.04479384422302246, -0.035239823162555695, -0.06436390429735184, -0.005533753894269466, 0.021474644541740417, 0.006803956348448992, 0.033541347831487656, -0.015958765521645546, 0.0075390939600765705, -0.08871641755104065, -0.056117936968803406, 0.009939104318618774, 0.0015055258991196752, 0.05826868116855621, -0.02165314555168152, 0.021653825417160988, -0.057069793343544006, -0.026611806824803352, -0.013909755274653435, 0.06283603608608246, 0.012419736944139004, -0.04626639932394028, 0.01178447250276804, -0.03799920156598091, 0.010784066282212734, -0.02245737984776497, 0.022549331188201904, -0.07572583854198456, -0.017417579889297485, 0.033408280462026596, -0.03186677768826485, 0.02544129081070423, -0.03759037330746651, 0.004175000824034214, -0.035863246768713, -0.004104748833924532, 0.04276532679796219, -0.020994527265429497, 0.017737165093421936, 0.016124460846185684, -0.0408937931060791, -0.02875874936580658, 0.03717256337404251, 0.004172440618276596, 0.021906953305006027, -0.046760935336351395, -0.060809068381786346, -0.014605913311243057, -0.01680750772356987, 0.024257700890302658, 0.03192616254091263, 0.019896337762475014, 0.07277151942253113, -0.03467482328414917, -0.0296962708234787, -0.020838161930441856, -0.04029468074440956, 0.027133222669363022, -0.054488155990839005, 0.020477961748838425, 0.00099698337726295, -0.007412747014313936, -0.0006891798693686724, 0.008630702272057533, 0.07006815820932388, -0.0006025220500305295, 0.006870594806969166, -0.02347354218363762, -0.004952014423906803, -0.012581387534737587, 0.0016122444067150354, -0.003527534892782569, -0.009774364531040192, 0.012716458179056644, 0.0009260065853595734, 0.03004925511777401, 0.011623555794358253, 0.06507840007543564, -0.050444841384887695, 0.008790462277829647, -0.02803892455995083, -0.06705816090106964, 0.02005065605044365, 0.035633061081171036, 0.0002218412992078811, 0.0780092179775238, -0.018138019368052483, -0.023708099499344826, 0.010249351151287556, -0.035801246762275696, -0.0019092432921752334, -0.029957309365272522, -0.007117624394595623, 0.01950136199593544, 0.03664879873394966, -0.020137088373303413, -0.023347266018390656, 0.08971085399389267, 0.00516971480101347, 0.050085872411727905, -0.022632304579019547, -0.005027259234338999, -0.027102002874016762, 0.06915169954299927, 0.0013029997935518622, 0.017689192667603493, 0.009980677627027035, -0.008764904923737049, -0.03800809383392334, -0.029612688347697258, 0.05087962746620178, 0.032240815460681915, -0.009346778504550457, -0.02199050784111023, -0.025282803922891617, 0.014376815408468246, 0.03630366548895836, 0.0656920075416565, -0.014159136451780796, 0.01677713729441166, -0.036684345453977585, 0.04181422293186188, -0.03661084547638893, -0.0009762952686287463, -0.020955290645360947, 0.037498973309993744, -0.021638048812747, 0.0194693636149168, -0.009985314682126045, -0.08341575413942337, -0.0021505558397620916, 0.0004300408763810992, -0.03864736109972, 0.09971991181373596, -0.0420842319726944, -0.0013092535082250834, -0.0484723262488842, 0.019459035247564316, -0.01095435582101345, 0.020641816779971123, 0.07297729700803757, 0.060642678290605545, 0.026820100843906403, 0.010149716399610043, -0.042748551815748215, -0.02918965183198452, -0.034213971346616745, 0.08885794132947922, -0.025734225288033485, 0.02929290570318699, -0.0154344467446208, -0.044630784541368484, 0.03935050219297409, 0.01972702145576477, -0.037364643067121506, -0.016189686954021454, -0.07640594244003296, -0.018994292244315147, 0.018101777881383896, -0.014673523604869843, 0.02799123339354992, -0.010238418355584145, 0.01709965616464615, -0.019193274900317192, 0.04031998664140701, -0.03897527605295181, 0.10559485107660294, -0.054177287966012955, 0.023972777649760246, 0.005270805209875107, -0.04176589474081993, 0.05416272580623627, 0.030821776017546654, -0.025223834440112114, 0.0030505741015076637, 0.016425693407654762, 0.006580985151231289, -0.02823006734251976, -0.009023276157677174, -0.056368544697761536, -0.004875159356743097, -0.02268892526626587, -0.0034240498207509518, 0.03267257660627365, -0.03636043891310692, 0.04608139395713806, -0.04523656144738197, -0.010927774012088776, -0.005379600916057825, 0.03045721910893917, 0.0389670729637146, 0.028936419636011124, -0.029645929113030434, 0.030180001631379128, 0.003528584260493517, -0.017787493765354156, 0.05465669929981232, 0.02838345430791378, 0.06302227824926376, 0.029360666871070862, -0.017426690086722374, 0.0001560311357025057, -0.051588669419288635, -0.002858480205759406, -0.05941910296678543, 0.009235854260623455, 0.01826690323650837, -0.03919863700866699, 0.004400157369673252, -0.007518859580159187, -0.0030373611953109503, -0.06218826398253441, 0.0023394592572003603, 0.06459461897611618, 0.025311214849352837, -0.07068324089050293, -0.07035823166370392, -0.011732452549040318, -0.0036581538151949644, 0.03272993490099907, 0.06999839842319489, -0.013980642892420292, -0.010885556228458881, 0.04285767301917076, 0.012768624350428581, 0.035443015396595, -0.015054207295179367, 0.015541168861091137, -0.01729157753288746, 0.05152300000190735, 0.031376104801893234, -0.055162589997053146, -0.04728157818317413, 0.016747761517763138, -0.011066374368965626, -0.023549759760499, -0.04256664589047432, -0.029114289209246635, -0.007128818891942501] - Python类型: <class 'list'>
2025-07-01 09:25:29,398 - vector_store - INFO - 成功插入 910 个分块到Milvus
2025-07-01 09:25:29,467 - vector_store - INFO - 准备索引 910 个文档到ES
2025-07-01 09:25:29,573 - elastic_transport.transport - INFO - PUT http://localhost:9200/_bulk [status:200 duration:0.016s]
2025-07-01 09:25:29,573 - vector_store - ERROR - ES批量索引异常: 100 document(s) failed to index.
2025-07-01 09:25:29,574 - vector_store - WARNING - ES存储失败，但Milvus存储成功，系统继续运行
2025-07-01 09:25:29,574 - policy_matcher - INFO - 政策文档添加成功: 北京市产业政策导引.pdf
2025-07-01 09:25:29,575 - __main__ - INFO - 政策文档加载成功
2025-07-01 09:25:29,575 - __main__ - INFO - 系统初始化完成
2025-07-01 09:25:29,576 - __main__ - INFO - 开始测试查询...
2025-07-01 09:25:29,576 - __main__ - INFO - 
=== 测试查询 1: 生物医药行业政策查询 ===
2025-07-01 09:25:29,576 - __main__ - INFO - 查询: 我想查找和生物医药相关的政策
2025-07-01 09:25:29,576 - policy_matcher - INFO - 开始政策匹配: 我想查找和生物医药相关的政策
2025-07-01 09:25:29,577 - retriever - INFO - 开始混合检索: 我想查找和生物医药相关的政策
2025-07-01 09:25:29,577 - retriever - INFO - 查询扩展: 我想查找和生物医药相关的政策 -> ['医疗器械', '医疗', '生命科学', '医药', '医药健康', '我想查找和生物医药相关的政策', '制药']
2025-07-01 09:25:29,577 - retriever - INFO - 构建过滤条件: {}
2025-07-01 09:25:29,641 - vector_store - INFO - Milvus搜索返回 10 个结果
2025-07-01 09:25:29,642 - retriever - INFO - 向量搜索返回 10 个结果
2025-07-01 09:25:29,652 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.011s]
2025-07-01 09:25:29,653 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:25:29,656 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 09:25:29,656 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:25:29,659 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 09:25:29,659 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:25:29,659 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 09:25:29,660 - retriever - INFO - 融合结果: 10 个结果
2025-07-01 09:25:29,660 - retriever - INFO - 检索完成，返回 5 个结果
2025-07-01 09:25:29,662 - policy_matcher - INFO - 政策匹配完成，耗时: 0.09秒，返回: 1个结果
2025-07-01 09:25:29,662 - __main__ - INFO - 查询结果: 找到 1 个匹配政策
2025-07-01 09:25:29,663 - __main__ - INFO - 处理时间: 0.09秒
2025-07-01 09:25:29,663 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 09:25:29,663 - __main__ - INFO -      相关性: 0.331
2025-07-01 09:25:29,663 - __main__ - INFO -      摘要: 政策类型：资金支持 | 主要内容：给予奖励，单个药品奖励；给予奖励；给予奖励，单个品种奖励... | 适用条件：应急审批/工信部揭榜挂帅入围医疗器械，且确；必需易短缺药品重点监测清单》中新上市的本市注...
2025-07-01 09:25:29,663 - __main__ - INFO - 建议:
2025-07-01 09:25:29,663 - __main__ - INFO -   - 相关政策较少，建议：
2025-07-01 09:25:29,663 - __main__ - INFO -   - 1. 扩大查询范围，考虑相关行业政策
2025-07-01 09:25:29,663 - __main__ - INFO -   - 2. 关注上级政府的通用性政策
2025-07-01 09:25:29,663 - __main__ - INFO - 
=== 测试查询 2: 初创企业政策查询 ===
2025-07-01 09:25:29,663 - __main__ - INFO - 查询: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 09:25:29,663 - policy_matcher - INFO - 开始政策匹配: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 09:25:29,663 - retriever - INFO - 开始混合检索: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 09:25:29,663 - retriever - INFO - 查询扩展: 我是一家小型初创企业，现阶段有什么政策比较适用 -> ['小企业', '小微', '创业', '新成立', '我是一家小型初创企业 现阶段有什么政策比较适用', '起步']
2025-07-01 09:25:29,663 - retriever - INFO - 构建过滤条件: {}
2025-07-01 09:25:29,713 - vector_store - INFO - Milvus搜索返回 10 个结果
2025-07-01 09:25:29,713 - retriever - INFO - 向量搜索返回 10 个结果
2025-07-01 09:25:29,716 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 09:25:29,716 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:25:29,719 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 09:25:29,719 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:25:29,724 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 09:25:29,724 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:25:29,724 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 09:25:29,724 - retriever - INFO - 融合结果: 10 个结果
2025-07-01 09:25:29,724 - retriever - INFO - 企业规模过滤: 5 -> 5
2025-07-01 09:25:29,724 - retriever - INFO - 检索完成，返回 5 个结果
2025-07-01 09:25:29,724 - policy_matcher - INFO - 政策匹配完成，耗时: 0.06秒，返回: 1个结果
2025-07-01 09:25:29,724 - __main__ - INFO - 查询结果: 找到 1 个匹配政策
2025-07-01 09:25:29,724 - __main__ - INFO - 处理时间: 0.06秒
2025-07-01 09:25:29,725 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 09:25:29,725 - __main__ - INFO -      相关性: 0.338
2025-07-01 09:25:29,725 - __main__ - INFO -      摘要: 政策类型：税收优惠 | 主要内容：给予资金支持；给予不超过30 万元的资金支持；给予不超过20 万元的资金支持... | 适用条件：要求 | 纳入支持的科技型小微企业须满足以下条件：；当年入库的科技型...
2025-07-01 09:25:29,725 - __main__ - INFO - 建议:
2025-07-01 09:25:29,725 - __main__ - INFO -   - 相关政策较少，建议：
2025-07-01 09:25:29,725 - __main__ - INFO -   - 1. 扩大查询范围，考虑相关行业政策
2025-07-01 09:25:29,725 - __main__ - INFO -   - 2. 关注上级政府的通用性政策
2025-07-01 09:25:29,725 - __main__ - INFO - 
=== 测试查询 3: 创新资金政策查询 ===
2025-07-01 09:25:29,725 - __main__ - INFO - 查询: 有哪些研发创新方面的资金支持政策
2025-07-01 09:25:29,725 - policy_matcher - INFO - 开始政策匹配: 有哪些研发创新方面的资金支持政策
2025-07-01 09:25:29,725 - retriever - INFO - 开始混合检索: 有哪些研发创新方面的资金支持政策
2025-07-01 09:25:29,725 - retriever - INFO - 查询扩展: 有哪些研发创新方面的资金支持政策 -> ['补贴', '有哪些研发创新方面的资金支持政策', '奖励', '研发', '专项资金', '专利', '科技', '资助', '技术']
2025-07-01 09:25:29,725 - retriever - INFO - 构建过滤条件: {}
2025-07-01 09:25:29,764 - vector_store - INFO - Milvus搜索返回 10 个结果
2025-07-01 09:25:29,764 - retriever - INFO - 向量搜索返回 10 个结果
2025-07-01 09:25:29,768 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 09:25:29,768 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:25:29,773 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 09:25:29,773 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:25:29,776 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 09:25:29,776 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:25:29,776 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 09:25:29,776 - retriever - INFO - 融合结果: 10 个结果
2025-07-01 09:25:29,777 - retriever - INFO - 检索完成，返回 5 个结果
2025-07-01 09:25:29,777 - policy_matcher - INFO - 政策匹配完成，耗时: 0.05秒，返回: 1个结果
2025-07-01 09:25:29,777 - __main__ - INFO - 查询结果: 找到 1 个匹配政策
2025-07-01 09:25:29,777 - __main__ - INFO - 处理时间: 0.05秒
2025-07-01 09:25:29,777 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 09:25:29,777 - __main__ - INFO -      相关性: 0.522
2025-07-01 09:25:29,777 - __main__ - INFO -      摘要: 政策类型：资金支持 | 主要内容：给予支持；给予不超过 2000万元资金支持；给予支持... | 适用条件：要求 ；应用且取得显著成效的技术（服务），......
2025-07-01 09:25:29,777 - __main__ - INFO - 建议:
2025-07-01 09:25:29,777 - __main__ - INFO -   - 相关政策较少，建议：
2025-07-01 09:25:29,777 - __main__ - INFO -   - 1. 扩大查询范围，考虑相关行业政策
2025-07-01 09:25:29,777 - __main__ - INFO -   - 2. 关注上级政府的通用性政策
2025-07-01 09:25:29,777 - __main__ - INFO - 启动API服务...
2025-07-01 09:26:57,651 - __main__ - INFO - 启动政策匹配RAG检索系统
2025-07-01 09:26:57,652 - __main__ - INFO - 正在初始化政策匹配系统...
2025-07-01 09:26:58,813 - vector_store - INFO - 已连接到Milvus: localhost:19530
2025-07-01 09:26:58,822 - vector_store - INFO - 加载现有集合: policy_collection
2025-07-01 09:26:58,843 - elastic_transport.transport - INFO - HEAD http://localhost:9200/ [status:200 duration:0.009s]
2025-07-01 09:26:58,843 - vector_store - INFO - 已连接到Elasticsearch: localhost:9200
2025-07-01 09:26:58,847 - elastic_transport.transport - INFO - HEAD http://localhost:9200/policy_index [status:404 duration:0.005s]
2025-07-01 09:26:59,046 - elastic_transport.transport - INFO - PUT http://localhost:9200/policy_index [status:200 duration:0.198s]
2025-07-01 09:26:59,046 - vector_store - INFO - 创建Elasticsearch索引: policy_index
2025-07-01 09:26:59,046 - vector_store - INFO - Elasticsearch索引就绪: policy_index
2025-07-01 09:26:59,052 - elastic_transport.transport - INFO - GET http://localhost:9200/policy_index/_stats [status:200 duration:0.005s]
2025-07-01 09:27:01,953 - embeddings - INFO - 正在加载嵌入模型: moka-ai/m3e-base
2025-07-01 09:27:01,953 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: moka-ai/m3e-base
2025-07-01 09:27:06,842 - embeddings - INFO - 模型加载完成，使用设备: cpu
2025-07-01 09:27:06,843 - __main__ - INFO - 系统状态: {'status': '运行中', 'vector_store': {'milvus_connected': True, 'elasticsearch_connected': True, 'milvus_stats': {'row_count': 2730}, 'elasticsearch_stats': {'doc_count': 0, 'store_size': 227}}, 'embedding_model': {'status': 'loaded', 'model_name': 'moka-ai/m3e-base', 'device': 'cpu', 'embedding_dim': 768, 'max_seq_length': 512}, 'components': {'document_processor': '正常', 'retriever': '正常', 'matcher': '正常'}}
2025-07-01 09:27:06,843 - __main__ - INFO - 发现政策文档: 北京市产业政策导引.pdf，开始加载...
2025-07-01 09:27:06,843 - policy_matcher - INFO - 开始添加政策文档: 北京市产业政策导引.pdf
2025-07-01 09:27:07,141 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-07-01 09:27:07,142 - jieba - DEBUG - Loading model from cache /var/folders/w7/v83dx60s0wnf6qh99wjhckhc0000gn/T/jieba.cache
2025-07-01 09:27:07,492 - jieba - DEBUG - Loading model cost 0.351 seconds.
2025-07-01 09:27:07,492 - jieba - DEBUG - Prefix dict has been built successfully.
2025-07-01 09:27:07,493 - document_processor - INFO - 开始处理文档: 北京市产业政策导引.pdf
2025-07-01 09:27:19,577 - document_processor - INFO - 文档处理完成: 北京市产业政策导引.pdf, 生成 910 个分块
2025-07-01 09:27:19,583 - embeddings - INFO - 开始编码 910 个文本
2025-07-01 09:29:02,223 - embeddings - INFO - 编码完成，输出形状: (910, 768)
2025-07-01 09:29:02,243 - vector_store - INFO - 准备插入数据: chunks数量=910, embeddings形状=(910, 768)
2025-07-01 09:29:02,243 - vector_store - INFO - chunk_ids类型: <class 'list'>, 样例: ['policy_157f44c2_chunk_0', 'policy_157f44c2_chunk_1']
2025-07-01 09:29:02,243 - vector_store - INFO - embedding_list类型: <class 'list'>, 长度: 910
2025-07-01 09:29:02,244 - vector_store - INFO - 验证字段 chunk_id (Milvus类型: 21) - 样例值: policy_157f44c2_chunk_0 - Python类型: <class 'str'>
2025-07-01 09:29:02,244 - vector_store - INFO - 验证字段 policy_id (Milvus类型: 21) - 样例值: policy_157f44c2 - Python类型: <class 'str'>
2025-07-01 09:29:02,244 - vector_store - INFO - 验证字段 content (Milvus类型: 21) - 样例值: 北京市产业政策导引 
（市级版） - Python类型: <class 'str'>
2025-07-01 09:29:02,244 - vector_store - INFO - 验证字段 section (Milvus类型: 21) - 样例值: 开篇 - Python类型: <class 'str'>
2025-07-01 09:29:02,244 - vector_store - INFO - 验证字段 chunk_type (Milvus类型: 21) - 样例值: text - Python类型: <class 'str'>
2025-07-01 09:29:02,245 - vector_store - INFO - 验证字段 embedding (Milvus类型: 101) - 样例值: [-0.009589307941496372, 0.02911415882408619, -0.017605118453502655, 0.04515969753265381, -0.008898379281163216, -0.0004742610326502472, 0.03711366653442383, 0.009216396138072014, -0.028580965474247932, -0.004692758899182081, 0.061252694576978683, 0.004142737481743097, -0.00015245744725689292, -0.03795205056667328, -0.05199399217963219, -0.047508805990219116, 0.03326359763741493, 0.042946770787239075, -0.05036120489239693, -0.0045363628305494785, 0.03374297171831131, -0.013076845556497574, -0.028622999787330627, 0.011045549064874649, -0.008509015664458275, 0.009151282720267773, 0.0024055256508290768, -0.0009728657896630466, -0.033678777515888214, 0.0015214345185086131, 0.03267497941851616, -0.057704951614141464, -0.01816404238343239, 0.001693681930191815, -0.003161015221849084, 0.024775955826044083, -0.013540956191718578, -0.02623024582862854, 0.05934133008122444, 0.029546277597546577, -0.012443392537534237, 0.04352046549320221, -0.0014886443968862295, -0.008488436229526997, -0.008628182113170624, 0.027824610471725464, -0.006604868918657303, -0.00821163970977068, -0.040158990770578384, 0.009263608604669571, -0.007601940538734198, 0.3768092393875122, -0.01491926796734333, 0.005379746202379465, -0.04145354405045509, 0.06345204263925552, -0.03630485385656357, -0.009675629436969757, 0.010845758020877838, 0.039076875895261765, -0.005835541058331728, -0.01878809928894043, 0.0059173936024308205, -0.021044433116912842, 0.026823166757822037, -0.02284947596490383, -0.0548282191157341, -0.035297710448503494, 0.028276700526475906, -0.027777930721640587, 0.022341134026646614, -0.028723761439323425, 0.010176535695791245, -0.001923352712765336, 0.03312109410762787, 0.024043748155236244, 0.011900484561920166, -0.00845291931182146, 0.0014036806533113122, -0.012982417829334736, 0.014434284530580044, 0.0502677857875824, -0.012608615681529045, 0.0030357795767486095, -0.08627171814441681, -0.01438103336840868, -0.0019654601346701384, 0.021047798916697502, 0.013121829368174076, 0.0571318045258522, -0.06971745193004608, -0.053690601140260696, -0.005233254283666611, -0.008413158357143402, -0.02017509937286377, 0.002872430719435215, 0.053301695734262466, -0.05862448364496231, -0.036340124905109406, -0.00010847074736375362, 0.03970731794834137, -0.013180913403630257, -0.010341119952499866, -0.04928994178771973, 0.07712284475564957, 0.014791151508688927, -0.059449516236782074, 0.0129732396453619, 0.019919831305742264, -0.010746200568974018, -0.02472183108329773, -0.03969830274581909, 0.0226453747600317, 0.02169407159090042, -0.04375375062227249, -0.018663236871361732, -0.0026338407769799232, -0.0037480355240404606, 0.027444249019026756, 0.004402159247547388, -0.008972407318651676, 0.039672669023275375, -0.008463398553431034, -0.060849398374557495, 0.024426542222499847, 0.009231614880263805, 0.0036453548818826675, 0.0406363308429718, -0.02083449438214302, 0.036203619092702866, 0.010913846082985401, -0.018755804747343063, 0.011556701734662056, -0.0160507969558239, 0.020260801538825035, 0.003158723935484886, -0.0055779810063540936, -0.041698843240737915, -0.03637868911027908, -0.035921353846788406, 0.06556741893291473, 0.029048891738057137, 0.04013197496533394, -0.051235370337963104, -0.04153929278254509, 0.005427155643701553, 0.008758113719522953, 0.011159452609717846, 0.043652091175317764, -0.040720127522945404, -0.004773605149239302, 0.030425705015659332, 0.038182493299245834, 0.001564845209941268, 0.020213427022099495, 0.030758051201701164, 0.02055022120475769, 0.028158511966466904, -0.07821311801671982, -0.038057200610637665, 0.039441123604774475, -0.003705583279952407, 0.044595569372177124, -0.004892559722065926, 0.019788745790719986, 0.007673455867916346, 0.02045273967087269, -0.07352282106876373, -0.025709766894578934, 0.010276333428919315, 0.010867963545024395, -0.01248021051287651, 0.008558572269976139, -0.019154522567987442, -0.013651279732584953, -0.0453471764922142, -0.019337618723511696, 0.012558511458337307, -0.04601521044969559, -0.030041612684726715, -0.028040865436196327, 0.032115161418914795, 0.020124176517128944, 0.024890819564461708, -0.034578800201416016, 0.03267127275466919, -0.048211950808763504, 0.005665671080350876, 0.05325033888220787, -0.013328064233064651, -0.01906873844563961, -0.010803215205669403, -0.024040287360548973, 0.0011679499875754118, 0.06144373491406441, 0.037063393741846085, -0.02414027974009514, 0.034590207040309906, 0.0002138784620910883, 0.012140613049268723, -0.02405504509806633, -0.05000852793455124, 0.004672967828810215, -0.01480168104171753, 0.006675413344055414, 0.0972711369395256, 0.034512847661972046, 0.06292875111103058, 0.009348156861960888, -0.01494918204843998, -0.06759670376777649, -0.06978300958871841, 0.0232897587120533, 0.05494898930191994, -0.008022705093026161, 0.030105656012892723, -0.09707214683294296, 0.038521941751241684, -0.019789280369877815, 0.04824909195303917, 0.06329125165939331, -0.028315721079707146, -0.01932419277727604, -0.021181587129831314, -0.026322539895772934, -0.01419211458414793, -0.0008855590131133795, 0.03259635716676712, -0.0033729998394846916, 0.021748656406998634, 0.02658071182668209, -0.01077377237379551, 0.02914053201675415, 0.010506127960979939, -0.00022930283739697188, 0.07139137387275696, -0.0288256723433733, 0.015812374651432037, 0.024732865393161774, -0.03838037699460983, -0.016788508743047714, 0.009803450666368008, 0.030756089836359024, -0.000818780914414674, 0.01877676323056221, -0.006893815007060766, -0.02332308515906334, -0.03040100447833538, -0.055977363139390945, -0.05616838485002518, 0.01870473474264145, 0.018247749656438828, 0.0018340129172429442, -0.05407395213842392, -0.023001838475465775, -0.02583295851945877, 0.02642855793237686, 0.04169720411300659, 0.03082786314189434, -0.03451421111822128, 0.005526895169168711, -0.03213411569595337, 0.02497667260468006, 0.0029323389753699303, 0.03324692323803902, -0.011319850571453571, -0.01809949427843094, -0.020266283303499222, -0.029924612492322922, -0.02093447931110859, -0.004756493493914604, 0.06777933239936829, 0.03589344397187233, -0.016932327300310135, 0.020171288400888443, -0.03975522518157959, 0.04156431183218956, -0.008397664874792099, -0.03129595145583153, -0.07036636769771576, 0.05021882429718971, 0.04966488480567932, 0.03049454838037491, -0.028772899881005287, -0.018010294064879417, -0.04312371090054512, 0.0046417745761573315, 0.03925392031669617, -0.019701730459928513, -0.053943932056427, -0.030901964753866196, -0.029882483184337616, 0.01791478507220745, 0.027659915387630463, 0.08985470980405807, -0.05198268964886665, -0.03677350655198097, 0.018498342484235764, -0.03612259402871132, 0.0012379527324810624, 0.05046892166137695, -0.03301394730806351, 0.018706364557147026, 0.01413088757544756, -0.01602291315793991, 0.027428526431322098, 0.026961391791701317, -0.0035943014081567526, 0.017675628885626793, -0.02199414186179638, 0.03260156139731407, -0.023268917575478554, -0.023493386805057526, -0.02067587524652481, -0.0018503885949030519, 0.007983824238181114, -0.03271932154893875, 0.0006211347645148635, -0.01979614980518818, -0.005424872972071171, 0.039955489337444305, -0.010059586726129055, 0.000972070440184325, 0.10771221667528152, 0.06482519954442978, 0.03266149386763573, 0.02456350065767765, 0.00936193484812975, -0.008178982883691788, 0.05346611514687538, 0.028918839991092682, -0.07390716671943665, -0.006112892646342516, 0.028687957674264908, 0.054268978536129, 0.06121604144573212, -0.007828090339899063, -0.03363944590091705, -0.03989904373884201, 0.015971971675753593, -0.007727424614131451, -0.032877519726753235, 0.016885342076420784, -0.010724813677370548, -0.016950199380517006, -0.01989579387009144, -0.00168701377697289, -0.051006659865379333, -0.0014523814897984266, -0.04616301879286766, -0.030870657414197922, 1.5738576621515676e-05, -0.03532016649842262, -0.01884891837835312, -0.014430598355829716, -0.014676989056169987, 0.057766810059547424, 0.006159622687846422, 0.02132817544043064, 0.03129813075065613, -0.016254132613539696, -0.019971000030636787, -0.044640813022851944, 0.02695411629974842, -0.008467409759759903, 0.00490883132442832, 0.030902333557605743, -0.020411167293787003, -0.055149175226688385, -0.02834024652838707, 0.026349080726504326, 0.010783246718347073, 0.05821895971894264, -0.0026978147216141224, 0.03953702002763748, 0.01787497103214264, -0.05887347087264061, -0.00027197625604458153, -0.028730303049087524, -0.02215060405433178, 0.07047837227582932, -0.032375890761613846, -0.00011279471073066816, 0.01315301563590765, -0.0010450751287862659, 0.020898284390568733, -0.013241070322692394, -0.024628158658742905, -0.019909389317035675, -0.05343034118413925, 0.0022840951569378376, -0.017856450751423836, 0.03752543777227402, 0.024396277964115143, -0.004686280619353056, -0.016203105449676514, -0.009482908993959427, 0.03407151252031326, -0.002740207128226757, 0.03272382542490959, 0.02651531621813774, -0.058525729924440384, -0.023655390366911888, -0.011790175922214985, 0.03925531357526779, 0.013866443186998367, 0.04840943589806557, 0.01433261763304472, 0.033368755131959915, -0.017562948167324066, -0.07722582668066025, 0.010781972669064999, -0.01323713455349207, -0.058862410485744476, 0.05883099511265755, -0.043963633477687836, -0.03357572853565216, 0.00797117967158556, 0.033708181232213974, -0.0786106288433075, 0.026821736246347427, 0.022951070219278336, -0.011617700569331646, 0.021849937736988068, 0.03693987429141998, -0.001659695990383625, -0.0061637707985937595, -0.044292062520980835, 0.07012653350830078, 0.013633946888148785, 0.008747246116399765, -0.006612675730139017, 0.013270584866404533, -0.014857371337711811, -0.011432196013629436, 0.0065117403864860535, -0.01404486782848835, 0.01858045533299446, -0.02486853487789631, -0.01836327649652958, -0.024927770718932152, 0.02749050408601761, 0.0044959415681660175, -0.008484087884426117, 0.003905565943568945, 0.00446905056014657, -0.02270268090069294, -0.052917368710041046, -0.010605140589177608, 0.00709659606218338, 0.05721830576658249, 0.05082769691944122, 0.004808859899640083, -0.04757297411561012, 0.017576342448592186, -0.01816967874765396, 0.0019217076478525996, -0.019937697798013687, 0.05922657623887062, -0.023297931998968124, -0.009335382841527462, 0.019768856465816498, -0.02407260239124298, 0.029455088078975677, 0.041888874024152756, 0.03524501621723175, -0.03877586871385574, -0.04179271683096886, 0.06196897104382515, -0.007987288758158684, -0.04283953458070755, 0.06542922556400299, 0.0064946124330163, 0.008456920273602009, -0.02566426247358322, 0.020016202703118324, -0.001562338089570403, -0.0006199604249559343, -0.027312463149428368, -0.04545450210571289, 0.011615592055022717, -0.01337212324142456, 0.020239297300577164, -0.023537753149867058, -0.003997112158685923, -0.004092201124876738, -0.02057114616036415, -0.011246242560446262, 0.00971840787678957, -0.008114401251077652, -0.07252760231494904, -0.016493696719408035, 0.04132617264986038, -0.04882003739476204, -0.0026445596013218164, -0.0009650048450566828, 0.018796775490045547, 0.046294763684272766, -0.059855569154024124, 0.04281643033027649, -0.04874449595808983, 0.0025613352190703154, -0.01081911288201809, -0.0037697977386415005, 0.031707651913166046, -0.021693317219614983, 0.015387540683150291, -0.01732710190117359, -0.015074243769049644, 0.0418533980846405, 0.034862905740737915, 0.005694030784070492, 0.0007337104761973023, 0.03324953466653824, 0.001326580299064517, 0.028315981850028038, -0.030011458322405815, -0.012086973525583744, 0.007019157521426678, 0.012758257798850536, -0.0004404193314258009, -0.03769683092832565, -0.011248038150370121, 0.041032496839761734, -0.019792452454566956, 0.02623436599969864, 0.002371096983551979, -0.03930090367794037, 0.0002622672473080456, 0.04479384422302246, -0.035239823162555695, -0.06436390429735184, -0.005533753894269466, 0.021474644541740417, 0.006803956348448992, 0.033541347831487656, -0.015958765521645546, 0.0075390939600765705, -0.08871641755104065, -0.056117936968803406, 0.009939104318618774, 0.0015055258991196752, 0.05826868116855621, -0.02165314555168152, 0.021653825417160988, -0.057069793343544006, -0.026611806824803352, -0.013909755274653435, 0.06283603608608246, 0.012419736944139004, -0.04626639932394028, 0.01178447250276804, -0.03799920156598091, 0.010784066282212734, -0.02245737984776497, 0.022549331188201904, -0.07572583854198456, -0.017417579889297485, 0.033408280462026596, -0.03186677768826485, 0.02544129081070423, -0.03759037330746651, 0.004175000824034214, -0.035863246768713, -0.004104748833924532, 0.04276532679796219, -0.020994527265429497, 0.017737165093421936, 0.016124460846185684, -0.0408937931060791, -0.02875874936580658, 0.03717256337404251, 0.004172440618276596, 0.021906953305006027, -0.046760935336351395, -0.060809068381786346, -0.014605913311243057, -0.01680750772356987, 0.024257700890302658, 0.03192616254091263, 0.019896337762475014, 0.07277151942253113, -0.03467482328414917, -0.0296962708234787, -0.020838161930441856, -0.04029468074440956, 0.027133222669363022, -0.054488155990839005, 0.020477961748838425, 0.00099698337726295, -0.007412747014313936, -0.0006891798693686724, 0.008630702272057533, 0.07006815820932388, -0.0006025220500305295, 0.006870594806969166, -0.02347354218363762, -0.004952014423906803, -0.012581387534737587, 0.0016122444067150354, -0.003527534892782569, -0.009774364531040192, 0.012716458179056644, 0.0009260065853595734, 0.03004925511777401, 0.011623555794358253, 0.06507840007543564, -0.050444841384887695, 0.008790462277829647, -0.02803892455995083, -0.06705816090106964, 0.02005065605044365, 0.035633061081171036, 0.0002218412992078811, 0.0780092179775238, -0.018138019368052483, -0.023708099499344826, 0.010249351151287556, -0.035801246762275696, -0.0019092432921752334, -0.029957309365272522, -0.007117624394595623, 0.01950136199593544, 0.03664879873394966, -0.020137088373303413, -0.023347266018390656, 0.08971085399389267, 0.00516971480101347, 0.050085872411727905, -0.022632304579019547, -0.005027259234338999, -0.027102002874016762, 0.06915169954299927, 0.0013029997935518622, 0.017689192667603493, 0.009980677627027035, -0.008764904923737049, -0.03800809383392334, -0.029612688347697258, 0.05087962746620178, 0.032240815460681915, -0.009346778504550457, -0.02199050784111023, -0.025282803922891617, 0.014376815408468246, 0.03630366548895836, 0.0656920075416565, -0.014159136451780796, 0.01677713729441166, -0.036684345453977585, 0.04181422293186188, -0.03661084547638893, -0.0009762952686287463, -0.020955290645360947, 0.037498973309993744, -0.021638048812747, 0.0194693636149168, -0.009985314682126045, -0.08341575413942337, -0.0021505558397620916, 0.0004300408763810992, -0.03864736109972, 0.09971991181373596, -0.0420842319726944, -0.0013092535082250834, -0.0484723262488842, 0.019459035247564316, -0.01095435582101345, 0.020641816779971123, 0.07297729700803757, 0.060642678290605545, 0.026820100843906403, 0.010149716399610043, -0.042748551815748215, -0.02918965183198452, -0.034213971346616745, 0.08885794132947922, -0.025734225288033485, 0.02929290570318699, -0.0154344467446208, -0.044630784541368484, 0.03935050219297409, 0.01972702145576477, -0.037364643067121506, -0.016189686954021454, -0.07640594244003296, -0.018994292244315147, 0.018101777881383896, -0.014673523604869843, 0.02799123339354992, -0.010238418355584145, 0.01709965616464615, -0.019193274900317192, 0.04031998664140701, -0.03897527605295181, 0.10559485107660294, -0.054177287966012955, 0.023972777649760246, 0.005270805209875107, -0.04176589474081993, 0.05416272580623627, 0.030821776017546654, -0.025223834440112114, 0.0030505741015076637, 0.016425693407654762, 0.006580985151231289, -0.02823006734251976, -0.009023276157677174, -0.056368544697761536, -0.004875159356743097, -0.02268892526626587, -0.0034240498207509518, 0.03267257660627365, -0.03636043891310692, 0.04608139395713806, -0.04523656144738197, -0.010927774012088776, -0.005379600916057825, 0.03045721910893917, 0.0389670729637146, 0.028936419636011124, -0.029645929113030434, 0.030180001631379128, 0.003528584260493517, -0.017787493765354156, 0.05465669929981232, 0.02838345430791378, 0.06302227824926376, 0.029360666871070862, -0.017426690086722374, 0.0001560311357025057, -0.051588669419288635, -0.002858480205759406, -0.05941910296678543, 0.009235854260623455, 0.01826690323650837, -0.03919863700866699, 0.004400157369673252, -0.007518859580159187, -0.0030373611953109503, -0.06218826398253441, 0.0023394592572003603, 0.06459461897611618, 0.025311214849352837, -0.07068324089050293, -0.07035823166370392, -0.011732452549040318, -0.0036581538151949644, 0.03272993490099907, 0.06999839842319489, -0.013980642892420292, -0.010885556228458881, 0.04285767301917076, 0.012768624350428581, 0.035443015396595, -0.015054207295179367, 0.015541168861091137, -0.01729157753288746, 0.05152300000190735, 0.031376104801893234, -0.055162589997053146, -0.04728157818317413, 0.016747761517763138, -0.011066374368965626, -0.023549759760499, -0.04256664589047432, -0.029114289209246635, -0.007128818891942501] - Python类型: <class 'list'>
2025-07-01 09:29:05,601 - vector_store - INFO - 成功插入 910 个分块到Milvus
2025-07-01 09:29:05,736 - vector_store - INFO - 准备索引 910 个文档到ES
2025-07-01 09:29:05,943 - elastic_transport.transport - INFO - PUT http://localhost:9200/_bulk [status:200 duration:0.086s]
2025-07-01 09:29:05,944 - vector_store - ERROR - ES批量索引异常: 100 document(s) failed to index.
2025-07-01 09:29:05,945 - vector_store - WARNING - ES存储失败，但Milvus存储成功，系统继续运行
2025-07-01 09:29:05,945 - policy_matcher - INFO - 政策文档添加成功: 北京市产业政策导引.pdf
2025-07-01 09:29:05,948 - __main__ - INFO - 政策文档加载成功
2025-07-01 09:29:05,948 - __main__ - INFO - 系统初始化完成
2025-07-01 09:29:05,950 - __main__ - INFO - 开始测试查询...
2025-07-01 09:29:05,950 - __main__ - INFO - 
=== 测试查询 1: 生物医药行业政策查询 ===
2025-07-01 09:29:05,950 - __main__ - INFO - 查询: 我想查找和生物医药相关的政策
2025-07-01 09:29:05,952 - policy_matcher - INFO - 开始政策匹配: 我想查找和生物医药相关的政策
2025-07-01 09:29:05,953 - retriever - INFO - 开始混合检索: 我想查找和生物医药相关的政策
2025-07-01 09:29:05,954 - retriever - INFO - 查询扩展: 我想查找和生物医药相关的政策 -> ['医药', '医药健康', '制药', '医疗', '生命科学', '医疗器械', '我想查找和生物医药相关的政策']
2025-07-01 09:29:05,954 - retriever - INFO - 构建过滤条件: {}
2025-07-01 09:29:06,033 - vector_store - INFO - Milvus搜索返回 10 个结果
2025-07-01 09:29:06,033 - retriever - INFO - 向量搜索返回 10 个结果
2025-07-01 09:29:06,054 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.020s]
2025-07-01 09:29:06,054 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:29:06,066 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.011s]
2025-07-01 09:29:06,066 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:29:06,072 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.006s]
2025-07-01 09:29:06,073 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:29:06,073 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 09:29:06,073 - retriever - INFO - 融合结果: 10 个结果
2025-07-01 09:29:06,073 - retriever - INFO - 检索完成，返回 5 个结果
2025-07-01 09:29:06,075 - policy_matcher - INFO - 政策匹配完成，耗时: 0.12秒，返回: 1个结果
2025-07-01 09:29:06,075 - __main__ - INFO - 查询结果: 找到 1 个匹配政策
2025-07-01 09:29:06,075 - __main__ - INFO - 处理时间: 0.12秒
2025-07-01 09:29:06,075 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 09:29:06,075 - __main__ - INFO -      相关性: 0.331
2025-07-01 09:29:06,075 - __main__ - INFO -      摘要: 政策类型：资金支持 | 主要内容：给予奖励，单个药品奖励；给予奖励；给予奖励，单个品种奖励... | 适用条件：应急审批/工信部揭榜挂帅入围医疗器械，且确；必需易短缺药品重点监测清单》中新上市的本市注...
2025-07-01 09:29:06,075 - __main__ - INFO - 建议:
2025-07-01 09:29:06,075 - __main__ - INFO -   - 相关政策较少，建议：
2025-07-01 09:29:06,075 - __main__ - INFO -   - 1. 扩大查询范围，考虑相关行业政策
2025-07-01 09:29:06,075 - __main__ - INFO -   - 2. 关注上级政府的通用性政策
2025-07-01 09:29:06,075 - __main__ - INFO - 
=== 测试查询 2: 初创企业政策查询 ===
2025-07-01 09:29:06,075 - __main__ - INFO - 查询: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 09:29:06,075 - policy_matcher - INFO - 开始政策匹配: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 09:29:06,075 - retriever - INFO - 开始混合检索: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 09:29:06,075 - retriever - INFO - 查询扩展: 我是一家小型初创企业，现阶段有什么政策比较适用 -> ['小微', '创业', '小企业', '我是一家小型初创企业 现阶段有什么政策比较适用', '起步', '新成立']
2025-07-01 09:29:06,076 - retriever - INFO - 构建过滤条件: {}
2025-07-01 09:29:06,219 - vector_store - INFO - Milvus搜索返回 10 个结果
2025-07-01 09:29:06,219 - retriever - INFO - 向量搜索返回 10 个结果
2025-07-01 09:29:06,224 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.005s]
2025-07-01 09:29:06,224 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:29:06,228 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 09:29:06,229 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:29:06,234 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.006s]
2025-07-01 09:29:06,234 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:29:06,235 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 09:29:06,235 - retriever - INFO - 融合结果: 10 个结果
2025-07-01 09:29:06,235 - retriever - INFO - 企业规模过滤: 5 -> 5
2025-07-01 09:29:06,235 - retriever - INFO - 检索完成，返回 5 个结果
2025-07-01 09:29:06,235 - policy_matcher - INFO - 政策匹配完成，耗时: 0.16秒，返回: 1个结果
2025-07-01 09:29:06,235 - __main__ - INFO - 查询结果: 找到 1 个匹配政策
2025-07-01 09:29:06,235 - __main__ - INFO - 处理时间: 0.16秒
2025-07-01 09:29:06,235 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 09:29:06,235 - __main__ - INFO -      相关性: 0.338
2025-07-01 09:29:06,235 - __main__ - INFO -      摘要: 政策类型：税收优惠 | 主要内容：给予资金支持；给予不超过30 万元的资金支持；给予不超过20 万元的资金支持... | 适用条件：要求 | 纳入支持的科技型小微企业须满足以下条件：；当年入库的科技型...
2025-07-01 09:29:06,235 - __main__ - INFO - 建议:
2025-07-01 09:29:06,235 - __main__ - INFO -   - 相关政策较少，建议：
2025-07-01 09:29:06,235 - __main__ - INFO -   - 1. 扩大查询范围，考虑相关行业政策
2025-07-01 09:29:06,235 - __main__ - INFO -   - 2. 关注上级政府的通用性政策
2025-07-01 09:29:06,235 - __main__ - INFO - 
=== 测试查询 3: 创新资金政策查询 ===
2025-07-01 09:29:06,235 - __main__ - INFO - 查询: 有哪些研发创新方面的资金支持政策
2025-07-01 09:29:06,235 - policy_matcher - INFO - 开始政策匹配: 有哪些研发创新方面的资金支持政策
2025-07-01 09:29:06,235 - retriever - INFO - 开始混合检索: 有哪些研发创新方面的资金支持政策
2025-07-01 09:29:06,236 - retriever - INFO - 查询扩展: 有哪些研发创新方面的资金支持政策 -> ['有哪些研发创新方面的资金支持政策', '研发', '专利', '资助', '补贴', '技术', '专项资金', '奖励', '科技']
2025-07-01 09:29:06,236 - retriever - INFO - 构建过滤条件: {}
2025-07-01 09:29:06,290 - vector_store - INFO - Milvus搜索返回 10 个结果
2025-07-01 09:29:06,290 - retriever - INFO - 向量搜索返回 10 个结果
2025-07-01 09:29:06,295 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 09:29:06,295 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:29:06,299 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 09:29:06,299 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:29:06,305 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.006s]
2025-07-01 09:29:06,305 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:29:06,305 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 09:29:06,305 - retriever - INFO - 融合结果: 10 个结果
2025-07-01 09:29:06,305 - retriever - INFO - 检索完成，返回 5 个结果
2025-07-01 09:29:06,306 - policy_matcher - INFO - 政策匹配完成，耗时: 0.07秒，返回: 1个结果
2025-07-01 09:29:06,306 - __main__ - INFO - 查询结果: 找到 1 个匹配政策
2025-07-01 09:29:06,306 - __main__ - INFO - 处理时间: 0.07秒
2025-07-01 09:29:06,306 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 09:29:06,306 - __main__ - INFO -      相关性: 0.522
2025-07-01 09:29:06,306 - __main__ - INFO -      摘要: 政策类型：资金支持 | 主要内容：给予支持；给予不超过 2000万元资金支持；给予支持... | 适用条件：要求 ；应用且取得显著成效的技术（服务），......
2025-07-01 09:29:06,306 - __main__ - INFO - 建议:
2025-07-01 09:29:06,306 - __main__ - INFO -   - 相关政策较少，建议：
2025-07-01 09:29:06,306 - __main__ - INFO -   - 1. 扩大查询范围，考虑相关行业政策
2025-07-01 09:29:06,306 - __main__ - INFO -   - 2. 关注上级政府的通用性政策
2025-07-01 09:29:06,306 - __main__ - INFO - 启动API服务...
2025-07-01 09:32:11,242 - __main__ - INFO - 启动政策匹配RAG检索系统
2025-07-01 09:32:11,243 - __main__ - INFO - 正在初始化政策匹配系统...
2025-07-01 09:32:12,316 - vector_store - INFO - 已连接到Milvus: localhost:19530
2025-07-01 09:32:12,322 - vector_store - INFO - 加载现有集合: policy_collection
2025-07-01 09:32:12,340 - elastic_transport.transport - INFO - HEAD http://localhost:9200/ [status:200 duration:0.010s]
2025-07-01 09:32:12,340 - vector_store - INFO - 已连接到Elasticsearch: localhost:9200
2025-07-01 09:32:12,344 - elastic_transport.transport - INFO - HEAD http://localhost:9200/policy_index [status:200 duration:0.004s]
2025-07-01 09:32:12,344 - vector_store - INFO - Elasticsearch索引就绪: policy_index
2025-07-01 09:32:12,351 - elastic_transport.transport - INFO - GET http://localhost:9200/policy_index/_stats [status:200 duration:0.006s]
2025-07-01 09:32:14,675 - embeddings - INFO - 正在加载嵌入模型: moka-ai/m3e-base
2025-07-01 09:32:14,675 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: moka-ai/m3e-base
2025-07-01 09:32:22,699 - embeddings - INFO - 模型加载完成，使用设备: cpu
2025-07-01 09:32:22,699 - __main__ - INFO - 系统状态: {'status': '运行中', 'vector_store': {'milvus_connected': True, 'elasticsearch_connected': True, 'milvus_stats': {'row_count': 3640}, 'elasticsearch_stats': {'doc_count': 0, 'store_size': 227}}, 'embedding_model': {'status': 'loaded', 'model_name': 'moka-ai/m3e-base', 'device': 'cpu', 'embedding_dim': 768, 'max_seq_length': 512}, 'components': {'document_processor': '正常', 'retriever': '正常', 'matcher': '正常'}}
2025-07-01 09:32:22,699 - __main__ - INFO - 发现政策文档: 北京市产业政策导引.pdf，开始加载...
2025-07-01 09:32:22,699 - policy_matcher - INFO - 开始添加政策文档: 北京市产业政策导引.pdf
2025-07-01 09:32:22,954 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-07-01 09:32:22,954 - jieba - DEBUG - Loading model from cache /var/folders/w7/v83dx60s0wnf6qh99wjhckhc0000gn/T/jieba.cache
2025-07-01 09:32:23,227 - jieba - DEBUG - Loading model cost 0.273 seconds.
2025-07-01 09:32:23,227 - jieba - DEBUG - Prefix dict has been built successfully.
2025-07-01 09:32:23,228 - document_processor - INFO - 开始处理文档: 北京市产业政策导引.pdf
2025-07-01 09:32:33,814 - document_processor - INFO - 文档处理完成: 北京市产业政策导引.pdf, 生成 910 个分块
2025-07-01 09:32:33,816 - embeddings - INFO - 开始编码 910 个文本
2025-07-01 09:34:05,540 - embeddings - INFO - 编码完成，输出形状: (910, 768)
2025-07-01 09:34:05,554 - vector_store - INFO - 准备插入数据: chunks数量=910, embeddings形状=(910, 768)
2025-07-01 09:34:05,554 - vector_store - INFO - chunk_ids类型: <class 'list'>, 样例: ['policy_157f44c2_chunk_0', 'policy_157f44c2_chunk_1']
2025-07-01 09:34:05,554 - vector_store - INFO - embedding_list类型: <class 'list'>, 长度: 910
2025-07-01 09:34:05,555 - vector_store - INFO - 验证字段 chunk_id (Milvus类型: 21) - 样例值: policy_157f44c2_chunk_0 - Python类型: <class 'str'>
2025-07-01 09:34:05,555 - vector_store - INFO - 验证字段 policy_id (Milvus类型: 21) - 样例值: policy_157f44c2 - Python类型: <class 'str'>
2025-07-01 09:34:05,555 - vector_store - INFO - 验证字段 content (Milvus类型: 21) - 样例值: 北京市产业政策导引 
（市级版） - Python类型: <class 'str'>
2025-07-01 09:34:05,555 - vector_store - INFO - 验证字段 section (Milvus类型: 21) - 样例值: 开篇 - Python类型: <class 'str'>
2025-07-01 09:34:05,555 - vector_store - INFO - 验证字段 chunk_type (Milvus类型: 21) - 样例值: text - Python类型: <class 'str'>
2025-07-01 09:34:05,555 - vector_store - INFO - 验证字段 embedding (Milvus类型: 101) - 样例值: [-0.009589307941496372, 0.02911415882408619, -0.017605118453502655, 0.04515969753265381, -0.008898379281163216, -0.0004742610326502472, 0.03711366653442383, 0.009216396138072014, -0.028580965474247932, -0.004692758899182081, 0.061252694576978683, 0.004142737481743097, -0.00015245744725689292, -0.03795205056667328, -0.05199399217963219, -0.047508805990219116, 0.03326359763741493, 0.042946770787239075, -0.05036120489239693, -0.0045363628305494785, 0.03374297171831131, -0.013076845556497574, -0.028622999787330627, 0.011045549064874649, -0.008509015664458275, 0.009151282720267773, 0.0024055256508290768, -0.0009728657896630466, -0.033678777515888214, 0.0015214345185086131, 0.03267497941851616, -0.057704951614141464, -0.01816404238343239, 0.001693681930191815, -0.003161015221849084, 0.024775955826044083, -0.013540956191718578, -0.02623024582862854, 0.05934133008122444, 0.029546277597546577, -0.012443392537534237, 0.04352046549320221, -0.0014886443968862295, -0.008488436229526997, -0.008628182113170624, 0.027824610471725464, -0.006604868918657303, -0.00821163970977068, -0.040158990770578384, 0.009263608604669571, -0.007601940538734198, 0.3768092393875122, -0.01491926796734333, 0.005379746202379465, -0.04145354405045509, 0.06345204263925552, -0.03630485385656357, -0.009675629436969757, 0.010845758020877838, 0.039076875895261765, -0.005835541058331728, -0.01878809928894043, 0.0059173936024308205, -0.021044433116912842, 0.026823166757822037, -0.02284947596490383, -0.0548282191157341, -0.035297710448503494, 0.028276700526475906, -0.027777930721640587, 0.022341134026646614, -0.028723761439323425, 0.010176535695791245, -0.001923352712765336, 0.03312109410762787, 0.024043748155236244, 0.011900484561920166, -0.00845291931182146, 0.0014036806533113122, -0.012982417829334736, 0.014434284530580044, 0.0502677857875824, -0.012608615681529045, 0.0030357795767486095, -0.08627171814441681, -0.01438103336840868, -0.0019654601346701384, 0.021047798916697502, 0.013121829368174076, 0.0571318045258522, -0.06971745193004608, -0.053690601140260696, -0.005233254283666611, -0.008413158357143402, -0.02017509937286377, 0.002872430719435215, 0.053301695734262466, -0.05862448364496231, -0.036340124905109406, -0.00010847074736375362, 0.03970731794834137, -0.013180913403630257, -0.010341119952499866, -0.04928994178771973, 0.07712284475564957, 0.014791151508688927, -0.059449516236782074, 0.0129732396453619, 0.019919831305742264, -0.010746200568974018, -0.02472183108329773, -0.03969830274581909, 0.0226453747600317, 0.02169407159090042, -0.04375375062227249, -0.018663236871361732, -0.0026338407769799232, -0.0037480355240404606, 0.027444249019026756, 0.004402159247547388, -0.008972407318651676, 0.039672669023275375, -0.008463398553431034, -0.060849398374557495, 0.024426542222499847, 0.009231614880263805, 0.0036453548818826675, 0.0406363308429718, -0.02083449438214302, 0.036203619092702866, 0.010913846082985401, -0.018755804747343063, 0.011556701734662056, -0.0160507969558239, 0.020260801538825035, 0.003158723935484886, -0.0055779810063540936, -0.041698843240737915, -0.03637868911027908, -0.035921353846788406, 0.06556741893291473, 0.029048891738057137, 0.04013197496533394, -0.051235370337963104, -0.04153929278254509, 0.005427155643701553, 0.008758113719522953, 0.011159452609717846, 0.043652091175317764, -0.040720127522945404, -0.004773605149239302, 0.030425705015659332, 0.038182493299245834, 0.001564845209941268, 0.020213427022099495, 0.030758051201701164, 0.02055022120475769, 0.028158511966466904, -0.07821311801671982, -0.038057200610637665, 0.039441123604774475, -0.003705583279952407, 0.044595569372177124, -0.004892559722065926, 0.019788745790719986, 0.007673455867916346, 0.02045273967087269, -0.07352282106876373, -0.025709766894578934, 0.010276333428919315, 0.010867963545024395, -0.01248021051287651, 0.008558572269976139, -0.019154522567987442, -0.013651279732584953, -0.0453471764922142, -0.019337618723511696, 0.012558511458337307, -0.04601521044969559, -0.030041612684726715, -0.028040865436196327, 0.032115161418914795, 0.020124176517128944, 0.024890819564461708, -0.034578800201416016, 0.03267127275466919, -0.048211950808763504, 0.005665671080350876, 0.05325033888220787, -0.013328064233064651, -0.01906873844563961, -0.010803215205669403, -0.024040287360548973, 0.0011679499875754118, 0.06144373491406441, 0.037063393741846085, -0.02414027974009514, 0.034590207040309906, 0.0002138784620910883, 0.012140613049268723, -0.02405504509806633, -0.05000852793455124, 0.004672967828810215, -0.01480168104171753, 0.006675413344055414, 0.0972711369395256, 0.034512847661972046, 0.06292875111103058, 0.009348156861960888, -0.01494918204843998, -0.06759670376777649, -0.06978300958871841, 0.0232897587120533, 0.05494898930191994, -0.008022705093026161, 0.030105656012892723, -0.09707214683294296, 0.038521941751241684, -0.019789280369877815, 0.04824909195303917, 0.06329125165939331, -0.028315721079707146, -0.01932419277727604, -0.021181587129831314, -0.026322539895772934, -0.01419211458414793, -0.0008855590131133795, 0.03259635716676712, -0.0033729998394846916, 0.021748656406998634, 0.02658071182668209, -0.01077377237379551, 0.02914053201675415, 0.010506127960979939, -0.00022930283739697188, 0.07139137387275696, -0.0288256723433733, 0.015812374651432037, 0.024732865393161774, -0.03838037699460983, -0.016788508743047714, 0.009803450666368008, 0.030756089836359024, -0.000818780914414674, 0.01877676323056221, -0.006893815007060766, -0.02332308515906334, -0.03040100447833538, -0.055977363139390945, -0.05616838485002518, 0.01870473474264145, 0.018247749656438828, 0.0018340129172429442, -0.05407395213842392, -0.023001838475465775, -0.02583295851945877, 0.02642855793237686, 0.04169720411300659, 0.03082786314189434, -0.03451421111822128, 0.005526895169168711, -0.03213411569595337, 0.02497667260468006, 0.0029323389753699303, 0.03324692323803902, -0.011319850571453571, -0.01809949427843094, -0.020266283303499222, -0.029924612492322922, -0.02093447931110859, -0.004756493493914604, 0.06777933239936829, 0.03589344397187233, -0.016932327300310135, 0.020171288400888443, -0.03975522518157959, 0.04156431183218956, -0.008397664874792099, -0.03129595145583153, -0.07036636769771576, 0.05021882429718971, 0.04966488480567932, 0.03049454838037491, -0.028772899881005287, -0.018010294064879417, -0.04312371090054512, 0.0046417745761573315, 0.03925392031669617, -0.019701730459928513, -0.053943932056427, -0.030901964753866196, -0.029882483184337616, 0.01791478507220745, 0.027659915387630463, 0.08985470980405807, -0.05198268964886665, -0.03677350655198097, 0.018498342484235764, -0.03612259402871132, 0.0012379527324810624, 0.05046892166137695, -0.03301394730806351, 0.018706364557147026, 0.01413088757544756, -0.01602291315793991, 0.027428526431322098, 0.026961391791701317, -0.0035943014081567526, 0.017675628885626793, -0.02199414186179638, 0.03260156139731407, -0.023268917575478554, -0.023493386805057526, -0.02067587524652481, -0.0018503885949030519, 0.007983824238181114, -0.03271932154893875, 0.0006211347645148635, -0.01979614980518818, -0.005424872972071171, 0.039955489337444305, -0.010059586726129055, 0.000972070440184325, 0.10771221667528152, 0.06482519954442978, 0.03266149386763573, 0.02456350065767765, 0.00936193484812975, -0.008178982883691788, 0.05346611514687538, 0.028918839991092682, -0.07390716671943665, -0.006112892646342516, 0.028687957674264908, 0.054268978536129, 0.06121604144573212, -0.007828090339899063, -0.03363944590091705, -0.03989904373884201, 0.015971971675753593, -0.007727424614131451, -0.032877519726753235, 0.016885342076420784, -0.010724813677370548, -0.016950199380517006, -0.01989579387009144, -0.00168701377697289, -0.051006659865379333, -0.0014523814897984266, -0.04616301879286766, -0.030870657414197922, 1.5738576621515676e-05, -0.03532016649842262, -0.01884891837835312, -0.014430598355829716, -0.014676989056169987, 0.057766810059547424, 0.006159622687846422, 0.02132817544043064, 0.03129813075065613, -0.016254132613539696, -0.019971000030636787, -0.044640813022851944, 0.02695411629974842, -0.008467409759759903, 0.00490883132442832, 0.030902333557605743, -0.020411167293787003, -0.055149175226688385, -0.02834024652838707, 0.026349080726504326, 0.010783246718347073, 0.05821895971894264, -0.0026978147216141224, 0.03953702002763748, 0.01787497103214264, -0.05887347087264061, -0.00027197625604458153, -0.028730303049087524, -0.02215060405433178, 0.07047837227582932, -0.032375890761613846, -0.00011279471073066816, 0.01315301563590765, -0.0010450751287862659, 0.020898284390568733, -0.013241070322692394, -0.024628158658742905, -0.019909389317035675, -0.05343034118413925, 0.0022840951569378376, -0.017856450751423836, 0.03752543777227402, 0.024396277964115143, -0.004686280619353056, -0.016203105449676514, -0.009482908993959427, 0.03407151252031326, -0.002740207128226757, 0.03272382542490959, 0.02651531621813774, -0.058525729924440384, -0.023655390366911888, -0.011790175922214985, 0.03925531357526779, 0.013866443186998367, 0.04840943589806557, 0.01433261763304472, 0.033368755131959915, -0.017562948167324066, -0.07722582668066025, 0.010781972669064999, -0.01323713455349207, -0.058862410485744476, 0.05883099511265755, -0.043963633477687836, -0.03357572853565216, 0.00797117967158556, 0.033708181232213974, -0.0786106288433075, 0.026821736246347427, 0.022951070219278336, -0.011617700569331646, 0.021849937736988068, 0.03693987429141998, -0.001659695990383625, -0.0061637707985937595, -0.044292062520980835, 0.07012653350830078, 0.013633946888148785, 0.008747246116399765, -0.006612675730139017, 0.013270584866404533, -0.014857371337711811, -0.011432196013629436, 0.0065117403864860535, -0.01404486782848835, 0.01858045533299446, -0.02486853487789631, -0.01836327649652958, -0.024927770718932152, 0.02749050408601761, 0.0044959415681660175, -0.008484087884426117, 0.003905565943568945, 0.00446905056014657, -0.02270268090069294, -0.052917368710041046, -0.010605140589177608, 0.00709659606218338, 0.05721830576658249, 0.05082769691944122, 0.004808859899640083, -0.04757297411561012, 0.017576342448592186, -0.01816967874765396, 0.0019217076478525996, -0.019937697798013687, 0.05922657623887062, -0.023297931998968124, -0.009335382841527462, 0.019768856465816498, -0.02407260239124298, 0.029455088078975677, 0.041888874024152756, 0.03524501621723175, -0.03877586871385574, -0.04179271683096886, 0.06196897104382515, -0.007987288758158684, -0.04283953458070755, 0.06542922556400299, 0.0064946124330163, 0.008456920273602009, -0.02566426247358322, 0.020016202703118324, -0.001562338089570403, -0.0006199604249559343, -0.027312463149428368, -0.04545450210571289, 0.011615592055022717, -0.01337212324142456, 0.020239297300577164, -0.023537753149867058, -0.003997112158685923, -0.004092201124876738, -0.02057114616036415, -0.011246242560446262, 0.00971840787678957, -0.008114401251077652, -0.07252760231494904, -0.016493696719408035, 0.04132617264986038, -0.04882003739476204, -0.0026445596013218164, -0.0009650048450566828, 0.018796775490045547, 0.046294763684272766, -0.059855569154024124, 0.04281643033027649, -0.04874449595808983, 0.0025613352190703154, -0.01081911288201809, -0.0037697977386415005, 0.031707651913166046, -0.021693317219614983, 0.015387540683150291, -0.01732710190117359, -0.015074243769049644, 0.0418533980846405, 0.034862905740737915, 0.005694030784070492, 0.0007337104761973023, 0.03324953466653824, 0.001326580299064517, 0.028315981850028038, -0.030011458322405815, -0.012086973525583744, 0.007019157521426678, 0.012758257798850536, -0.0004404193314258009, -0.03769683092832565, -0.011248038150370121, 0.041032496839761734, -0.019792452454566956, 0.02623436599969864, 0.002371096983551979, -0.03930090367794037, 0.0002622672473080456, 0.04479384422302246, -0.035239823162555695, -0.06436390429735184, -0.005533753894269466, 0.021474644541740417, 0.006803956348448992, 0.033541347831487656, -0.015958765521645546, 0.0075390939600765705, -0.08871641755104065, -0.056117936968803406, 0.009939104318618774, 0.0015055258991196752, 0.05826868116855621, -0.02165314555168152, 0.021653825417160988, -0.057069793343544006, -0.026611806824803352, -0.013909755274653435, 0.06283603608608246, 0.012419736944139004, -0.04626639932394028, 0.01178447250276804, -0.03799920156598091, 0.010784066282212734, -0.02245737984776497, 0.022549331188201904, -0.07572583854198456, -0.017417579889297485, 0.033408280462026596, -0.03186677768826485, 0.02544129081070423, -0.03759037330746651, 0.004175000824034214, -0.035863246768713, -0.004104748833924532, 0.04276532679796219, -0.020994527265429497, 0.017737165093421936, 0.016124460846185684, -0.0408937931060791, -0.02875874936580658, 0.03717256337404251, 0.004172440618276596, 0.021906953305006027, -0.046760935336351395, -0.060809068381786346, -0.014605913311243057, -0.01680750772356987, 0.024257700890302658, 0.03192616254091263, 0.019896337762475014, 0.07277151942253113, -0.03467482328414917, -0.0296962708234787, -0.020838161930441856, -0.04029468074440956, 0.027133222669363022, -0.054488155990839005, 0.020477961748838425, 0.00099698337726295, -0.007412747014313936, -0.0006891798693686724, 0.008630702272057533, 0.07006815820932388, -0.0006025220500305295, 0.006870594806969166, -0.02347354218363762, -0.004952014423906803, -0.012581387534737587, 0.0016122444067150354, -0.003527534892782569, -0.009774364531040192, 0.012716458179056644, 0.0009260065853595734, 0.03004925511777401, 0.011623555794358253, 0.06507840007543564, -0.050444841384887695, 0.008790462277829647, -0.02803892455995083, -0.06705816090106964, 0.02005065605044365, 0.035633061081171036, 0.0002218412992078811, 0.0780092179775238, -0.018138019368052483, -0.023708099499344826, 0.010249351151287556, -0.035801246762275696, -0.0019092432921752334, -0.029957309365272522, -0.007117624394595623, 0.01950136199593544, 0.03664879873394966, -0.020137088373303413, -0.023347266018390656, 0.08971085399389267, 0.00516971480101347, 0.050085872411727905, -0.022632304579019547, -0.005027259234338999, -0.027102002874016762, 0.06915169954299927, 0.0013029997935518622, 0.017689192667603493, 0.009980677627027035, -0.008764904923737049, -0.03800809383392334, -0.029612688347697258, 0.05087962746620178, 0.032240815460681915, -0.009346778504550457, -0.02199050784111023, -0.025282803922891617, 0.014376815408468246, 0.03630366548895836, 0.0656920075416565, -0.014159136451780796, 0.01677713729441166, -0.036684345453977585, 0.04181422293186188, -0.03661084547638893, -0.0009762952686287463, -0.020955290645360947, 0.037498973309993744, -0.021638048812747, 0.0194693636149168, -0.009985314682126045, -0.08341575413942337, -0.0021505558397620916, 0.0004300408763810992, -0.03864736109972, 0.09971991181373596, -0.0420842319726944, -0.0013092535082250834, -0.0484723262488842, 0.019459035247564316, -0.01095435582101345, 0.020641816779971123, 0.07297729700803757, 0.060642678290605545, 0.026820100843906403, 0.010149716399610043, -0.042748551815748215, -0.02918965183198452, -0.034213971346616745, 0.08885794132947922, -0.025734225288033485, 0.02929290570318699, -0.0154344467446208, -0.044630784541368484, 0.03935050219297409, 0.01972702145576477, -0.037364643067121506, -0.016189686954021454, -0.07640594244003296, -0.018994292244315147, 0.018101777881383896, -0.014673523604869843, 0.02799123339354992, -0.010238418355584145, 0.01709965616464615, -0.019193274900317192, 0.04031998664140701, -0.03897527605295181, 0.10559485107660294, -0.054177287966012955, 0.023972777649760246, 0.005270805209875107, -0.04176589474081993, 0.05416272580623627, 0.030821776017546654, -0.025223834440112114, 0.0030505741015076637, 0.016425693407654762, 0.006580985151231289, -0.02823006734251976, -0.009023276157677174, -0.056368544697761536, -0.004875159356743097, -0.02268892526626587, -0.0034240498207509518, 0.03267257660627365, -0.03636043891310692, 0.04608139395713806, -0.04523656144738197, -0.010927774012088776, -0.005379600916057825, 0.03045721910893917, 0.0389670729637146, 0.028936419636011124, -0.029645929113030434, 0.030180001631379128, 0.003528584260493517, -0.017787493765354156, 0.05465669929981232, 0.02838345430791378, 0.06302227824926376, 0.029360666871070862, -0.017426690086722374, 0.0001560311357025057, -0.051588669419288635, -0.002858480205759406, -0.05941910296678543, 0.009235854260623455, 0.01826690323650837, -0.03919863700866699, 0.004400157369673252, -0.007518859580159187, -0.0030373611953109503, -0.06218826398253441, 0.0023394592572003603, 0.06459461897611618, 0.025311214849352837, -0.07068324089050293, -0.07035823166370392, -0.011732452549040318, -0.0036581538151949644, 0.03272993490099907, 0.06999839842319489, -0.013980642892420292, -0.010885556228458881, 0.04285767301917076, 0.012768624350428581, 0.035443015396595, -0.015054207295179367, 0.015541168861091137, -0.01729157753288746, 0.05152300000190735, 0.031376104801893234, -0.055162589997053146, -0.04728157818317413, 0.016747761517763138, -0.011066374368965626, -0.023549759760499, -0.04256664589047432, -0.029114289209246635, -0.007128818891942501] - Python类型: <class 'list'>
2025-07-01 09:34:08,803 - vector_store - INFO - 成功插入 910 个分块到Milvus
2025-07-01 09:34:08,818 - vector_store - INFO - 准备索引 910 个文档到ES
2025-07-01 09:34:08,945 - elastic_transport.transport - INFO - PUT http://localhost:9200/_bulk [status:200 duration:0.057s]
2025-07-01 09:34:08,947 - vector_store - ERROR - ES批量索引异常: 500 document(s) failed to index.
2025-07-01 09:34:08,948 - vector_store - WARNING - ES存储失败，但Milvus存储成功，系统继续运行
2025-07-01 09:34:08,948 - policy_matcher - INFO - 政策文档添加成功: 北京市产业政策导引.pdf
2025-07-01 09:34:08,950 - __main__ - INFO - 政策文档加载成功
2025-07-01 09:34:08,950 - __main__ - INFO - 系统初始化完成
2025-07-01 09:34:08,950 - __main__ - INFO - 开始测试查询...
2025-07-01 09:34:08,950 - __main__ - INFO - 
=== 测试查询 1: 生物医药行业政策查询 ===
2025-07-01 09:34:08,950 - __main__ - INFO - 查询: 我想查找和生物医药相关的政策
2025-07-01 09:34:08,950 - policy_matcher - INFO - 开始政策匹配: 我想查找和生物医药相关的政策
2025-07-01 09:34:08,951 - retriever - INFO - 开始混合检索: 我想查找和生物医药相关的政策
2025-07-01 09:34:08,952 - retriever - INFO - 查询扩展: 我想查找和生物医药相关的政策 -> ['生命科学', '医药健康', '我想查找和生物医药相关的政策', '医药', '制药', '医疗', '医疗器械']
2025-07-01 09:34:08,952 - retriever - INFO - 构建过滤条件: {}
2025-07-01 09:34:09,004 - vector_store - INFO - Milvus搜索返回 10 个结果
2025-07-01 09:34:09,004 - retriever - INFO - 向量搜索返回 10 个结果
2025-07-01 09:34:09,018 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.014s]
2025-07-01 09:34:09,018 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:34:09,023 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.005s]
2025-07-01 09:34:09,023 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:34:09,028 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 09:34:09,028 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:34:09,028 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 09:34:09,028 - retriever - INFO - 融合结果: 10 个结果
2025-07-01 09:34:09,028 - retriever - INFO - 检索完成，返回 5 个结果
2025-07-01 09:34:09,030 - policy_matcher - INFO - 政策匹配完成，耗时: 0.08秒，返回: 1个结果
2025-07-01 09:34:09,030 - __main__ - INFO - 查询结果: 找到 1 个匹配政策
2025-07-01 09:34:09,030 - __main__ - INFO - 处理时间: 0.08秒
2025-07-01 09:34:09,030 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 09:34:09,030 - __main__ - INFO -      相关性: 0.331
2025-07-01 09:34:09,030 - __main__ - INFO -      摘要: 政策类型：资金支持 | 主要内容：给予奖励，单个药品奖励；给予奖励；给予奖励，单个品种奖励... | 适用条件：应急审批/工信部揭榜挂帅入围医疗器械，且确；必需易短缺药品重点监测清单》中新上市的本市注...
2025-07-01 09:34:09,030 - __main__ - INFO - 建议:
2025-07-01 09:34:09,031 - __main__ - INFO -   - 相关政策较少，建议：
2025-07-01 09:34:09,031 - __main__ - INFO -   - 1. 扩大查询范围，考虑相关行业政策
2025-07-01 09:34:09,031 - __main__ - INFO -   - 2. 关注上级政府的通用性政策
2025-07-01 09:34:09,031 - __main__ - INFO - 
=== 测试查询 2: 初创企业政策查询 ===
2025-07-01 09:34:09,031 - __main__ - INFO - 查询: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 09:34:09,031 - policy_matcher - INFO - 开始政策匹配: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 09:34:09,031 - retriever - INFO - 开始混合检索: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 09:34:09,031 - retriever - INFO - 查询扩展: 我是一家小型初创企业，现阶段有什么政策比较适用 -> ['我是一家小型初创企业 现阶段有什么政策比较适用', '新成立', '创业', '起步', '小微', '小企业']
2025-07-01 09:34:09,031 - retriever - INFO - 构建过滤条件: {}
2025-07-01 09:34:09,078 - vector_store - INFO - Milvus搜索返回 10 个结果
2025-07-01 09:34:09,078 - retriever - INFO - 向量搜索返回 10 个结果
2025-07-01 09:34:09,082 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 09:34:09,082 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:34:09,085 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 09:34:09,086 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:34:09,089 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 09:34:09,089 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:34:09,089 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 09:34:09,089 - retriever - INFO - 融合结果: 10 个结果
2025-07-01 09:34:09,090 - retriever - INFO - 企业规模过滤: 5 -> 5
2025-07-01 09:34:09,090 - retriever - INFO - 检索完成，返回 5 个结果
2025-07-01 09:34:09,090 - policy_matcher - INFO - 政策匹配完成，耗时: 0.06秒，返回: 1个结果
2025-07-01 09:34:09,090 - __main__ - INFO - 查询结果: 找到 1 个匹配政策
2025-07-01 09:34:09,090 - __main__ - INFO - 处理时间: 0.06秒
2025-07-01 09:34:09,090 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 09:34:09,090 - __main__ - INFO -      相关性: 0.338
2025-07-01 09:34:09,090 - __main__ - INFO -      摘要: 政策类型：税收优惠 | 主要内容：给予资金支持；给予不超过30 万元的资金支持；给予不超过20 万元的资金支持... | 适用条件：要求 | 纳入支持的科技型小微企业须满足以下条件：；当年入库的科技型...
2025-07-01 09:34:09,090 - __main__ - INFO - 建议:
2025-07-01 09:34:09,090 - __main__ - INFO -   - 相关政策较少，建议：
2025-07-01 09:34:09,090 - __main__ - INFO -   - 1. 扩大查询范围，考虑相关行业政策
2025-07-01 09:34:09,090 - __main__ - INFO -   - 2. 关注上级政府的通用性政策
2025-07-01 09:34:09,090 - __main__ - INFO - 
=== 测试查询 3: 创新资金政策查询 ===
2025-07-01 09:34:09,090 - __main__ - INFO - 查询: 有哪些研发创新方面的资金支持政策
2025-07-01 09:34:09,090 - policy_matcher - INFO - 开始政策匹配: 有哪些研发创新方面的资金支持政策
2025-07-01 09:34:09,091 - retriever - INFO - 开始混合检索: 有哪些研发创新方面的资金支持政策
2025-07-01 09:34:09,091 - retriever - INFO - 查询扩展: 有哪些研发创新方面的资金支持政策 -> ['资助', '奖励', '专利', '研发', '专项资金', '补贴', '技术', '科技', '有哪些研发创新方面的资金支持政策']
2025-07-01 09:34:09,091 - retriever - INFO - 构建过滤条件: {}
2025-07-01 09:34:09,128 - vector_store - INFO - Milvus搜索返回 10 个结果
2025-07-01 09:34:09,128 - retriever - INFO - 向量搜索返回 10 个结果
2025-07-01 09:34:09,132 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 09:34:09,132 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:34:09,134 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 09:34:09,134 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:34:09,136 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 09:34:09,136 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 09:34:09,136 - retriever - INFO - 关键词搜索返回 0 个结果
2025-07-01 09:34:09,136 - retriever - INFO - 融合结果: 10 个结果
2025-07-01 09:34:09,136 - retriever - INFO - 检索完成，返回 5 个结果
2025-07-01 09:34:09,136 - policy_matcher - INFO - 政策匹配完成，耗时: 0.05秒，返回: 1个结果
2025-07-01 09:34:09,136 - __main__ - INFO - 查询结果: 找到 1 个匹配政策
2025-07-01 09:34:09,136 - __main__ - INFO - 处理时间: 0.05秒
2025-07-01 09:34:09,136 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 09:34:09,136 - __main__ - INFO -      相关性: 0.522
2025-07-01 09:34:09,136 - __main__ - INFO -      摘要: 政策类型：资金支持 | 主要内容：给予支持；给予不超过 2000万元资金支持；给予支持... | 适用条件：要求 ；应用且取得显著成效的技术（服务），......
2025-07-01 09:34:09,136 - __main__ - INFO - 建议:
2025-07-01 09:34:09,136 - __main__ - INFO -   - 相关政策较少，建议：
2025-07-01 09:34:09,136 - __main__ - INFO -   - 1. 扩大查询范围，考虑相关行业政策
2025-07-01 09:34:09,137 - __main__ - INFO -   - 2. 关注上级政府的通用性政策
2025-07-01 09:34:09,137 - __main__ - INFO - 启动API服务...
2025-07-01 09:34:49,746 - elastic_transport.transport - INFO - GET http://localhost:9200/policy_index/_stats [status:200 duration:0.014s]
2025-07-01 11:38:09,940 - __main__ - INFO - 启动政策匹配RAG检索系统
2025-07-01 11:38:09,941 - __main__ - INFO - 正在初始化政策匹配系统...
2025-07-01 11:38:10,921 - vector_store - INFO - 已连接到Milvus: localhost:19530
2025-07-01 11:38:10,932 - vector_store - INFO - 加载现有集合: policy_collection
2025-07-01 11:38:10,953 - elastic_transport.transport - INFO - HEAD http://localhost:9200/ [status:200 duration:0.014s]
2025-07-01 11:38:10,953 - vector_store - INFO - 已连接到Elasticsearch: localhost:9200
2025-07-01 11:38:10,962 - elastic_transport.transport - INFO - HEAD http://localhost:9200/policy_index [status:200 duration:0.009s]
2025-07-01 11:38:10,963 - vector_store - INFO - Elasticsearch索引就绪: policy_index
2025-07-01 11:38:10,974 - elastic_transport.transport - INFO - GET http://localhost:9200/policy_index/_stats [status:200 duration:0.009s]
2025-07-01 11:38:13,494 - embeddings - INFO - 正在加载嵌入模型: moka-ai/m3e-base
2025-07-01 11:38:13,495 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: moka-ai/m3e-base
2025-07-01 11:38:21,149 - embeddings - INFO - 模型加载完成，使用设备: cpu
2025-07-01 11:38:21,150 - __main__ - INFO - 系统状态: {'status': '运行中', 'vector_store': {'milvus_connected': True, 'elasticsearch_connected': True, 'milvus_stats': {'row_count': 4550}, 'elasticsearch_stats': {'doc_count': 0, 'store_size': 227}}, 'embedding_model': {'status': 'loaded', 'model_name': 'moka-ai/m3e-base', 'device': 'cpu', 'embedding_dim': 768, 'max_seq_length': 512}, 'components': {'document_processor': '正常', 'retriever': '正常', 'matcher': '正常'}}
2025-07-01 11:38:21,150 - __main__ - INFO - 发现政策文档: 北京市产业政策导引.pdf，开始加载...
2025-07-01 11:38:21,151 - policy_matcher - INFO - 开始添加政策文档: 北京市产业政策导引.pdf
2025-07-01 11:38:21,524 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-07-01 11:38:21,525 - jieba - DEBUG - Loading model from cache /var/folders/w7/v83dx60s0wnf6qh99wjhckhc0000gn/T/jieba.cache
2025-07-01 11:38:21,786 - jieba - DEBUG - Loading model cost 0.262 seconds.
2025-07-01 11:38:21,786 - jieba - DEBUG - Prefix dict has been built successfully.
2025-07-01 11:38:21,787 - document_processor - INFO - 开始处理文档: 北京市产业政策导引.pdf
2025-07-01 11:38:32,270 - document_processor - INFO - 文档处理完成: 北京市产业政策导引.pdf, 生成 910 个分块
2025-07-01 11:38:32,272 - embeddings - INFO - 开始编码 910 个文本
2025-07-01 11:39:51,008 - embeddings - INFO - 编码完成，输出形状: (910, 768)
2025-07-01 11:39:51,021 - vector_store - INFO - 准备插入数据: chunks数量=910, embeddings形状=(910, 768)
2025-07-01 11:39:51,021 - vector_store - INFO - chunk_ids类型: <class 'list'>, 样例: ['policy_157f44c2_chunk_0', 'policy_157f44c2_chunk_1']
2025-07-01 11:39:51,021 - vector_store - INFO - embedding_list类型: <class 'list'>, 长度: 910
2025-07-01 11:39:51,021 - vector_store - INFO - 验证字段 chunk_id (Milvus类型: 21) - 样例值: policy_157f44c2_chunk_0 - Python类型: <class 'str'>
2025-07-01 11:39:51,021 - vector_store - INFO - 验证字段 policy_id (Milvus类型: 21) - 样例值: policy_157f44c2 - Python类型: <class 'str'>
2025-07-01 11:39:51,021 - vector_store - INFO - 验证字段 content (Milvus类型: 21) - 样例值: 北京市产业政策导引 
（市级版） - Python类型: <class 'str'>
2025-07-01 11:39:51,021 - vector_store - INFO - 验证字段 section (Milvus类型: 21) - 样例值: 开篇 - Python类型: <class 'str'>
2025-07-01 11:39:51,021 - vector_store - INFO - 验证字段 chunk_type (Milvus类型: 21) - 样例值: text - Python类型: <class 'str'>
2025-07-01 11:39:51,022 - vector_store - INFO - 验证字段 embedding (Milvus类型: 101) - 样例值: [-0.009589307941496372, 0.02911415882408619, -0.017605118453502655, 0.04515969753265381, -0.008898379281163216, -0.0004742610326502472, 0.03711366653442383, 0.009216396138072014, -0.028580965474247932, -0.004692758899182081, 0.061252694576978683, 0.004142737481743097, -0.00015245744725689292, -0.03795205056667328, -0.05199399217963219, -0.047508805990219116, 0.03326359763741493, 0.042946770787239075, -0.05036120489239693, -0.0045363628305494785, 0.03374297171831131, -0.013076845556497574, -0.028622999787330627, 0.011045549064874649, -0.008509015664458275, 0.009151282720267773, 0.0024055256508290768, -0.0009728657896630466, -0.033678777515888214, 0.0015214345185086131, 0.03267497941851616, -0.057704951614141464, -0.01816404238343239, 0.001693681930191815, -0.003161015221849084, 0.024775955826044083, -0.013540956191718578, -0.02623024582862854, 0.05934133008122444, 0.029546277597546577, -0.012443392537534237, 0.04352046549320221, -0.0014886443968862295, -0.008488436229526997, -0.008628182113170624, 0.027824610471725464, -0.006604868918657303, -0.00821163970977068, -0.040158990770578384, 0.009263608604669571, -0.007601940538734198, 0.3768092393875122, -0.01491926796734333, 0.005379746202379465, -0.04145354405045509, 0.06345204263925552, -0.03630485385656357, -0.009675629436969757, 0.010845758020877838, 0.039076875895261765, -0.005835541058331728, -0.01878809928894043, 0.0059173936024308205, -0.021044433116912842, 0.026823166757822037, -0.02284947596490383, -0.0548282191157341, -0.035297710448503494, 0.028276700526475906, -0.027777930721640587, 0.022341134026646614, -0.028723761439323425, 0.010176535695791245, -0.001923352712765336, 0.03312109410762787, 0.024043748155236244, 0.011900484561920166, -0.00845291931182146, 0.0014036806533113122, -0.012982417829334736, 0.014434284530580044, 0.0502677857875824, -0.012608615681529045, 0.0030357795767486095, -0.08627171814441681, -0.01438103336840868, -0.0019654601346701384, 0.021047798916697502, 0.013121829368174076, 0.0571318045258522, -0.06971745193004608, -0.053690601140260696, -0.005233254283666611, -0.008413158357143402, -0.02017509937286377, 0.002872430719435215, 0.053301695734262466, -0.05862448364496231, -0.036340124905109406, -0.00010847074736375362, 0.03970731794834137, -0.013180913403630257, -0.010341119952499866, -0.04928994178771973, 0.07712284475564957, 0.014791151508688927, -0.059449516236782074, 0.0129732396453619, 0.019919831305742264, -0.010746200568974018, -0.02472183108329773, -0.03969830274581909, 0.0226453747600317, 0.02169407159090042, -0.04375375062227249, -0.018663236871361732, -0.0026338407769799232, -0.0037480355240404606, 0.027444249019026756, 0.004402159247547388, -0.008972407318651676, 0.039672669023275375, -0.008463398553431034, -0.060849398374557495, 0.024426542222499847, 0.009231614880263805, 0.0036453548818826675, 0.0406363308429718, -0.02083449438214302, 0.036203619092702866, 0.010913846082985401, -0.018755804747343063, 0.011556701734662056, -0.0160507969558239, 0.020260801538825035, 0.003158723935484886, -0.0055779810063540936, -0.041698843240737915, -0.03637868911027908, -0.035921353846788406, 0.06556741893291473, 0.029048891738057137, 0.04013197496533394, -0.051235370337963104, -0.04153929278254509, 0.005427155643701553, 0.008758113719522953, 0.011159452609717846, 0.043652091175317764, -0.040720127522945404, -0.004773605149239302, 0.030425705015659332, 0.038182493299245834, 0.001564845209941268, 0.020213427022099495, 0.030758051201701164, 0.02055022120475769, 0.028158511966466904, -0.07821311801671982, -0.038057200610637665, 0.039441123604774475, -0.003705583279952407, 0.044595569372177124, -0.004892559722065926, 0.019788745790719986, 0.007673455867916346, 0.02045273967087269, -0.07352282106876373, -0.025709766894578934, 0.010276333428919315, 0.010867963545024395, -0.01248021051287651, 0.008558572269976139, -0.019154522567987442, -0.013651279732584953, -0.0453471764922142, -0.019337618723511696, 0.012558511458337307, -0.04601521044969559, -0.030041612684726715, -0.028040865436196327, 0.032115161418914795, 0.020124176517128944, 0.024890819564461708, -0.034578800201416016, 0.03267127275466919, -0.048211950808763504, 0.005665671080350876, 0.05325033888220787, -0.013328064233064651, -0.01906873844563961, -0.010803215205669403, -0.024040287360548973, 0.0011679499875754118, 0.06144373491406441, 0.037063393741846085, -0.02414027974009514, 0.034590207040309906, 0.0002138784620910883, 0.012140613049268723, -0.02405504509806633, -0.05000852793455124, 0.004672967828810215, -0.01480168104171753, 0.006675413344055414, 0.0972711369395256, 0.034512847661972046, 0.06292875111103058, 0.009348156861960888, -0.01494918204843998, -0.06759670376777649, -0.06978300958871841, 0.0232897587120533, 0.05494898930191994, -0.008022705093026161, 0.030105656012892723, -0.09707214683294296, 0.038521941751241684, -0.019789280369877815, 0.04824909195303917, 0.06329125165939331, -0.028315721079707146, -0.01932419277727604, -0.021181587129831314, -0.026322539895772934, -0.01419211458414793, -0.0008855590131133795, 0.03259635716676712, -0.0033729998394846916, 0.021748656406998634, 0.02658071182668209, -0.01077377237379551, 0.02914053201675415, 0.010506127960979939, -0.00022930283739697188, 0.07139137387275696, -0.0288256723433733, 0.015812374651432037, 0.024732865393161774, -0.03838037699460983, -0.016788508743047714, 0.009803450666368008, 0.030756089836359024, -0.000818780914414674, 0.01877676323056221, -0.006893815007060766, -0.02332308515906334, -0.03040100447833538, -0.055977363139390945, -0.05616838485002518, 0.01870473474264145, 0.018247749656438828, 0.0018340129172429442, -0.05407395213842392, -0.023001838475465775, -0.02583295851945877, 0.02642855793237686, 0.04169720411300659, 0.03082786314189434, -0.03451421111822128, 0.005526895169168711, -0.03213411569595337, 0.02497667260468006, 0.0029323389753699303, 0.03324692323803902, -0.011319850571453571, -0.01809949427843094, -0.020266283303499222, -0.029924612492322922, -0.02093447931110859, -0.004756493493914604, 0.06777933239936829, 0.03589344397187233, -0.016932327300310135, 0.020171288400888443, -0.03975522518157959, 0.04156431183218956, -0.008397664874792099, -0.03129595145583153, -0.07036636769771576, 0.05021882429718971, 0.04966488480567932, 0.03049454838037491, -0.028772899881005287, -0.018010294064879417, -0.04312371090054512, 0.0046417745761573315, 0.03925392031669617, -0.019701730459928513, -0.053943932056427, -0.030901964753866196, -0.029882483184337616, 0.01791478507220745, 0.027659915387630463, 0.08985470980405807, -0.05198268964886665, -0.03677350655198097, 0.018498342484235764, -0.03612259402871132, 0.0012379527324810624, 0.05046892166137695, -0.03301394730806351, 0.018706364557147026, 0.01413088757544756, -0.01602291315793991, 0.027428526431322098, 0.026961391791701317, -0.0035943014081567526, 0.017675628885626793, -0.02199414186179638, 0.03260156139731407, -0.023268917575478554, -0.023493386805057526, -0.02067587524652481, -0.0018503885949030519, 0.007983824238181114, -0.03271932154893875, 0.0006211347645148635, -0.01979614980518818, -0.005424872972071171, 0.039955489337444305, -0.010059586726129055, 0.000972070440184325, 0.10771221667528152, 0.06482519954442978, 0.03266149386763573, 0.02456350065767765, 0.00936193484812975, -0.008178982883691788, 0.05346611514687538, 0.028918839991092682, -0.07390716671943665, -0.006112892646342516, 0.028687957674264908, 0.054268978536129, 0.06121604144573212, -0.007828090339899063, -0.03363944590091705, -0.03989904373884201, 0.015971971675753593, -0.007727424614131451, -0.032877519726753235, 0.016885342076420784, -0.010724813677370548, -0.016950199380517006, -0.01989579387009144, -0.00168701377697289, -0.051006659865379333, -0.0014523814897984266, -0.04616301879286766, -0.030870657414197922, 1.5738576621515676e-05, -0.03532016649842262, -0.01884891837835312, -0.014430598355829716, -0.014676989056169987, 0.057766810059547424, 0.006159622687846422, 0.02132817544043064, 0.03129813075065613, -0.016254132613539696, -0.019971000030636787, -0.044640813022851944, 0.02695411629974842, -0.008467409759759903, 0.00490883132442832, 0.030902333557605743, -0.020411167293787003, -0.055149175226688385, -0.02834024652838707, 0.026349080726504326, 0.010783246718347073, 0.05821895971894264, -0.0026978147216141224, 0.03953702002763748, 0.01787497103214264, -0.05887347087264061, -0.00027197625604458153, -0.028730303049087524, -0.02215060405433178, 0.07047837227582932, -0.032375890761613846, -0.00011279471073066816, 0.01315301563590765, -0.0010450751287862659, 0.020898284390568733, -0.013241070322692394, -0.024628158658742905, -0.019909389317035675, -0.05343034118413925, 0.0022840951569378376, -0.017856450751423836, 0.03752543777227402, 0.024396277964115143, -0.004686280619353056, -0.016203105449676514, -0.009482908993959427, 0.03407151252031326, -0.002740207128226757, 0.03272382542490959, 0.02651531621813774, -0.058525729924440384, -0.023655390366911888, -0.011790175922214985, 0.03925531357526779, 0.013866443186998367, 0.04840943589806557, 0.01433261763304472, 0.033368755131959915, -0.017562948167324066, -0.07722582668066025, 0.010781972669064999, -0.01323713455349207, -0.058862410485744476, 0.05883099511265755, -0.043963633477687836, -0.03357572853565216, 0.00797117967158556, 0.033708181232213974, -0.0786106288433075, 0.026821736246347427, 0.022951070219278336, -0.011617700569331646, 0.021849937736988068, 0.03693987429141998, -0.001659695990383625, -0.0061637707985937595, -0.044292062520980835, 0.07012653350830078, 0.013633946888148785, 0.008747246116399765, -0.006612675730139017, 0.013270584866404533, -0.014857371337711811, -0.011432196013629436, 0.0065117403864860535, -0.01404486782848835, 0.01858045533299446, -0.02486853487789631, -0.01836327649652958, -0.024927770718932152, 0.02749050408601761, 0.0044959415681660175, -0.008484087884426117, 0.003905565943568945, 0.00446905056014657, -0.02270268090069294, -0.052917368710041046, -0.010605140589177608, 0.00709659606218338, 0.05721830576658249, 0.05082769691944122, 0.004808859899640083, -0.04757297411561012, 0.017576342448592186, -0.01816967874765396, 0.0019217076478525996, -0.019937697798013687, 0.05922657623887062, -0.023297931998968124, -0.009335382841527462, 0.019768856465816498, -0.02407260239124298, 0.029455088078975677, 0.041888874024152756, 0.03524501621723175, -0.03877586871385574, -0.04179271683096886, 0.06196897104382515, -0.007987288758158684, -0.04283953458070755, 0.06542922556400299, 0.0064946124330163, 0.008456920273602009, -0.02566426247358322, 0.020016202703118324, -0.001562338089570403, -0.0006199604249559343, -0.027312463149428368, -0.04545450210571289, 0.011615592055022717, -0.01337212324142456, 0.020239297300577164, -0.023537753149867058, -0.003997112158685923, -0.004092201124876738, -0.02057114616036415, -0.011246242560446262, 0.00971840787678957, -0.008114401251077652, -0.07252760231494904, -0.016493696719408035, 0.04132617264986038, -0.04882003739476204, -0.0026445596013218164, -0.0009650048450566828, 0.018796775490045547, 0.046294763684272766, -0.059855569154024124, 0.04281643033027649, -0.04874449595808983, 0.0025613352190703154, -0.01081911288201809, -0.0037697977386415005, 0.031707651913166046, -0.021693317219614983, 0.015387540683150291, -0.01732710190117359, -0.015074243769049644, 0.0418533980846405, 0.034862905740737915, 0.005694030784070492, 0.0007337104761973023, 0.03324953466653824, 0.001326580299064517, 0.028315981850028038, -0.030011458322405815, -0.012086973525583744, 0.007019157521426678, 0.012758257798850536, -0.0004404193314258009, -0.03769683092832565, -0.011248038150370121, 0.041032496839761734, -0.019792452454566956, 0.02623436599969864, 0.002371096983551979, -0.03930090367794037, 0.0002622672473080456, 0.04479384422302246, -0.035239823162555695, -0.06436390429735184, -0.005533753894269466, 0.021474644541740417, 0.006803956348448992, 0.033541347831487656, -0.015958765521645546, 0.0075390939600765705, -0.08871641755104065, -0.056117936968803406, 0.009939104318618774, 0.0015055258991196752, 0.05826868116855621, -0.02165314555168152, 0.021653825417160988, -0.057069793343544006, -0.026611806824803352, -0.013909755274653435, 0.06283603608608246, 0.012419736944139004, -0.04626639932394028, 0.01178447250276804, -0.03799920156598091, 0.010784066282212734, -0.02245737984776497, 0.022549331188201904, -0.07572583854198456, -0.017417579889297485, 0.033408280462026596, -0.03186677768826485, 0.02544129081070423, -0.03759037330746651, 0.004175000824034214, -0.035863246768713, -0.004104748833924532, 0.04276532679796219, -0.020994527265429497, 0.017737165093421936, 0.016124460846185684, -0.0408937931060791, -0.02875874936580658, 0.03717256337404251, 0.004172440618276596, 0.021906953305006027, -0.046760935336351395, -0.060809068381786346, -0.014605913311243057, -0.01680750772356987, 0.024257700890302658, 0.03192616254091263, 0.019896337762475014, 0.07277151942253113, -0.03467482328414917, -0.0296962708234787, -0.020838161930441856, -0.04029468074440956, 0.027133222669363022, -0.054488155990839005, 0.020477961748838425, 0.00099698337726295, -0.007412747014313936, -0.0006891798693686724, 0.008630702272057533, 0.07006815820932388, -0.0006025220500305295, 0.006870594806969166, -0.02347354218363762, -0.004952014423906803, -0.012581387534737587, 0.0016122444067150354, -0.003527534892782569, -0.009774364531040192, 0.012716458179056644, 0.0009260065853595734, 0.03004925511777401, 0.011623555794358253, 0.06507840007543564, -0.050444841384887695, 0.008790462277829647, -0.02803892455995083, -0.06705816090106964, 0.02005065605044365, 0.035633061081171036, 0.0002218412992078811, 0.0780092179775238, -0.018138019368052483, -0.023708099499344826, 0.010249351151287556, -0.035801246762275696, -0.0019092432921752334, -0.029957309365272522, -0.007117624394595623, 0.01950136199593544, 0.03664879873394966, -0.020137088373303413, -0.023347266018390656, 0.08971085399389267, 0.00516971480101347, 0.050085872411727905, -0.022632304579019547, -0.005027259234338999, -0.027102002874016762, 0.06915169954299927, 0.0013029997935518622, 0.017689192667603493, 0.009980677627027035, -0.008764904923737049, -0.03800809383392334, -0.029612688347697258, 0.05087962746620178, 0.032240815460681915, -0.009346778504550457, -0.02199050784111023, -0.025282803922891617, 0.014376815408468246, 0.03630366548895836, 0.0656920075416565, -0.014159136451780796, 0.01677713729441166, -0.036684345453977585, 0.04181422293186188, -0.03661084547638893, -0.0009762952686287463, -0.020955290645360947, 0.037498973309993744, -0.021638048812747, 0.0194693636149168, -0.009985314682126045, -0.08341575413942337, -0.0021505558397620916, 0.0004300408763810992, -0.03864736109972, 0.09971991181373596, -0.0420842319726944, -0.0013092535082250834, -0.0484723262488842, 0.019459035247564316, -0.01095435582101345, 0.020641816779971123, 0.07297729700803757, 0.060642678290605545, 0.026820100843906403, 0.010149716399610043, -0.042748551815748215, -0.02918965183198452, -0.034213971346616745, 0.08885794132947922, -0.025734225288033485, 0.02929290570318699, -0.0154344467446208, -0.044630784541368484, 0.03935050219297409, 0.01972702145576477, -0.037364643067121506, -0.016189686954021454, -0.07640594244003296, -0.018994292244315147, 0.018101777881383896, -0.014673523604869843, 0.02799123339354992, -0.010238418355584145, 0.01709965616464615, -0.019193274900317192, 0.04031998664140701, -0.03897527605295181, 0.10559485107660294, -0.054177287966012955, 0.023972777649760246, 0.005270805209875107, -0.04176589474081993, 0.05416272580623627, 0.030821776017546654, -0.025223834440112114, 0.0030505741015076637, 0.016425693407654762, 0.006580985151231289, -0.02823006734251976, -0.009023276157677174, -0.056368544697761536, -0.004875159356743097, -0.02268892526626587, -0.0034240498207509518, 0.03267257660627365, -0.03636043891310692, 0.04608139395713806, -0.04523656144738197, -0.010927774012088776, -0.005379600916057825, 0.03045721910893917, 0.0389670729637146, 0.028936419636011124, -0.029645929113030434, 0.030180001631379128, 0.003528584260493517, -0.017787493765354156, 0.05465669929981232, 0.02838345430791378, 0.06302227824926376, 0.029360666871070862, -0.017426690086722374, 0.0001560311357025057, -0.051588669419288635, -0.002858480205759406, -0.05941910296678543, 0.009235854260623455, 0.01826690323650837, -0.03919863700866699, 0.004400157369673252, -0.007518859580159187, -0.0030373611953109503, -0.06218826398253441, 0.0023394592572003603, 0.06459461897611618, 0.025311214849352837, -0.07068324089050293, -0.07035823166370392, -0.011732452549040318, -0.0036581538151949644, 0.03272993490099907, 0.06999839842319489, -0.013980642892420292, -0.010885556228458881, 0.04285767301917076, 0.012768624350428581, 0.035443015396595, -0.015054207295179367, 0.015541168861091137, -0.01729157753288746, 0.05152300000190735, 0.031376104801893234, -0.055162589997053146, -0.04728157818317413, 0.016747761517763138, -0.011066374368965626, -0.023549759760499, -0.04256664589047432, -0.029114289209246635, -0.007128818891942501] - Python类型: <class 'list'>
2025-07-01 11:39:53,769 - vector_store - INFO - 成功插入 910 个分块到Milvus
2025-07-01 11:39:53,802 - vector_store - INFO - 准备索引 910 个文档到ES
2025-07-01 11:39:53,935 - elastic_transport.transport - INFO - PUT http://localhost:9200/_bulk [status:200 duration:0.052s]
2025-07-01 11:39:53,936 - vector_store - ERROR - ES批量索引异常: 500 document(s) failed to index.
2025-07-01 11:39:53,937 - vector_store - WARNING - ES存储失败，但Milvus存储成功，系统继续运行
2025-07-01 11:39:53,937 - policy_matcher - INFO - 政策文档添加成功: 北京市产业政策导引.pdf
2025-07-01 11:39:53,939 - __main__ - INFO - 政策文档加载成功
2025-07-01 11:39:53,939 - __main__ - INFO - 系统初始化完成
2025-07-01 11:39:53,940 - __main__ - INFO - 开始测试查询...
2025-07-01 11:39:53,940 - __main__ - INFO - 
=== 测试自然语言查询功能 ===
2025-07-01 11:39:53,940 - __main__ - INFO - 
--- 测试 1: 生物医药行业政策查询 ---
2025-07-01 11:39:53,940 - __main__ - INFO - 查询: 我想查找和生物医药相关的政策
2025-07-01 11:39:53,941 - policy_matcher - INFO - 开始政策匹配: 我想查找和生物医药相关的政策
2025-07-01 11:39:53,942 - retriever - INFO - 开始混合检索: 我想查找和生物医药相关的政策
2025-07-01 11:39:53,944 - query_understanding - INFO - 开始处理自然语言查询: 我想查找和生物医药相关的政策
2025-07-01 11:39:53,947 - query_understanding - INFO - 查询理解完成，主要意图: find_policy, 复杂度: simple
2025-07-01 11:39:53,947 - retriever - INFO - 查询理解: 寻找相关政策 | 行业领域: 生物医药
2025-07-01 11:39:53,947 - retriever - INFO - 合并过滤条件: {'industries': ['生物医药']}
2025-07-01 11:39:53,947 - retriever - INFO - 生成优化查询: 6 个
2025-07-01 11:39:54,003 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:39:54,055 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:39:54,105 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:39:54,145 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:39:54,183 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:39:54,235 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:39:54,235 - retriever - INFO - 增强向量搜索返回 40 个结果
2025-07-01 11:39:54,249 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.014s]
2025-07-01 11:39:54,250 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:54,254 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.005s]
2025-07-01 11:39:54,254 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:54,257 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 11:39:54,257 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:54,260 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:39:54,260 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:54,263 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:39:54,263 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:54,268 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 11:39:54,268 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:54,268 - retriever - INFO - 增强关键词搜索返回 0 个结果
2025-07-01 11:39:54,268 - retriever - INFO - 智能融合结果: 10 个结果
2025-07-01 11:39:54,268 - retriever - INFO - 检索完成，返回 5 个结果
2025-07-01 11:39:54,270 - policy_matcher - INFO - 政策匹配完成，耗时: 0.33秒，返回: 1个结果
2025-07-01 11:39:54,270 - __main__ - INFO - 查询结果: 找到 1 个匹配政策
2025-07-01 11:39:54,270 - __main__ - INFO - 处理时间: 0.33秒
2025-07-01 11:39:54,270 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 11:39:54,270 - __main__ - INFO -      相关性: 0.318
2025-07-01 11:39:54,270 - __main__ - INFO -      摘要: 政策类型：资金支持 | 主要内容：给予奖励，单个药品奖励；给予奖励；给予奖励，单个品种奖励... | 适用条件：应急审批/工信部揭榜挂帅入围医疗器械，且确；必需易短缺药品重点监测清单》中新上市的本市注...
2025-07-01 11:39:54,270 - __main__ - INFO - 建议:
2025-07-01 11:39:54,270 - __main__ - INFO -   - 相关政策较少，建议：
2025-07-01 11:39:54,270 - __main__ - INFO -   - 1. 扩大查询范围，考虑相关行业政策
2025-07-01 11:39:54,270 - __main__ - INFO -   - 2. 关注上级政府的通用性政策
2025-07-01 11:39:54,270 - __main__ - INFO - 
--- 测试 2: 初创企业政策查询 ---
2025-07-01 11:39:54,270 - __main__ - INFO - 查询: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 11:39:54,270 - policy_matcher - INFO - 开始政策匹配: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 11:39:54,270 - retriever - INFO - 开始混合检索: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 11:39:54,270 - query_understanding - INFO - 开始处理自然语言查询: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 11:39:54,270 - query_understanding - INFO - 查询理解完成，主要意图: check_eligibility, 复杂度: complex
2025-07-01 11:39:54,270 - retriever - INFO - 查询理解: 检查政策适用性 | 企业规模: 初创企业, 小型企业
2025-07-01 11:39:54,270 - retriever - INFO - 合并过滤条件: {'enterprise_scales': ['初创企业', '小型企业'], 'prefer_startup_friendly': True, 'exclude_high_barrier': True}
2025-07-01 11:39:54,270 - retriever - INFO - 生成优化查询: 8 个
2025-07-01 11:39:54,305 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:39:54,347 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:39:54,382 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:39:54,419 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:39:54,456 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:39:54,492 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:39:54,528 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:39:54,562 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:39:54,562 - retriever - INFO - 增强向量搜索返回 63 个结果
2025-07-01 11:39:54,569 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.006s]
2025-07-01 11:39:54,569 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:54,574 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.006s]
2025-07-01 11:39:54,574 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:54,579 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.005s]
2025-07-01 11:39:54,579 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:54,582 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:39:54,582 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:54,585 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 11:39:54,585 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:54,588 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:39:54,588 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:54,592 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:39:54,592 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:54,597 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.005s]
2025-07-01 11:39:54,597 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:54,597 - retriever - INFO - 增强关键词搜索返回 0 个结果
2025-07-01 11:39:54,597 - retriever - INFO - 智能融合结果: 10 个结果
2025-07-01 11:39:54,598 - retriever - INFO - 初创企业规模过滤: 5 -> 3
2025-07-01 11:39:54,598 - retriever - INFO - 检索完成，返回 3 个结果
2025-07-01 11:39:54,599 - policy_matcher - INFO - 政策匹配完成，耗时: 0.33秒，返回: 1个结果
2025-07-01 11:39:54,599 - __main__ - INFO - 查询结果: 找到 1 个匹配政策
2025-07-01 11:39:54,599 - __main__ - INFO - 处理时间: 0.33秒
2025-07-01 11:39:54,599 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 11:39:54,599 - __main__ - INFO -      相关性: 0.353
2025-07-01 11:39:54,599 - __main__ - INFO -      摘要: 政策类型：税收优惠 | 主要内容：给予支持，支持资；给予资金支持；给予不超过 30 万元的资金支持... | 适用条件：应链上下游开展股权投资，加强资源整合。用好北京股权交易中心“专精特；需求，开展多...
2025-07-01 11:39:54,599 - __main__ - INFO - 建议:
2025-07-01 11:39:54,599 - __main__ - INFO -   - 相关政策较少，建议：
2025-07-01 11:39:54,599 - __main__ - INFO -   - 1. 扩大查询范围，考虑相关行业政策
2025-07-01 11:39:54,599 - __main__ - INFO -   - 2. 关注上级政府的通用性政策
2025-07-01 11:39:54,599 - __main__ - INFO - 
--- 测试 3: 创新资金政策查询 ---
2025-07-01 11:39:54,599 - __main__ - INFO - 查询: 有哪些研发创新方面的资金支持政策
2025-07-01 11:39:54,599 - policy_matcher - INFO - 开始政策匹配: 有哪些研发创新方面的资金支持政策
2025-07-01 11:39:54,599 - retriever - INFO - 开始混合检索: 有哪些研发创新方面的资金支持政策
2025-07-01 11:39:54,599 - query_understanding - INFO - 开始处理自然语言查询: 有哪些研发创新方面的资金支持政策
2025-07-01 11:39:54,599 - query_understanding - INFO - 查询理解完成，主要意图: get_funding, 复杂度: moderate
2025-07-01 11:39:54,599 - retriever - INFO - 查询理解: 寻找资金支持 | 政策类型: 创新支持, 资金支持
2025-07-01 11:39:54,599 - retriever - INFO - 合并过滤条件: {'policy_types': ['创新支持', '资金支持']}
2025-07-01 11:39:54,599 - retriever - INFO - 生成优化查询: 8 个
2025-07-01 11:39:54,641 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:39:54,675 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:39:54,711 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:39:54,746 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:39:54,781 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:39:54,818 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:39:54,855 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:39:54,893 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:39:54,894 - retriever - INFO - 增强向量搜索返回 38 个结果
2025-07-01 11:39:54,900 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.006s]
2025-07-01 11:39:54,900 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:54,904 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 11:39:54,904 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:54,909 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 11:39:54,909 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:54,912 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:39:54,912 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:54,915 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 11:39:54,915 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:54,917 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 11:39:54,917 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:54,919 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 11:39:54,919 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:54,921 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 11:39:54,922 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:54,922 - retriever - INFO - 增强关键词搜索返回 0 个结果
2025-07-01 11:39:54,922 - retriever - INFO - 智能融合结果: 10 个结果
2025-07-01 11:39:54,922 - retriever - INFO - 检索完成，返回 5 个结果
2025-07-01 11:39:54,922 - policy_matcher - INFO - 政策匹配完成，耗时: 0.32秒，返回: 1个结果
2025-07-01 11:39:54,922 - __main__ - INFO - 查询结果: 找到 1 个匹配政策
2025-07-01 11:39:54,922 - __main__ - INFO - 处理时间: 0.32秒
2025-07-01 11:39:54,922 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 11:39:54,922 - __main__ - INFO -      相关性: 0.364
2025-07-01 11:39:54,922 - __main__ - INFO -      摘要: 政策类型：人才政策 | 主要内容：给予支持，支持周期一般不超过3 年，每家每年支持；给予支持；给予不超过 2000万元资金支持... | 适用条件：要用于项目研发、人才培养及运行经费等方面。条件要求 ...
2025-07-01 11:39:54,922 - __main__ - INFO - 建议:
2025-07-01 11:39:54,922 - __main__ - INFO -   - 相关政策较少，建议：
2025-07-01 11:39:54,922 - __main__ - INFO -   - 1. 扩大查询范围，考虑相关行业政策
2025-07-01 11:39:54,922 - __main__ - INFO -   - 2. 关注上级政府的通用性政策
2025-07-01 11:39:54,922 - __main__ - INFO - 
=== 测试基础匹配功能 ===
2025-07-01 11:39:54,922 - __main__ - INFO - 基础匹配参数: 行业=生物医药（含医疗器械）, 规模=初创企业（成立<3年，员工<20人）, 需求=资金补贴（如研发费用补助）
2025-07-01 11:39:54,922 - policy_matcher - INFO - 执行基础匹配: 行业=生物医药（含医疗器械）, 规模=初创企业（成立<3年，员工<20人）, 需求=资金补贴（如研发费用补助）
2025-07-01 11:39:54,922 - policy_matcher - INFO - 开始政策匹配: 生物医药 医疗器械 生物技术 资金 补贴 初创
2025-07-01 11:39:54,922 - retriever - INFO - 开始混合检索: 生物医药 医疗器械 生物技术 资金 补贴 初创
2025-07-01 11:39:54,923 - query_understanding - INFO - 开始处理自然语言查询: 生物医药 医疗器械 生物技术 资金 补贴 初创
2025-07-01 11:39:54,923 - query_understanding - INFO - 查询理解完成，主要意图: get_funding, 复杂度: moderate
2025-07-01 11:39:54,923 - retriever - INFO - 查询理解: 寻找资金支持 | 企业规模: 初创企业 | 行业领域: 生物医药 | 政策类型: 创新支持, 资金支持
2025-07-01 11:39:54,923 - retriever - INFO - 合并过滤条件: {'industries': ['生物医药（含医疗器械）'], 'enterprise_scales': ['初创企业（成立<3年，员工<20人）'], 'policy_types': ['创新支持', '资金支持'], 'prefer_startup_friendly': True, 'exclude_high_barrier': True}
2025-07-01 11:39:54,923 - retriever - INFO - 生成优化查询: 8 个
2025-07-01 11:39:54,957 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:39:54,993 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:39:55,219 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:39:55,258 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:39:55,297 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:39:55,333 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:39:55,374 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:39:55,434 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:39:55,434 - retriever - INFO - 增强向量搜索返回 55 个结果
2025-07-01 11:39:55,443 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.009s]
2025-07-01 11:39:55,444 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:55,449 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.006s]
2025-07-01 11:39:55,450 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:55,459 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.009s]
2025-07-01 11:39:55,459 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:55,475 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.013s]
2025-07-01 11:39:55,475 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:55,503 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.021s]
2025-07-01 11:39:55,503 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:55,512 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.008s]
2025-07-01 11:39:55,512 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:55,517 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 11:39:55,517 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:55,521 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 11:39:55,521 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:55,521 - retriever - INFO - 增强关键词搜索返回 0 个结果
2025-07-01 11:39:55,522 - retriever - INFO - 智能融合结果: 55 个结果
2025-07-01 11:39:55,523 - retriever - INFO - 初创企业规模过滤: 50 -> 48
2025-07-01 11:39:55,523 - retriever - INFO - 检索完成，返回 48 个结果
2025-07-01 11:39:55,523 - policy_matcher - INFO - 政策匹配完成，耗时: 0.60秒，返回: 1个结果
2025-07-01 11:39:55,524 - __main__ - INFO - 基础匹配结果: 找到 1 个匹配政策
2025-07-01 11:39:55,524 - __main__ - INFO - 处理时间: 0.60秒
2025-07-01 11:39:55,524 - __main__ - INFO - 匹配类型: basic
2025-07-01 11:39:55,524 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 11:39:55,524 - __main__ - INFO -      匹配度: 高 (1.000)
2025-07-01 11:39:55,524 - __main__ - INFO -      政策类型: 资金支持
2025-07-01 11:39:55,525 - __main__ - INFO -      关键描述: 资金支持类政策，企业可获得最高200万元补贴。支持企业研发创新活动。...
2025-07-01 11:39:55,525 - __main__ - INFO - 建议:
2025-07-01 11:39:55,525 - __main__ - INFO -   - 作为初创企业，建议重点关注门槛较低的扶持政策
2025-07-01 11:39:55,525 - __main__ - INFO - 
=== 测试精准匹配功能 ===
2025-07-01 11:39:55,525 - __main__ - INFO - 精准匹配企业: 北京智能科技有限公司
2025-07-01 11:39:55,525 - policy_matcher - INFO - 执行精准匹配: 企业=北京智能科技有限公司
2025-07-01 11:39:55,525 - policy_matcher - INFO - 执行基础匹配: 行业=新一代信息技术, 规模=初创企业（成立<3年，员工<20人）, 需求=资质认定（如高新企业、专精特新）
2025-07-01 11:39:55,525 - policy_matcher - INFO - 开始政策匹配: 信息技术 IT 软件 认定 资质 初创
2025-07-01 11:39:55,525 - retriever - INFO - 开始混合检索: 信息技术 IT 软件 认定 资质 初创
2025-07-01 11:39:55,525 - query_understanding - INFO - 开始处理自然语言查询: 信息技术 IT 软件 认定 资质 初创
2025-07-01 11:39:55,525 - query_understanding - INFO - 查询理解完成，主要意图: find_policy, 复杂度: simple
2025-07-01 11:39:55,525 - retriever - INFO - 查询理解: 寻找相关政策 | 企业规模: 初创企业 | 行业领域: 信息技术 | 政策类型: 创新支持
2025-07-01 11:39:55,525 - retriever - INFO - 合并过滤条件: {'industries': ['新一代信息技术'], 'enterprise_scales': ['初创企业（成立<3年，员工<20人）'], 'policy_types': ['创新支持'], 'prefer_startup_friendly': True, 'exclude_high_barrier': True}
2025-07-01 11:39:55,525 - retriever - INFO - 生成优化查询: 7 个
2025-07-01 11:39:55,602 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:39:55,679 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:39:55,731 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:39:55,817 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:39:55,866 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:39:55,908 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:39:55,949 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:39:55,949 - retriever - INFO - 增强向量搜索返回 100 个结果
2025-07-01 11:39:55,955 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.006s]
2025-07-01 11:39:55,955 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:55,958 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:39:55,958 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:55,962 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 11:39:55,962 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:55,968 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.006s]
2025-07-01 11:39:55,968 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:55,981 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.012s]
2025-07-01 11:39:55,982 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:55,986 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 11:39:55,987 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:55,990 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:39:55,990 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:39:55,990 - retriever - INFO - 增强关键词搜索返回 0 个结果
2025-07-01 11:39:55,991 - retriever - INFO - 智能融合结果: 100 个结果
2025-07-01 11:39:55,991 - retriever - INFO - 初创企业规模过滤: 50 -> 43
2025-07-01 11:39:55,992 - retriever - INFO - 检索完成，返回 43 个结果
2025-07-01 11:39:55,992 - policy_matcher - INFO - 政策匹配完成，耗时: 0.47秒，返回: 1个结果
2025-07-01 11:39:55,993 - __main__ - INFO - 精准匹配结果: 找到 1 个匹配政策
2025-07-01 11:39:55,993 - __main__ - INFO - 处理时间: 0.47秒
2025-07-01 11:39:55,993 - __main__ - INFO - 匹配类型: precise
2025-07-01 11:39:55,993 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 11:39:55,993 - __main__ - INFO -      匹配度: 高 (1.000)
2025-07-01 11:39:55,993 - __main__ - INFO -      政策类型: 资质认定
2025-07-01 11:39:55,993 - __main__ - INFO -      关键描述: 资质认定类政策，帮助企业获得相关资质证书。...
2025-07-01 11:39:55,993 - __main__ - INFO - 建议:
2025-07-01 11:39:55,993 - __main__ - INFO -   - 作为初创企业，建议优先申请创业扶持和孵化类政策
2025-07-01 11:39:55,994 - __main__ - INFO -   - 建议先申请高新技术企业认定，可享受更多优惠政策
2025-07-01 11:39:55,994 - __main__ - INFO - 
=== 启动FastAPI服务 ===
2025-07-01 11:39:55,994 - __main__ - INFO - 服务地址: http://localhost:8000
2025-07-01 11:39:55,994 - __main__ - INFO - API文档: http://localhost:8000/docs
2025-07-01 11:39:55,994 - __main__ - INFO - 功能包括:
2025-07-01 11:39:55,994 - __main__ - INFO -   - 自然语言查询: POST /search
2025-07-01 11:39:55,994 - __main__ - INFO -   - 基础匹配: POST /basic-match
2025-07-01 11:39:55,994 - __main__ - INFO -   - 精准匹配: POST /precise-match
2025-07-01 11:39:55,994 - __main__ - INFO -   - 配置查询: GET /config
2025-07-01 11:39:55,994 - __main__ - INFO -   - 健康检查: GET /health
2025-07-01 11:41:21,350 - __main__ - INFO - 启动政策匹配RAG检索系统
2025-07-01 11:41:21,350 - __main__ - INFO - 正在初始化政策匹配系统...
2025-07-01 11:41:22,336 - vector_store - INFO - 已连接到Milvus: localhost:19530
2025-07-01 11:41:22,342 - vector_store - INFO - 加载现有集合: policy_collection
2025-07-01 11:41:22,354 - elastic_transport.transport - INFO - HEAD http://localhost:9200/ [status:200 duration:0.007s]
2025-07-01 11:41:22,354 - vector_store - INFO - 已连接到Elasticsearch: localhost:9200
2025-07-01 11:41:22,359 - elastic_transport.transport - INFO - HEAD http://localhost:9200/policy_index [status:200 duration:0.005s]
2025-07-01 11:41:22,359 - vector_store - INFO - Elasticsearch索引就绪: policy_index
2025-07-01 11:41:22,371 - elastic_transport.transport - INFO - GET http://localhost:9200/policy_index/_stats [status:200 duration:0.010s]
2025-07-01 11:41:24,408 - embeddings - INFO - 正在加载嵌入模型: moka-ai/m3e-base
2025-07-01 11:41:24,408 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: moka-ai/m3e-base
2025-07-01 11:41:31,432 - embeddings - INFO - 模型加载完成，使用设备: cpu
2025-07-01 11:41:31,433 - __main__ - INFO - 系统状态: {'status': '运行中', 'vector_store': {'milvus_connected': True, 'elasticsearch_connected': True, 'milvus_stats': {'row_count': 5460}, 'elasticsearch_stats': {'doc_count': 0, 'store_size': 227}}, 'embedding_model': {'status': 'loaded', 'model_name': 'moka-ai/m3e-base', 'device': 'cpu', 'embedding_dim': 768, 'max_seq_length': 512}, 'components': {'document_processor': '正常', 'retriever': '正常', 'matcher': '正常'}}
2025-07-01 11:41:31,433 - __main__ - INFO - 发现政策文档: 北京市产业政策导引.pdf，开始加载...
2025-07-01 11:41:31,434 - policy_matcher - INFO - 开始添加政策文档: 北京市产业政策导引.pdf
2025-07-01 11:41:31,666 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-07-01 11:41:31,667 - jieba - DEBUG - Loading model from cache /var/folders/w7/v83dx60s0wnf6qh99wjhckhc0000gn/T/jieba.cache
2025-07-01 11:41:31,925 - jieba - DEBUG - Loading model cost 0.259 seconds.
2025-07-01 11:41:31,926 - jieba - DEBUG - Prefix dict has been built successfully.
2025-07-01 11:41:31,926 - document_processor - INFO - 开始处理文档: 北京市产业政策导引.pdf
2025-07-01 11:41:43,007 - document_processor - INFO - 文档处理完成: 北京市产业政策导引.pdf, 生成 910 个分块
2025-07-01 11:41:43,010 - embeddings - INFO - 开始编码 910 个文本
2025-07-01 11:43:10,673 - embeddings - INFO - 编码完成，输出形状: (910, 768)
2025-07-01 11:43:10,687 - vector_store - INFO - 准备插入数据: chunks数量=910, embeddings形状=(910, 768)
2025-07-01 11:43:10,687 - vector_store - INFO - chunk_ids类型: <class 'list'>, 样例: ['policy_157f44c2_chunk_0', 'policy_157f44c2_chunk_1']
2025-07-01 11:43:10,687 - vector_store - INFO - embedding_list类型: <class 'list'>, 长度: 910
2025-07-01 11:43:10,687 - vector_store - INFO - 验证字段 chunk_id (Milvus类型: 21) - 样例值: policy_157f44c2_chunk_0 - Python类型: <class 'str'>
2025-07-01 11:43:10,687 - vector_store - INFO - 验证字段 policy_id (Milvus类型: 21) - 样例值: policy_157f44c2 - Python类型: <class 'str'>
2025-07-01 11:43:10,687 - vector_store - INFO - 验证字段 content (Milvus类型: 21) - 样例值: 北京市产业政策导引 
（市级版） - Python类型: <class 'str'>
2025-07-01 11:43:10,687 - vector_store - INFO - 验证字段 section (Milvus类型: 21) - 样例值: 开篇 - Python类型: <class 'str'>
2025-07-01 11:43:10,687 - vector_store - INFO - 验证字段 chunk_type (Milvus类型: 21) - 样例值: text - Python类型: <class 'str'>
2025-07-01 11:43:10,687 - vector_store - INFO - 验证字段 embedding (Milvus类型: 101) - 样例值: [-0.009589307941496372, 0.02911415882408619, -0.017605118453502655, 0.04515969753265381, -0.008898379281163216, -0.0004742610326502472, 0.03711366653442383, 0.009216396138072014, -0.028580965474247932, -0.004692758899182081, 0.061252694576978683, 0.004142737481743097, -0.00015245744725689292, -0.03795205056667328, -0.05199399217963219, -0.047508805990219116, 0.03326359763741493, 0.042946770787239075, -0.05036120489239693, -0.0045363628305494785, 0.03374297171831131, -0.013076845556497574, -0.028622999787330627, 0.011045549064874649, -0.008509015664458275, 0.009151282720267773, 0.0024055256508290768, -0.0009728657896630466, -0.033678777515888214, 0.0015214345185086131, 0.03267497941851616, -0.057704951614141464, -0.01816404238343239, 0.001693681930191815, -0.003161015221849084, 0.024775955826044083, -0.013540956191718578, -0.02623024582862854, 0.05934133008122444, 0.029546277597546577, -0.012443392537534237, 0.04352046549320221, -0.0014886443968862295, -0.008488436229526997, -0.008628182113170624, 0.027824610471725464, -0.006604868918657303, -0.00821163970977068, -0.040158990770578384, 0.009263608604669571, -0.007601940538734198, 0.3768092393875122, -0.01491926796734333, 0.005379746202379465, -0.04145354405045509, 0.06345204263925552, -0.03630485385656357, -0.009675629436969757, 0.010845758020877838, 0.039076875895261765, -0.005835541058331728, -0.01878809928894043, 0.0059173936024308205, -0.021044433116912842, 0.026823166757822037, -0.02284947596490383, -0.0548282191157341, -0.035297710448503494, 0.028276700526475906, -0.027777930721640587, 0.022341134026646614, -0.028723761439323425, 0.010176535695791245, -0.001923352712765336, 0.03312109410762787, 0.024043748155236244, 0.011900484561920166, -0.00845291931182146, 0.0014036806533113122, -0.012982417829334736, 0.014434284530580044, 0.0502677857875824, -0.012608615681529045, 0.0030357795767486095, -0.08627171814441681, -0.01438103336840868, -0.0019654601346701384, 0.021047798916697502, 0.013121829368174076, 0.0571318045258522, -0.06971745193004608, -0.053690601140260696, -0.005233254283666611, -0.008413158357143402, -0.02017509937286377, 0.002872430719435215, 0.053301695734262466, -0.05862448364496231, -0.036340124905109406, -0.00010847074736375362, 0.03970731794834137, -0.013180913403630257, -0.010341119952499866, -0.04928994178771973, 0.07712284475564957, 0.014791151508688927, -0.059449516236782074, 0.0129732396453619, 0.019919831305742264, -0.010746200568974018, -0.02472183108329773, -0.03969830274581909, 0.0226453747600317, 0.02169407159090042, -0.04375375062227249, -0.018663236871361732, -0.0026338407769799232, -0.0037480355240404606, 0.027444249019026756, 0.004402159247547388, -0.008972407318651676, 0.039672669023275375, -0.008463398553431034, -0.060849398374557495, 0.024426542222499847, 0.009231614880263805, 0.0036453548818826675, 0.0406363308429718, -0.02083449438214302, 0.036203619092702866, 0.010913846082985401, -0.018755804747343063, 0.011556701734662056, -0.0160507969558239, 0.020260801538825035, 0.003158723935484886, -0.0055779810063540936, -0.041698843240737915, -0.03637868911027908, -0.035921353846788406, 0.06556741893291473, 0.029048891738057137, 0.04013197496533394, -0.051235370337963104, -0.04153929278254509, 0.005427155643701553, 0.008758113719522953, 0.011159452609717846, 0.043652091175317764, -0.040720127522945404, -0.004773605149239302, 0.030425705015659332, 0.038182493299245834, 0.001564845209941268, 0.020213427022099495, 0.030758051201701164, 0.02055022120475769, 0.028158511966466904, -0.07821311801671982, -0.038057200610637665, 0.039441123604774475, -0.003705583279952407, 0.044595569372177124, -0.004892559722065926, 0.019788745790719986, 0.007673455867916346, 0.02045273967087269, -0.07352282106876373, -0.025709766894578934, 0.010276333428919315, 0.010867963545024395, -0.01248021051287651, 0.008558572269976139, -0.019154522567987442, -0.013651279732584953, -0.0453471764922142, -0.019337618723511696, 0.012558511458337307, -0.04601521044969559, -0.030041612684726715, -0.028040865436196327, 0.032115161418914795, 0.020124176517128944, 0.024890819564461708, -0.034578800201416016, 0.03267127275466919, -0.048211950808763504, 0.005665671080350876, 0.05325033888220787, -0.013328064233064651, -0.01906873844563961, -0.010803215205669403, -0.024040287360548973, 0.0011679499875754118, 0.06144373491406441, 0.037063393741846085, -0.02414027974009514, 0.034590207040309906, 0.0002138784620910883, 0.012140613049268723, -0.02405504509806633, -0.05000852793455124, 0.004672967828810215, -0.01480168104171753, 0.006675413344055414, 0.0972711369395256, 0.034512847661972046, 0.06292875111103058, 0.009348156861960888, -0.01494918204843998, -0.06759670376777649, -0.06978300958871841, 0.0232897587120533, 0.05494898930191994, -0.008022705093026161, 0.030105656012892723, -0.09707214683294296, 0.038521941751241684, -0.019789280369877815, 0.04824909195303917, 0.06329125165939331, -0.028315721079707146, -0.01932419277727604, -0.021181587129831314, -0.026322539895772934, -0.01419211458414793, -0.0008855590131133795, 0.03259635716676712, -0.0033729998394846916, 0.021748656406998634, 0.02658071182668209, -0.01077377237379551, 0.02914053201675415, 0.010506127960979939, -0.00022930283739697188, 0.07139137387275696, -0.0288256723433733, 0.015812374651432037, 0.024732865393161774, -0.03838037699460983, -0.016788508743047714, 0.009803450666368008, 0.030756089836359024, -0.000818780914414674, 0.01877676323056221, -0.006893815007060766, -0.02332308515906334, -0.03040100447833538, -0.055977363139390945, -0.05616838485002518, 0.01870473474264145, 0.018247749656438828, 0.0018340129172429442, -0.05407395213842392, -0.023001838475465775, -0.02583295851945877, 0.02642855793237686, 0.04169720411300659, 0.03082786314189434, -0.03451421111822128, 0.005526895169168711, -0.03213411569595337, 0.02497667260468006, 0.0029323389753699303, 0.03324692323803902, -0.011319850571453571, -0.01809949427843094, -0.020266283303499222, -0.029924612492322922, -0.02093447931110859, -0.004756493493914604, 0.06777933239936829, 0.03589344397187233, -0.016932327300310135, 0.020171288400888443, -0.03975522518157959, 0.04156431183218956, -0.008397664874792099, -0.03129595145583153, -0.07036636769771576, 0.05021882429718971, 0.04966488480567932, 0.03049454838037491, -0.028772899881005287, -0.018010294064879417, -0.04312371090054512, 0.0046417745761573315, 0.03925392031669617, -0.019701730459928513, -0.053943932056427, -0.030901964753866196, -0.029882483184337616, 0.01791478507220745, 0.027659915387630463, 0.08985470980405807, -0.05198268964886665, -0.03677350655198097, 0.018498342484235764, -0.03612259402871132, 0.0012379527324810624, 0.05046892166137695, -0.03301394730806351, 0.018706364557147026, 0.01413088757544756, -0.01602291315793991, 0.027428526431322098, 0.026961391791701317, -0.0035943014081567526, 0.017675628885626793, -0.02199414186179638, 0.03260156139731407, -0.023268917575478554, -0.023493386805057526, -0.02067587524652481, -0.0018503885949030519, 0.007983824238181114, -0.03271932154893875, 0.0006211347645148635, -0.01979614980518818, -0.005424872972071171, 0.039955489337444305, -0.010059586726129055, 0.000972070440184325, 0.10771221667528152, 0.06482519954442978, 0.03266149386763573, 0.02456350065767765, 0.00936193484812975, -0.008178982883691788, 0.05346611514687538, 0.028918839991092682, -0.07390716671943665, -0.006112892646342516, 0.028687957674264908, 0.054268978536129, 0.06121604144573212, -0.007828090339899063, -0.03363944590091705, -0.03989904373884201, 0.015971971675753593, -0.007727424614131451, -0.032877519726753235, 0.016885342076420784, -0.010724813677370548, -0.016950199380517006, -0.01989579387009144, -0.00168701377697289, -0.051006659865379333, -0.0014523814897984266, -0.04616301879286766, -0.030870657414197922, 1.5738576621515676e-05, -0.03532016649842262, -0.01884891837835312, -0.014430598355829716, -0.014676989056169987, 0.057766810059547424, 0.006159622687846422, 0.02132817544043064, 0.03129813075065613, -0.016254132613539696, -0.019971000030636787, -0.044640813022851944, 0.02695411629974842, -0.008467409759759903, 0.00490883132442832, 0.030902333557605743, -0.020411167293787003, -0.055149175226688385, -0.02834024652838707, 0.026349080726504326, 0.010783246718347073, 0.05821895971894264, -0.0026978147216141224, 0.03953702002763748, 0.01787497103214264, -0.05887347087264061, -0.00027197625604458153, -0.028730303049087524, -0.02215060405433178, 0.07047837227582932, -0.032375890761613846, -0.00011279471073066816, 0.01315301563590765, -0.0010450751287862659, 0.020898284390568733, -0.013241070322692394, -0.024628158658742905, -0.019909389317035675, -0.05343034118413925, 0.0022840951569378376, -0.017856450751423836, 0.03752543777227402, 0.024396277964115143, -0.004686280619353056, -0.016203105449676514, -0.009482908993959427, 0.03407151252031326, -0.002740207128226757, 0.03272382542490959, 0.02651531621813774, -0.058525729924440384, -0.023655390366911888, -0.011790175922214985, 0.03925531357526779, 0.013866443186998367, 0.04840943589806557, 0.01433261763304472, 0.033368755131959915, -0.017562948167324066, -0.07722582668066025, 0.010781972669064999, -0.01323713455349207, -0.058862410485744476, 0.05883099511265755, -0.043963633477687836, -0.03357572853565216, 0.00797117967158556, 0.033708181232213974, -0.0786106288433075, 0.026821736246347427, 0.022951070219278336, -0.011617700569331646, 0.021849937736988068, 0.03693987429141998, -0.001659695990383625, -0.0061637707985937595, -0.044292062520980835, 0.07012653350830078, 0.013633946888148785, 0.008747246116399765, -0.006612675730139017, 0.013270584866404533, -0.014857371337711811, -0.011432196013629436, 0.0065117403864860535, -0.01404486782848835, 0.01858045533299446, -0.02486853487789631, -0.01836327649652958, -0.024927770718932152, 0.02749050408601761, 0.0044959415681660175, -0.008484087884426117, 0.003905565943568945, 0.00446905056014657, -0.02270268090069294, -0.052917368710041046, -0.010605140589177608, 0.00709659606218338, 0.05721830576658249, 0.05082769691944122, 0.004808859899640083, -0.04757297411561012, 0.017576342448592186, -0.01816967874765396, 0.0019217076478525996, -0.019937697798013687, 0.05922657623887062, -0.023297931998968124, -0.009335382841527462, 0.019768856465816498, -0.02407260239124298, 0.029455088078975677, 0.041888874024152756, 0.03524501621723175, -0.03877586871385574, -0.04179271683096886, 0.06196897104382515, -0.007987288758158684, -0.04283953458070755, 0.06542922556400299, 0.0064946124330163, 0.008456920273602009, -0.02566426247358322, 0.020016202703118324, -0.001562338089570403, -0.0006199604249559343, -0.027312463149428368, -0.04545450210571289, 0.011615592055022717, -0.01337212324142456, 0.020239297300577164, -0.023537753149867058, -0.003997112158685923, -0.004092201124876738, -0.02057114616036415, -0.011246242560446262, 0.00971840787678957, -0.008114401251077652, -0.07252760231494904, -0.016493696719408035, 0.04132617264986038, -0.04882003739476204, -0.0026445596013218164, -0.0009650048450566828, 0.018796775490045547, 0.046294763684272766, -0.059855569154024124, 0.04281643033027649, -0.04874449595808983, 0.0025613352190703154, -0.01081911288201809, -0.0037697977386415005, 0.031707651913166046, -0.021693317219614983, 0.015387540683150291, -0.01732710190117359, -0.015074243769049644, 0.0418533980846405, 0.034862905740737915, 0.005694030784070492, 0.0007337104761973023, 0.03324953466653824, 0.001326580299064517, 0.028315981850028038, -0.030011458322405815, -0.012086973525583744, 0.007019157521426678, 0.012758257798850536, -0.0004404193314258009, -0.03769683092832565, -0.011248038150370121, 0.041032496839761734, -0.019792452454566956, 0.02623436599969864, 0.002371096983551979, -0.03930090367794037, 0.0002622672473080456, 0.04479384422302246, -0.035239823162555695, -0.06436390429735184, -0.005533753894269466, 0.021474644541740417, 0.006803956348448992, 0.033541347831487656, -0.015958765521645546, 0.0075390939600765705, -0.08871641755104065, -0.056117936968803406, 0.009939104318618774, 0.0015055258991196752, 0.05826868116855621, -0.02165314555168152, 0.021653825417160988, -0.057069793343544006, -0.026611806824803352, -0.013909755274653435, 0.06283603608608246, 0.012419736944139004, -0.04626639932394028, 0.01178447250276804, -0.03799920156598091, 0.010784066282212734, -0.02245737984776497, 0.022549331188201904, -0.07572583854198456, -0.017417579889297485, 0.033408280462026596, -0.03186677768826485, 0.02544129081070423, -0.03759037330746651, 0.004175000824034214, -0.035863246768713, -0.004104748833924532, 0.04276532679796219, -0.020994527265429497, 0.017737165093421936, 0.016124460846185684, -0.0408937931060791, -0.02875874936580658, 0.03717256337404251, 0.004172440618276596, 0.021906953305006027, -0.046760935336351395, -0.060809068381786346, -0.014605913311243057, -0.01680750772356987, 0.024257700890302658, 0.03192616254091263, 0.019896337762475014, 0.07277151942253113, -0.03467482328414917, -0.0296962708234787, -0.020838161930441856, -0.04029468074440956, 0.027133222669363022, -0.054488155990839005, 0.020477961748838425, 0.00099698337726295, -0.007412747014313936, -0.0006891798693686724, 0.008630702272057533, 0.07006815820932388, -0.0006025220500305295, 0.006870594806969166, -0.02347354218363762, -0.004952014423906803, -0.012581387534737587, 0.0016122444067150354, -0.003527534892782569, -0.009774364531040192, 0.012716458179056644, 0.0009260065853595734, 0.03004925511777401, 0.011623555794358253, 0.06507840007543564, -0.050444841384887695, 0.008790462277829647, -0.02803892455995083, -0.06705816090106964, 0.02005065605044365, 0.035633061081171036, 0.0002218412992078811, 0.0780092179775238, -0.018138019368052483, -0.023708099499344826, 0.010249351151287556, -0.035801246762275696, -0.0019092432921752334, -0.029957309365272522, -0.007117624394595623, 0.01950136199593544, 0.03664879873394966, -0.020137088373303413, -0.023347266018390656, 0.08971085399389267, 0.00516971480101347, 0.050085872411727905, -0.022632304579019547, -0.005027259234338999, -0.027102002874016762, 0.06915169954299927, 0.0013029997935518622, 0.017689192667603493, 0.009980677627027035, -0.008764904923737049, -0.03800809383392334, -0.029612688347697258, 0.05087962746620178, 0.032240815460681915, -0.009346778504550457, -0.02199050784111023, -0.025282803922891617, 0.014376815408468246, 0.03630366548895836, 0.0656920075416565, -0.014159136451780796, 0.01677713729441166, -0.036684345453977585, 0.04181422293186188, -0.03661084547638893, -0.0009762952686287463, -0.020955290645360947, 0.037498973309993744, -0.021638048812747, 0.0194693636149168, -0.009985314682126045, -0.08341575413942337, -0.0021505558397620916, 0.0004300408763810992, -0.03864736109972, 0.09971991181373596, -0.0420842319726944, -0.0013092535082250834, -0.0484723262488842, 0.019459035247564316, -0.01095435582101345, 0.020641816779971123, 0.07297729700803757, 0.060642678290605545, 0.026820100843906403, 0.010149716399610043, -0.042748551815748215, -0.02918965183198452, -0.034213971346616745, 0.08885794132947922, -0.025734225288033485, 0.02929290570318699, -0.0154344467446208, -0.044630784541368484, 0.03935050219297409, 0.01972702145576477, -0.037364643067121506, -0.016189686954021454, -0.07640594244003296, -0.018994292244315147, 0.018101777881383896, -0.014673523604869843, 0.02799123339354992, -0.010238418355584145, 0.01709965616464615, -0.019193274900317192, 0.04031998664140701, -0.03897527605295181, 0.10559485107660294, -0.054177287966012955, 0.023972777649760246, 0.005270805209875107, -0.04176589474081993, 0.05416272580623627, 0.030821776017546654, -0.025223834440112114, 0.0030505741015076637, 0.016425693407654762, 0.006580985151231289, -0.02823006734251976, -0.009023276157677174, -0.056368544697761536, -0.004875159356743097, -0.02268892526626587, -0.0034240498207509518, 0.03267257660627365, -0.03636043891310692, 0.04608139395713806, -0.04523656144738197, -0.010927774012088776, -0.005379600916057825, 0.03045721910893917, 0.0389670729637146, 0.028936419636011124, -0.029645929113030434, 0.030180001631379128, 0.003528584260493517, -0.017787493765354156, 0.05465669929981232, 0.02838345430791378, 0.06302227824926376, 0.029360666871070862, -0.017426690086722374, 0.0001560311357025057, -0.051588669419288635, -0.002858480205759406, -0.05941910296678543, 0.009235854260623455, 0.01826690323650837, -0.03919863700866699, 0.004400157369673252, -0.007518859580159187, -0.0030373611953109503, -0.06218826398253441, 0.0023394592572003603, 0.06459461897611618, 0.025311214849352837, -0.07068324089050293, -0.07035823166370392, -0.011732452549040318, -0.0036581538151949644, 0.03272993490099907, 0.06999839842319489, -0.013980642892420292, -0.010885556228458881, 0.04285767301917076, 0.012768624350428581, 0.035443015396595, -0.015054207295179367, 0.015541168861091137, -0.01729157753288746, 0.05152300000190735, 0.031376104801893234, -0.055162589997053146, -0.04728157818317413, 0.016747761517763138, -0.011066374368965626, -0.023549759760499, -0.04256664589047432, -0.029114289209246635, -0.007128818891942501] - Python类型: <class 'list'>
2025-07-01 11:43:13,920 - vector_store - INFO - 成功插入 910 个分块到Milvus
2025-07-01 11:43:13,958 - vector_store - INFO - 准备索引 910 个文档到ES
2025-07-01 11:43:14,104 - elastic_transport.transport - INFO - PUT http://localhost:9200/_bulk [status:200 duration:0.076s]
2025-07-01 11:43:14,105 - vector_store - ERROR - ES批量索引异常: 500 document(s) failed to index.
2025-07-01 11:43:14,107 - vector_store - WARNING - ES存储失败，但Milvus存储成功，系统继续运行
2025-07-01 11:43:14,107 - policy_matcher - INFO - 政策文档添加成功: 北京市产业政策导引.pdf
2025-07-01 11:43:14,109 - __main__ - INFO - 政策文档加载成功
2025-07-01 11:43:14,109 - __main__ - INFO - 系统初始化完成
2025-07-01 11:43:14,110 - __main__ - INFO - 开始测试查询...
2025-07-01 11:43:14,110 - __main__ - INFO - 
=== 测试自然语言查询功能 ===
2025-07-01 11:43:14,110 - __main__ - INFO - 
--- 测试 1: 生物医药行业政策查询 ---
2025-07-01 11:43:14,110 - __main__ - INFO - 查询: 我想查找和生物医药相关的政策
2025-07-01 11:43:14,112 - policy_matcher - INFO - 开始政策匹配: 我想查找和生物医药相关的政策
2025-07-01 11:43:14,113 - retriever - INFO - 开始混合检索: 我想查找和生物医药相关的政策
2025-07-01 11:43:14,115 - query_understanding - INFO - 开始处理自然语言查询: 我想查找和生物医药相关的政策
2025-07-01 11:43:14,121 - query_understanding - INFO - 查询理解完成，主要意图: find_policy, 复杂度: simple
2025-07-01 11:43:14,121 - retriever - INFO - 查询理解: 寻找相关政策 | 行业领域: 生物医药
2025-07-01 11:43:14,121 - retriever - INFO - 合并过滤条件: {'industries': ['生物医药']}
2025-07-01 11:43:14,121 - retriever - INFO - 生成优化查询: 6 个
2025-07-01 11:43:14,184 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:43:14,239 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:43:14,280 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:43:14,317 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:43:14,366 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:43:14,409 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:43:14,409 - retriever - INFO - 增强向量搜索返回 40 个结果
2025-07-01 11:43:14,424 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.014s]
2025-07-01 11:43:14,424 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:14,427 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:43:14,427 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:14,431 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 11:43:14,431 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:14,435 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 11:43:14,435 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:14,439 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 11:43:14,439 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:14,443 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:43:14,443 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:14,443 - retriever - INFO - 增强关键词搜索返回 0 个结果
2025-07-01 11:43:14,443 - retriever - INFO - 智能融合结果: 10 个结果
2025-07-01 11:43:14,444 - retriever - INFO - 检索完成，返回 5 个结果
2025-07-01 11:43:14,449 - policy_matcher - INFO - 政策匹配完成，耗时: 0.34秒，返回: 1个结果
2025-07-01 11:43:14,449 - __main__ - INFO - 查询结果: 找到 1 个匹配政策
2025-07-01 11:43:14,449 - __main__ - INFO - 处理时间: 0.34秒
2025-07-01 11:43:14,449 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 11:43:14,449 - __main__ - INFO -      相关性: 0.318
2025-07-01 11:43:14,449 - __main__ - INFO -      摘要: 政策类型：资金支持 | 主要内容：给予奖励，单个药品奖励；给予奖励；给予奖励，单个品种奖励... | 适用条件：应急审批/工信部揭榜挂帅入围医疗器械，且确；必需易短缺药品重点监测清单》中新上市的本市注...
2025-07-01 11:43:14,449 - __main__ - INFO - 建议:
2025-07-01 11:43:14,449 - __main__ - INFO -   - 相关政策较少，建议：
2025-07-01 11:43:14,450 - __main__ - INFO -   - 1. 扩大查询范围，考虑相关行业政策
2025-07-01 11:43:14,450 - __main__ - INFO -   - 2. 关注上级政府的通用性政策
2025-07-01 11:43:14,450 - __main__ - INFO - 
--- 测试 2: 初创企业政策查询 ---
2025-07-01 11:43:14,450 - __main__ - INFO - 查询: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 11:43:14,450 - policy_matcher - INFO - 开始政策匹配: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 11:43:14,450 - retriever - INFO - 开始混合检索: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 11:43:14,450 - query_understanding - INFO - 开始处理自然语言查询: 我是一家小型初创企业，现阶段有什么政策比较适用
2025-07-01 11:43:14,450 - query_understanding - INFO - 查询理解完成，主要意图: check_eligibility, 复杂度: complex
2025-07-01 11:43:14,450 - retriever - INFO - 查询理解: 检查政策适用性 | 企业规模: 初创企业, 小型企业
2025-07-01 11:43:14,450 - retriever - INFO - 合并过滤条件: {'enterprise_scales': ['初创企业', '小型企业'], 'prefer_startup_friendly': True, 'exclude_high_barrier': True}
2025-07-01 11:43:14,450 - retriever - INFO - 生成优化查询: 8 个
2025-07-01 11:43:14,487 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:43:14,527 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:43:14,561 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:43:14,595 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:43:14,630 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:43:14,666 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:43:14,703 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:43:14,747 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:43:14,748 - retriever - INFO - 增强向量搜索返回 63 个结果
2025-07-01 11:43:14,756 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.008s]
2025-07-01 11:43:14,756 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:14,761 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 11:43:14,761 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:14,765 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 11:43:14,765 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:14,769 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:43:14,769 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:14,771 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 11:43:14,771 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:14,775 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:43:14,775 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:14,777 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:43:14,778 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:14,781 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:43:14,781 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:14,781 - retriever - INFO - 增强关键词搜索返回 0 个结果
2025-07-01 11:43:14,781 - retriever - INFO - 智能融合结果: 10 个结果
2025-07-01 11:43:14,783 - retriever - INFO - 初创企业规模过滤: 5 -> 3
2025-07-01 11:43:14,783 - retriever - INFO - 检索完成，返回 3 个结果
2025-07-01 11:43:14,783 - policy_matcher - INFO - 政策匹配完成，耗时: 0.33秒，返回: 1个结果
2025-07-01 11:43:14,783 - __main__ - INFO - 查询结果: 找到 1 个匹配政策
2025-07-01 11:43:14,783 - __main__ - INFO - 处理时间: 0.33秒
2025-07-01 11:43:14,783 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 11:43:14,783 - __main__ - INFO -      相关性: 0.353
2025-07-01 11:43:14,783 - __main__ - INFO -      摘要: 政策类型：税收优惠 | 主要内容：给予支持，支持资；给予资金支持；给予不超过 30 万元的资金支持... | 适用条件：应链上下游开展股权投资，加强资源整合。用好北京股权交易中心“专精特；需求，开展多...
2025-07-01 11:43:14,783 - __main__ - INFO - 建议:
2025-07-01 11:43:14,783 - __main__ - INFO -   - 相关政策较少，建议：
2025-07-01 11:43:14,783 - __main__ - INFO -   - 1. 扩大查询范围，考虑相关行业政策
2025-07-01 11:43:14,783 - __main__ - INFO -   - 2. 关注上级政府的通用性政策
2025-07-01 11:43:14,783 - __main__ - INFO - 
--- 测试 3: 创新资金政策查询 ---
2025-07-01 11:43:14,783 - __main__ - INFO - 查询: 有哪些研发创新方面的资金支持政策
2025-07-01 11:43:14,783 - policy_matcher - INFO - 开始政策匹配: 有哪些研发创新方面的资金支持政策
2025-07-01 11:43:14,783 - retriever - INFO - 开始混合检索: 有哪些研发创新方面的资金支持政策
2025-07-01 11:43:14,783 - query_understanding - INFO - 开始处理自然语言查询: 有哪些研发创新方面的资金支持政策
2025-07-01 11:43:14,783 - query_understanding - INFO - 查询理解完成，主要意图: get_funding, 复杂度: moderate
2025-07-01 11:43:14,783 - retriever - INFO - 查询理解: 寻找资金支持 | 政策类型: 资金支持, 创新支持
2025-07-01 11:43:14,783 - retriever - INFO - 合并过滤条件: {'policy_types': ['资金支持', '创新支持']}
2025-07-01 11:43:14,783 - retriever - INFO - 生成优化查询: 8 个
2025-07-01 11:43:14,816 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:43:14,853 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:43:14,890 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:43:14,939 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:43:14,977 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:43:15,012 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:43:15,045 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:43:15,078 - vector_store - INFO - Milvus搜索返回 11 个结果
2025-07-01 11:43:15,078 - retriever - INFO - 增强向量搜索返回 38 个结果
2025-07-01 11:43:15,083 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.005s]
2025-07-01 11:43:15,083 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:15,087 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 11:43:15,087 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:15,091 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:43:15,091 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:15,094 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:43:15,094 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:15,097 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:43:15,097 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:15,100 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:43:15,100 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:15,103 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 11:43:15,103 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:15,105 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 11:43:15,105 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:15,105 - retriever - INFO - 增强关键词搜索返回 0 个结果
2025-07-01 11:43:15,105 - retriever - INFO - 智能融合结果: 10 个结果
2025-07-01 11:43:15,106 - retriever - INFO - 检索完成，返回 5 个结果
2025-07-01 11:43:15,106 - policy_matcher - INFO - 政策匹配完成，耗时: 0.32秒，返回: 1个结果
2025-07-01 11:43:15,106 - __main__ - INFO - 查询结果: 找到 1 个匹配政策
2025-07-01 11:43:15,106 - __main__ - INFO - 处理时间: 0.32秒
2025-07-01 11:43:15,106 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 11:43:15,106 - __main__ - INFO -      相关性: 0.364
2025-07-01 11:43:15,106 - __main__ - INFO -      摘要: 政策类型：人才政策 | 主要内容：给予支持，支持周期一般不超过3 年，每家每年支持；给予支持；给予不超过 2000万元资金支持... | 适用条件：要用于项目研发、人才培养及运行经费等方面。条件要求 ...
2025-07-01 11:43:15,106 - __main__ - INFO - 建议:
2025-07-01 11:43:15,106 - __main__ - INFO -   - 相关政策较少，建议：
2025-07-01 11:43:15,106 - __main__ - INFO -   - 1. 扩大查询范围，考虑相关行业政策
2025-07-01 11:43:15,106 - __main__ - INFO -   - 2. 关注上级政府的通用性政策
2025-07-01 11:43:15,106 - __main__ - INFO - 
=== 测试基础匹配功能 ===
2025-07-01 11:43:15,106 - __main__ - INFO - 基础匹配参数: 行业=生物医药（含医疗器械）, 规模=初创企业（成立<3年，员工<20人）, 需求=资金补贴（如研发费用补助）
2025-07-01 11:43:15,106 - policy_matcher - INFO - 执行基础匹配: 行业=生物医药（含医疗器械）, 规模=初创企业（成立<3年，员工<20人）, 需求=资金补贴（如研发费用补助）
2025-07-01 11:43:15,106 - policy_matcher - INFO - 开始政策匹配: 生物医药 医疗器械 生物技术 资金 补贴 初创
2025-07-01 11:43:15,106 - retriever - INFO - 开始混合检索: 生物医药 医疗器械 生物技术 资金 补贴 初创
2025-07-01 11:43:15,106 - query_understanding - INFO - 开始处理自然语言查询: 生物医药 医疗器械 生物技术 资金 补贴 初创
2025-07-01 11:43:15,106 - query_understanding - INFO - 查询理解完成，主要意图: get_funding, 复杂度: moderate
2025-07-01 11:43:15,106 - retriever - INFO - 查询理解: 寻找资金支持 | 企业规模: 初创企业 | 行业领域: 生物医药 | 政策类型: 资金支持, 创新支持
2025-07-01 11:43:15,106 - retriever - INFO - 合并过滤条件: {'industries': ['生物医药（含医疗器械）'], 'enterprise_scales': ['初创企业（成立<3年，员工<20人）'], 'policy_types': ['资金支持', '创新支持'], 'prefer_startup_friendly': True, 'exclude_high_barrier': True}
2025-07-01 11:43:15,106 - retriever - INFO - 生成优化查询: 8 个
2025-07-01 11:43:15,149 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:43:15,186 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:43:15,221 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:43:15,255 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:43:15,292 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:43:15,330 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:43:15,455 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:43:15,496 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:43:15,496 - retriever - INFO - 增强向量搜索返回 55 个结果
2025-07-01 11:43:15,503 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.007s]
2025-07-01 11:43:15,503 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:15,508 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 11:43:15,508 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:15,511 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 11:43:15,512 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:15,515 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:43:15,515 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:15,518 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:43:15,518 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:15,521 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:43:15,521 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:15,524 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.002s]
2025-07-01 11:43:15,524 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:15,527 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:43:15,527 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:15,527 - retriever - INFO - 增强关键词搜索返回 0 个结果
2025-07-01 11:43:15,527 - retriever - INFO - 智能融合结果: 55 个结果
2025-07-01 11:43:15,528 - retriever - INFO - 初创企业规模过滤: 50 -> 48
2025-07-01 11:43:15,528 - retriever - INFO - 检索完成，返回 48 个结果
2025-07-01 11:43:15,528 - policy_matcher - INFO - 政策匹配完成，耗时: 0.42秒，返回: 1个结果
2025-07-01 11:43:15,529 - __main__ - INFO - 基础匹配结果: 找到 1 个匹配政策
2025-07-01 11:43:15,529 - __main__ - INFO - 处理时间: 0.42秒
2025-07-01 11:43:15,529 - __main__ - INFO - 匹配类型: basic
2025-07-01 11:43:15,529 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 11:43:15,529 - __main__ - INFO -      匹配度: 高 (1.000)
2025-07-01 11:43:15,529 - __main__ - INFO -      政策类型: 资金支持
2025-07-01 11:43:15,529 - __main__ - INFO -      关键描述: 资金支持类政策，企业可获得最高200万元补贴。支持企业研发创新活动。...
2025-07-01 11:43:15,529 - __main__ - INFO - 建议:
2025-07-01 11:43:15,529 - __main__ - INFO -   - 作为初创企业，建议重点关注门槛较低的扶持政策
2025-07-01 11:43:15,529 - __main__ - INFO - 
=== 测试精准匹配功能 ===
2025-07-01 11:43:15,529 - __main__ - INFO - 精准匹配企业: 北京智能科技有限公司
2025-07-01 11:43:15,529 - policy_matcher - INFO - 执行精准匹配: 企业=北京智能科技有限公司
2025-07-01 11:43:15,529 - policy_matcher - INFO - 执行基础匹配: 行业=新一代信息技术, 规模=初创企业（成立<3年，员工<20人）, 需求=资质认定（如高新企业、专精特新）
2025-07-01 11:43:15,529 - policy_matcher - INFO - 开始政策匹配: 信息技术 IT 软件 认定 资质 初创
2025-07-01 11:43:15,529 - retriever - INFO - 开始混合检索: 信息技术 IT 软件 认定 资质 初创
2025-07-01 11:43:15,529 - query_understanding - INFO - 开始处理自然语言查询: 信息技术 IT 软件 认定 资质 初创
2025-07-01 11:43:15,529 - query_understanding - INFO - 查询理解完成，主要意图: find_policy, 复杂度: simple
2025-07-01 11:43:15,529 - retriever - INFO - 查询理解: 寻找相关政策 | 企业规模: 初创企业 | 行业领域: 信息技术 | 政策类型: 创新支持
2025-07-01 11:43:15,529 - retriever - INFO - 合并过滤条件: {'industries': ['新一代信息技术'], 'enterprise_scales': ['初创企业（成立<3年，员工<20人）'], 'policy_types': ['创新支持'], 'prefer_startup_friendly': True, 'exclude_high_barrier': True}
2025-07-01 11:43:15,529 - retriever - INFO - 生成优化查询: 7 个
2025-07-01 11:43:15,563 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:43:15,599 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:43:15,647 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:43:15,695 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:43:15,737 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:43:15,779 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:43:15,823 - vector_store - INFO - Milvus搜索返回 20 个结果
2025-07-01 11:43:15,823 - retriever - INFO - 增强向量搜索返回 100 个结果
2025-07-01 11:43:15,829 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.006s]
2025-07-01 11:43:15,829 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:15,834 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 11:43:15,834 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:15,838 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 11:43:15,838 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:15,841 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:43:15,841 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:15,843 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:43:15,843 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:15,847 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.003s]
2025-07-01 11:43:15,847 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:15,851 - elastic_transport.transport - INFO - POST http://localhost:9200/policy_index/_search [status:200 duration:0.004s]
2025-07-01 11:43:15,851 - vector_store - INFO - ES搜索返回 0 个结果
2025-07-01 11:43:15,851 - retriever - INFO - 增强关键词搜索返回 0 个结果
2025-07-01 11:43:15,852 - retriever - INFO - 智能融合结果: 100 个结果
2025-07-01 11:43:15,852 - retriever - INFO - 初创企业规模过滤: 50 -> 43
2025-07-01 11:43:15,853 - retriever - INFO - 检索完成，返回 43 个结果
2025-07-01 11:43:15,853 - policy_matcher - INFO - 政策匹配完成，耗时: 0.32秒，返回: 1个结果
2025-07-01 11:43:15,854 - __main__ - INFO - 精准匹配结果: 找到 1 个匹配政策
2025-07-01 11:43:15,854 - __main__ - INFO - 处理时间: 0.32秒
2025-07-01 11:43:15,854 - __main__ - INFO - 匹配类型: precise
2025-07-01 11:43:15,854 - __main__ - INFO -   1. 政策文档 policy_157f44c2
2025-07-01 11:43:15,854 - __main__ - INFO -      匹配度: 高 (1.000)
2025-07-01 11:43:15,854 - __main__ - INFO -      政策类型: 资质认定
2025-07-01 11:43:15,854 - __main__ - INFO -      关键描述: 资质认定类政策，帮助企业获得相关资质证书。...
2025-07-01 11:43:15,854 - __main__ - INFO - 建议:
2025-07-01 11:43:15,854 - __main__ - INFO -   - 作为初创企业，建议优先申请创业扶持和孵化类政策
2025-07-01 11:43:15,854 - __main__ - INFO -   - 建议先申请高新技术企业认定，可享受更多优惠政策
2025-07-01 11:43:15,854 - __main__ - INFO - 
=== 启动FastAPI服务 ===
2025-07-01 11:43:15,854 - __main__ - INFO - 服务地址: http://localhost:8000
2025-07-01 11:43:15,854 - __main__ - INFO - API文档: http://localhost:8000/docs
2025-07-01 11:43:15,854 - __main__ - INFO - 功能包括:
2025-07-01 11:43:15,854 - __main__ - INFO -   - 自然语言查询: POST /search
2025-07-01 11:43:15,854 - __main__ - INFO -   - 基础匹配: POST /basic-match
2025-07-01 11:43:15,854 - __main__ - INFO -   - 精准匹配: POST /precise-match
2025-07-01 11:43:15,854 - __main__ - INFO -   - 配置查询: GET /config
2025-07-01 11:43:15,854 - __main__ - INFO -   - 健康检查: GET /health
2025-07-01 11:53:37,791 - api - INFO - 收到自测通过率请求: 政策ID=policy_157f44c2, 企业=北京测试科技有限公司
2025-07-01 11:53:37,792 - policy_matcher - INFO - 开始分析政策资格: 政策ID=policy_157f44c2, 企业=北京测试科技有限公司
2025-07-01 11:53:37,793 - api - INFO - 自测通过率分析完成: 通过率=10%, 等级=低
2025-07-01 11:55:54,253 - api - INFO - 收到自测通过率请求: 政策ID=policy_157f44c2, 企业=北京测试科技有限公司
2025-07-01 11:55:54,254 - policy_matcher - INFO - 开始分析政策资格: 政策ID=policy_157f44c2, 企业=北京测试科技有限公司
2025-07-01 11:55:54,254 - api - INFO - 自测通过率分析完成: 通过率=10%, 等级=低
2025-07-01 11:56:32,163 - api - INFO - 收到自测通过率请求: 政策ID=policy_157f44c2, 企业=北京测试科技有限公司
2025-07-01 11:56:32,164 - policy_matcher - INFO - 开始分析政策资格: 政策ID=policy_157f44c2, 企业=北京测试科技有限公司
2025-07-01 11:56:32,165 - api - INFO - 自测通过率分析完成: 通过率=10%, 等级=低
2025-07-01 11:56:35,113 - api - INFO - 收到自测通过率请求: 政策ID=policy_157f44c2, 企业=北京测试科技有限公司
2025-07-01 11:56:35,113 - policy_matcher - INFO - 开始分析政策资格: 政策ID=policy_157f44c2, 企业=北京测试科技有限公司
2025-07-01 11:56:35,113 - api - INFO - 自测通过率分析完成: 通过率=10%, 等级=低
